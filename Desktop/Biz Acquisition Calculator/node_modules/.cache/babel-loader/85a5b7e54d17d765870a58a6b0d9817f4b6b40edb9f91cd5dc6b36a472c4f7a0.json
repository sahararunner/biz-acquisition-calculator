{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback,useRef}from'react';import{Download,Settings,Info}from'lucide-react';import VariableCard from'./components/VariableCard';import CustomSlider from'./components/CustomSlider';import{VARIABLES,DEFAULT_SCENARIO}from'./utils/variables';import{calculateTotalCashRequired,calculateAnnualCashToPocket,calculateDSCR,calculateCashOnCashReturn,calculateEnhancedRiskScore,calculateIRR,calculateMOIC,calculatePaybackPeriod,calculateFiveYearProjections,calculateRiskAdjustedOwnership,calculateBusinessWACC,calculateBusinessEVA,verifyCalculations,calculateScenariosWithPriority,calculateTotalCashNeeded,allocateFundingByPriority,calculatePurchasePriceFinancing,calculateBusinessDebtService,calculatePersonalDebtService,calculatePriorityBasedWACC,calculatePriorityBasedOwnership,// New metrics calculations\ncalculateCapitalUtilizationRate,getCapitalUtilizationStatus,calculateLeverageMultiplier,getLeverageMultiplierStatus,calculatePriceToRevenueRatio,getPriceToRevenueStatus,calculateEBITDAMargin,getEBITDAMarginStatus,calculateBusinessCashConversion,getCashConversionStatus,calculateRevenueToInvestmentEfficiency,getRevenueEfficiencyStatus,calculateRiskAdjustedReturn,getRiskAdjustedStatus,calculateIncomeReplacementRatio,getIncomeReplacementStatus,calculateWealthBuildingVelocity,getWealthVelocityStatus,calculateExitValueRange,calculateStressTestResults,getStressTestStatus,calculateGrowthFundingCapacity,getGrowthCapacityStatus,// Debug logging functions\nDEBUG_METRICS,logMetricCalculation,logAllMetricsSummary}from'./utils/calculations';// Separate InfoPopup component to prevent recreation\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InfoPopup=_ref=>{let{showInfoPopup,setShowInfoPopup,searchTerm,setSearchTerm,searchInputRef,allMetricsData}=_ref;// Filter metrics based on search term\nconst filteredMetrics=allMetricsData.map(section=>({...section,metrics:section.metrics.filter(metric=>metric.name.toLowerCase().includes(searchTerm.toLowerCase())||metric.formula.toLowerCase().includes(searchTerm.toLowerCase()))})).filter(section=>section.metrics.length>0);// Function to create detailed breakdown for each metric\nconst createDetailedBreakdown=(metricName,variables)=>{var _variables$management;const breakdowns={\"Your ROI\":{steps:[\"Step 1: Calculate Your Net Annual Gain\",\"Your Net Annual Gain = EBITDA - Business Debt Payments - Management Salary - Tech Investment (amortized)\",`EBITDA = $${(variables.targetRevenue*variables.netProfitMargin/100).toLocaleString()}`,\"Business Debt Payments = SBA Payment + Seller Financing Payment\",`SBA Payment = $${(variables.targetRevenue*variables.netProfitMargin/100*variables.valuationMultiple*(1-variables.sellerFinancing/100)*0.115).toLocaleString()} (11.5% rate)`,`Seller Payment = $${(variables.targetRevenue*variables.netProfitMargin/100*variables.valuationMultiple*variables.sellerFinancing/100*0.08).toLocaleString()} (8% rate)`,`Management Salary = $${(_variables$management=variables.managementSalary)===null||_variables$management===void 0?void 0:_variables$management.toLocaleString()}`,`Tech Investment (amortized) = $${variables.techInvestment/3} (over 3 years)`,\"\",\"Step 2: Calculate Your Total Investment\",\"Your Total Investment = Personal Cash + Taiwanese Loan + Home Equity\",\"Your Total Investment = Sum of your personal funding sources\",\"\",\"Step 3: Calculate ROI\",\"Your ROI = (Your Net Annual Gain ÷ Your Total Investment) × 100\"]},\"Wealth Building Velocity\":{steps:[\"Step 1: Calculate MOIC (Multiple on Invested Capital)\",\"MOIC = (Total Cash Returned + Business Value at Exit) ÷ Personal Cash Invested\",\"\",\"Step 2: Calculate Annual Wealth Creation Rate\",\"Wealth Building Velocity = (MOIC^(1/5) - 1) × 100\",\"\",\"This converts your total 5-year return into an annualized compound growth rate.\",\"Example: If MOIC = 3.0x over 5 years:\",\"Wealth Building Velocity = (3.0^(1/5) - 1) × 100 = 24.57%\"]}};return breakdowns[metricName]||null;};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"All Metrics & Formulas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowInfoPopup(false);setSearchTerm('');},className:\"text-gray-400 hover:text-gray-600 text-2xl font-bold\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{ref:searchInputRef,type:\"text\",placeholder:\"Search metrics and formulas...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\",children:\"\\xD7\"})]}),searchTerm&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-gray-600\",children:[\"Found \",filteredMetrics.reduce((total,section)=>total+section.metrics.length,0),\" matching metrics\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-y-auto max-h-[calc(90vh-200px)] p-6\",children:filteredMetrics.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-lg mb-2\",children:\"No metrics found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-sm\",children:\"Try a different search term\"})]}):filteredMetrics.map((section,sectionIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2\",children:section.section}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:section.metrics.map((metric,metricIndex)=>{const breakdown=createDetailedBreakdown(metric.name,{targetRevenue:2500000,netProfitMargin:25,valuationMultiple:4.2,sellerFinancing:20,sbaDownPayment:12,workingCapital:12,managementSalary:75000,techInvestment:60000});return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-2\",children:metric.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Formula:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed bg-white p-3 rounded border\",children:metric.formula})]}),breakdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Step-by-Step Calculation:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-3 rounded border\",children:breakdown.steps.map((step,stepIndex)=>/*#__PURE__*/_jsx(\"div\",{className:`text-sm ${step===\"\"?\"h-2\":\"mb-1\"}`,children:step===\"\"?\"\":/*#__PURE__*/_jsx(\"span\",{className:step.startsWith(\"Step\")?\"font-semibold text-blue-600\":step.startsWith(\"•\")?\"text-gray-600 ml-2\":\"text-gray-700\",children:step})},stepIndex))})]})]},metricIndex);})})]},sectionIndex))})]})});};const App=()=>{// NEW FUNDING SOURCES STATE\nconst[fundingSources,setFundingSources]=useState(()=>{const saved=localStorage.getItem('fundingSources');return saved?JSON.parse(saved):{taiwaneseLoan:{amount:300000,rate:0.028,term:10,enabled:true,type:'debt',description:'USD loan from Taiwan'},houseEquity:{amount:98273,rate:0.08,term:15,enabled:true,type:'debt',description:'Home equity loan (tax deductible for business use)'},sbaLoan:{amount:0,rate:0.115,term:10,enabled:false,type:'debt',description:'SBA 7(a) business acquisition loan'},sellerFinancing:{amount:0,rate:0.08,term:5,enabled:false,type:'debt',description:'Seller note (subordinated)'},additionalInvestment:{amount:50000,expectedReturn:0.15,enabled:true,type:'equity',description:'Outside investor equity (dilutes ownership)'},personalCash:{amount:50000,opportunityCost:0.08,enabled:true,type:'equity',description:'Personal cash investment'}};});// Info popup state\nconst[showInfoPopup,setShowInfoPopup]=useState(false);const[searchTerm,setSearchTerm]=useState('');const searchInputRef=useRef(null);// Custom target revenue state\nconst[customTargetRevenue,setCustomTargetRevenue]=useState(3500000);const[variables,setVariables]=useState(()=>{const saved=localStorage.getItem('variables');const savedVariables=saved?JSON.parse(saved):DEFAULT_SCENARIO.variables;// Ensure new variables are present (for backward compatibility)\nreturn{...DEFAULT_SCENARIO.variables,...savedVariables};});// Save state to localStorage whenever it changes\nuseEffect(()=>{localStorage.setItem('fundingSources',JSON.stringify(fundingSources));},[fundingSources]);useEffect(()=>{localStorage.setItem('variables',JSON.stringify(variables));},[variables]);// Validation function to catch calculation errors - MUST BE DEFINED BEFORE ANY USEMEMO\nconst validateScenario=scenario=>{const errors=[];if(isNaN(scenario.targetRevenue)||scenario.targetRevenue<=0){errors.push('Business revenue is invalid');}if(isNaN(scenario.ebitda)||scenario.ebitda<=0){errors.push('EBITDA calculation is invalid');}if(isNaN(scenario.purchasePrice)||scenario.purchasePrice<=0){errors.push('Purchase price calculation is invalid');}if(scenario.wacc>50){errors.push(`WACC too high: ${scenario.wacc}% (should be 7-12%)`);}if(scenario.downPaymentNeeded<scenario.purchasePrice*0.15){errors.push('Down payment unrealistically low');}if(errors.length>0){console.error('❌ Calculation Errors:',errors);}else{}return errors;};// NEW CALCULATION FUNCTIONS\n// Calculate monthly payment for any loan\nconst calculateLoanPayment=(principal,rate,termYears)=>{if(principal<=0||rate<=0)return 0;const monthlyRate=rate/12;const payments=termYears*12;return principal*monthlyRate*Math.pow(1+monthlyRate,payments)/(Math.pow(1+monthlyRate,payments)-1)*12;// Return annual payment\n};// Fix WACC calculation - use decimal rates, not percentages!\nconst calculateWACC=function(fundingSources){let taxRate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.25;let totalCapital=0;let weightedCost=0;// Include only enabled funding sources with amounts\nObject.entries(fundingSources).forEach(_ref2=>{let[key,source]=_ref2;if(source.enabled&&source.amount>0){totalCapital+=source.amount;// CRITICAL: Use decimal rates, not percentages!\nlet costRate;if(key==='taiwaneseLoan')costRate=0.028;// 2.8% (personal loan)\nelse if(key==='houseEquity')costRate=0.08;// 8% (personal loan)\nelse if(key==='sbaLoan')costRate=0.115*(1-taxRate);// 11.5% after tax (business deductible)\nelse if(key==='sellerFinancing')costRate=0.08*(1-taxRate*0.5);// 8% after partial tax (less deductible)\nelse if(key==='additionalInvestment')costRate=0.20;// 20% equity cost (investor expected return)\nelse if(key==='personalCash')costRate=0.08;// 8% opportunity cost\nelse costRate=0.08;// Default\nweightedCost+=source.amount*costRate;}});const wacc=totalCapital>0?weightedCost/totalCapital:0;return wacc*100;// Convert to percentage for display\n};// Calculate key parameters for three scenarios\nconst keyParameters=useMemo(()=>{// Fix available cash calculation to only include specific funding sources\nconst totalAvailableCash=(fundingSources.taiwaneseLoan.enabled?fundingSources.taiwaneseLoan.amount:0)+(fundingSources.houseEquity.enabled?fundingSources.houseEquity.amount:0)+(fundingSources.additionalInvestment.enabled?fundingSources.additionalInvestment.amount:0)+(fundingSources.personalCash.enabled?fundingSources.personalCash.amount:0);const scenarios=[{targetRevenue:2000000,name:\"Small Business\"},{targetRevenue:2500000,name:\"Target Business\"},{targetRevenue:3000000,name:\"Large Business\"},{targetRevenue:customTargetRevenue,name:\"Custom Business\"}];return scenarios.map(scenario=>{var _variables$sellerFina,_variables$revenueGro;// Step 1: Calculate EBITDA using current variable values (not mean)\nconst netMargin=variables.netProfitMargin||25;const valuationMultiple=variables.valuationMultiple||4;const sellerFinancingPercent=(_variables$sellerFina=variables.sellerFinancing)!==null&&_variables$sellerFina!==void 0?_variables$sellerFina:20;const revenueGrowthRate=(_variables$revenueGro=variables.revenueGrowthRate)!==null&&_variables$revenueGro!==void 0?_variables$revenueGro:8;const sbaDownPaymentPercent=Math.max(variables.sbaDownPayment||12,10);const ebitda=scenario.targetRevenue*(netMargin/100);const purchasePrice=ebitda*valuationMultiple;// Step 2: Calculate proper down payment structure\n// CORRECTED LOGIC: Calculate seller financing first, then SBA loan, then down payment\nconst sellerFinancingAmount=purchasePrice*(sellerFinancingPercent/100);const sbaLoanAmount=purchasePrice-sellerFinancingAmount;const sbaDownPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);// Note: Total financing may exceed purchase price if both SBA and seller financing are used\n// This is typical in SBA deals where seller financing is additional to SBA loan\n// Step 3: Add working capital and fees\nconst workingCapitalPercent=variables.workingCapital||10;const workingCapital=scenario.targetRevenue*(workingCapitalPercent/100);const fees=purchasePrice*0.025;// 2.5% total fees\nconst totalDownPaymentNeeded=sbaDownPayment+workingCapital+fees;return{...scenario,ebitda:Math.round(ebitda),purchasePrice:Math.round(purchasePrice),availableCash:totalAvailableCash,downPaymentNeeded:Math.round(totalDownPaymentNeeded),sbaDownPayment:Math.round(sbaDownPayment),sbaLoanAmount:Math.round(sbaLoanAmount),sellerFinancingAmount:Math.round(sellerFinancingAmount),workingCapital:Math.round(workingCapital),fees:Math.round(fees),cashSurplusDeficit:Math.round(totalAvailableCash-totalDownPaymentNeeded)};});},[fundingSources,variables,customTargetRevenue]);// Calculate results for all three scenarios with priority-based funding\nconst allResults=useMemo(()=>{const targetRevenues=[2000000,2500000,3000000,customTargetRevenue];const scenarioNames=[\"Small Business\",\"Target Business\",\"Large Business\",\"Custom Business\"];return calculateScenariosWithPriority(targetRevenues,variables,fundingSources).map((scenario,index)=>{var _scenario$businessDeb,_scenario$personalDeb,_variables$currentSal;// Calculate additional metrics using existing functions\nconst cashRequired=calculateTotalCashRequired({purchasePrice:scenario.purchasePrice,sbaDownPaymentPercent:variables.sbaDownPayment,sellerFinancingPercent:variables.sellerFinancing,workingCapitalPercent:variables.workingCapital,targetRevenue:scenario.targetRevenue,techInvestment:variables.techInvestment});const cashFlow=calculateAnnualCashToPocket({targetRevenue:scenario.targetRevenue,netProfitMarginPercent:variables.netProfitMargin,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,sellerFinancingAmount:scenario.purchaseFinancing.sellerFinancingAmount,managementSalary:variables.managementSalary,techInvestment:variables.techInvestment});// Calculate 5-year projections for advanced metrics\nconst fiveYearProjections=calculateFiveYearProjections({targetRevenue:scenario.targetRevenue,revenueGrowthRatePercent:variables.revenueGrowthRate,netProfitMarginPercent:variables.netProfitMargin,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,sellerFinancingAmount:scenario.purchaseFinancing.sellerFinancingAmount,managementSalary:variables.managementSalary,techInvestment:variables.techInvestment,sbaInterestRate:variables.sbaInterestRate,sellerInterestRate:variables.sellerInterestRate});// Calculate advanced return metrics using personal investment base\nconst personalInvestmentBase=scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity;const irr=calculateIRR(personalInvestmentBase,fiveYearProjections.map(p=>p.cashFlow));const moic=calculateMOIC(personalInvestmentBase,fiveYearProjections);const paybackPeriod=calculatePaybackPeriod(personalInvestmentBase,fiveYearProjections);// Calculate 6-year projections\nconst projections=[];let currentRevenue=scenario.targetRevenue;let cumulativeCashFlow=0;for(let year=1;year<=6;year++){const ebitda=currentRevenue*(variables.netProfitMargin/100);const sbaPayment=calculateLoanPayment(scenario.purchaseFinancing.sbaLoanAmount,variables.sbaInterestRate/100,10);const sellerPayment=calculateLoanPayment(scenario.purchaseFinancing.sellerFinancingAmount,variables.sellerInterestRate/100,5);const techInvestmentAmortized=variables.techInvestment/3;const netCashFlow=ebitda-sbaPayment-sellerPayment-variables.managementSalary-techInvestmentAmortized;cumulativeCashFlow+=netCashFlow;projections.push({year,revenue:currentRevenue,ebitda,netCashFlow,cumulativeCashFlow});currentRevenue*=1+variables.revenueGrowthRate/100;}// Log 6-Year Projections\nif(DEBUG_METRICS){console.group(\"📊 Growth Projections - 6-Year Cash Flow\");for(let year=1;year<=6;year++){const yearData=projections[year-1];console.log(`📅 YEAR ${year}:`);console.log(`  Revenue: ${yearData.revenue}`);console.log(`  EBITDA: ${yearData.ebitda}`);console.log(`  Net Cash Flow: ${yearData.netCashFlow}`);console.log(`  Cumulative Cash Flow: ${yearData.cumulativeCashFlow}`);console.log(`  Growth Rate: Revenue +${variables.revenueGrowthRate}%`);console.log(`---`);}console.log(`📋 ASSUMPTIONS:`);console.log(`  Annual Revenue Growth: ${variables.revenueGrowthRate}%`);console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);console.log(`  Management Salary: ${variables.managementSalary}`);console.log(`  Tech Investment: ${variables.techInvestment} (amortized over 3 years)`);console.groupEnd();}// Calculate ROI\nconst totalInvestment=cashRequired.total;const sixYearCashFlow=projections[5].cumulativeCashFlow;const roi=(sixYearCashFlow-totalInvestment)/totalInvestment*100;// Calculate additional metrics\nconst debtServiceCoverage=scenario.businessDebtService.totalBusinessDebtService>0?scenario.ebitda/scenario.businessDebtService.totalBusinessDebtService:0;const cashOnCashReturn=calculateCashOnCashReturn(cashFlow.netCashFlow,personalInvestmentBase);const riskScore=calculateEnhancedRiskScore(debtServiceCoverage,cashOnCashReturn,variables.sellerFinancing);// Log Business DSCR calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Business Health\",\"Business DSCR\",{businessEBITDA:scenario.ebitda,businessDebtService:scenario.businessDebtService.totalBusinessDebtService},\"Business DSCR = Business EBITDA ÷ Business Debt Service\",debtServiceCoverage,{debtServiceComponents:\"SBA + Seller Financing only (excludes personal debt)\",calculation:`${scenario.ebitda} ÷ ${scenario.businessDebtService.totalBusinessDebtService} = ${debtServiceCoverage}x`});}// Log Cash-on-Cash Return calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"Cash-on-Cash Return\",{yourNetAnnualGain:cashFlow.netCashFlow,yourCashInvested:personalInvestmentBase},\"Cash-on-Cash = Annual Cash Flow ÷ Your Cash Invested\",cashOnCashReturn,{definition:\"Return on actual cash invested (excluding leverage)\",calculation:`${cashFlow.netCashFlow} ÷ ${personalInvestmentBase} = ${cashOnCashReturn}%`});}// Business capital invested\nconst businessCapitalInvested=scenario.purchasePrice+scenario.targetRevenue*variables.workingCapital/100+scenario.purchasePrice*0.015+// Due diligence\nscenario.purchasePrice*0.008;// Professional fees\n// Business EVA\nconst businessEVA=calculateBusinessEVA(scenario.ebitda,businessCapitalInvested,scenario.wacc/100);// Log Business EVA calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Business Health\",\"Economic Value Added\",{businessEBITDA:scenario.ebitda,taxRate:0.25,businessCapitalInvested,wacc:scenario.wacc},\"EVA = NOPAT - Capital Charge = EBITDA × (1 - Tax Rate) - (Capital × WACC)\",businessEVA,{nopat:scenario.ebitda*(1-0.25),capitalCharge:businessCapitalInvested*(scenario.wacc/100),calculation:`${scenario.ebitda} × (1 - 0.25) - (${businessCapitalInvested} × ${scenario.wacc}%) = ${businessEVA}`});}// Deal ROI (business level)\nconst dealROI=scenario.purchasePrice>0?scenario.businessCashFlow/scenario.purchasePrice*100:0;// Personal cash invested\nconst personalCashInvested=scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity;// Validate calculations before returning\nconst validationErrors=validateScenario({targetRevenue:scenario.targetRevenue,ebitda:scenario.ebitda,purchasePrice:scenario.purchasePrice,wacc:scenario.wacc,downPaymentNeeded:scenario.totalCashNeeded});return{scenario:scenarioNames[index],cashRequired,cashFlow,financing:{purchasePrice:scenario.purchasePrice,sellerFinancing:scenario.purchaseFinancing.sellerFinancingAmount,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,downPayment:scenario.purchaseFinancing.sbaDownPayment},projections,roi,// Enhanced metrics\ndebtServiceCoverage,dscr:debtServiceCoverage,cashOnCashReturn,riskScore,sbaLoanPrincipal:scenario.purchaseFinancing.sbaLoanPrincipal,sbaMonthlyPayment:scenario.businessDebtService.sbaAnnualPayment/12,sbaAnnualPayment:scenario.businessDebtService.sbaAnnualPayment,sellerMonthlyPayment:scenario.businessDebtService.sellerAnnualPayment/12,sellerAnnualPayment:scenario.businessDebtService.sellerAnnualPayment,irr,moic,paybackPeriod,fiveYearProjections,// FUNDING STRUCTURE WITH PRIORITY ALLOCATION\nactiveFundingSources:Object.entries(scenario.fundingAllocation.allocation).filter(_ref3=>{let[_,amount]=_ref3;return amount>0;}).reduce((acc,_ref4)=>{let[key,amount]=_ref4;acc[key]={amount,enabled:true,type:key==='additionalInvestment'||key==='personalCash'?'equity':'debt',rate:key==='taiwaneseLoan'?0.028:key==='houseEquity'?0.08:key==='sbaLoan'?0.115:key==='sellerFinancing'?0.08:0,term:key==='taiwaneseLoan'?10:key==='houseEquity'?15:key==='sbaLoan'?10:key==='sellerFinancing'?5:0,annualPayment:key==='taiwaneseLoan'?scenario.personalDebtService.taiwanesePayment:key==='houseEquity'?scenario.personalDebtService.houseEquityPayment:key==='sbaLoan'?scenario.businessDebtService.sbaAnnualPayment:key==='sellerFinancing'?scenario.businessDebtService.sellerAnnualPayment:0};return acc;},{}),totalFunding:scenario.fundingAllocation.totalAllocated,totalDebtService:(((_scenario$businessDeb=scenario.businessDebtService)===null||_scenario$businessDeb===void 0?void 0:_scenario$businessDeb.totalBusinessDebtService)||0)+(((_scenario$personalDeb=scenario.personalDebtService)===null||_scenario$personalDeb===void 0?void 0:_scenario$personalDeb.totalPersonalDebtService)||0),totalPersonalEquity:scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity,totalAdditionalEquity:scenario.fundingAllocation.allocation.additionalInvestment,ownershipPercentage:scenario.ownership.yourOwnership,wacc:scenario.wacc,personalCostOfCapital:scenario.personalCostOfCapital,// BUSINESS-LEVEL METRICS\nbusinessFreeCashFlow:Math.round(scenario.businessCashFlow),businessDebtService:Math.round(scenario.businessDebtService.totalBusinessDebtService),businessDSCR:scenario.businessDebtService.totalBusinessDebtService>0?scenario.ebitda/scenario.businessDebtService.totalBusinessDebtService:0,businessEVA:Math.round(businessEVA),businessWACC:scenario.wacc,businessCapitalInvested:Math.round(businessCapitalInvested),dealROI:dealROI,// PERSONAL-LEVEL METRICS\npersonalCashFlow:Math.round(scenario.personalNetCashFlow),ownerCashFlow:Math.round(scenario.personalNetCashFlow),personalROI:scenario.personalROI,ownerROI:scenario.personalROI,personalDebtService:Math.round(scenario.personalDebtService.totalPersonalDebtService),personalCashInvested:Math.round(personalCashInvested),ownerDistribution:Math.round(scenario.ownerDistribution),ownershipDilution:scenario.ownership.investorOwnership*100,investorOwnership:scenario.ownership.investorOwnership,// OWNERSHIP BREAKDOWN\nownershipBreakdown:scenario.ownership.breakdown,// VALIDATION\nvalidationErrors,// PRIORITY ALLOCATION DATA\nfundingAllocation:scenario.fundingAllocation,purchaseFinancing:scenario.purchaseFinancing,businessDebtService:scenario.businessDebtService,personalDebtService:scenario.personalDebtService,ownership:scenario.ownership,businessCashFlow:scenario.businessCashFlow,ownerDistribution:scenario.ownerDistribution,personalNetCashFlow:scenario.personalNetCashFlow,targetRevenue:scenario.targetRevenue,ebitda:scenario.ebitda,purchasePrice:scenario.purchasePrice,totalCashNeeded:scenario.totalCashNeeded,// NEW METRICS CALCULATIONS\n// Section 1: Deal Structure & Financing\ncapitalUtilizationRate:calculateCapitalUtilizationRate(scenario.fundingAllocation.totalAllocated,variables.availableCash||750000),leverageMultiplier:calculateLeverageMultiplier(personalCashInvested,fundingSources.personalCash.amount),priceToRevenueRatio:calculatePriceToRevenueRatio(scenario.purchasePrice,scenario.targetRevenue),// Section 2: Business Health Metrics\nebitdaMargin:calculateEBITDAMargin(scenario.ebitda,scenario.targetRevenue),businessCashConversion:calculateBusinessCashConversion(scenario.businessCashFlow,scenario.ebitda),revenueToInvestmentEfficiency:calculateRevenueToInvestmentEfficiency(scenario.targetRevenue,personalCashInvested),// Section 3: Personal Investment Returns\nriskAdjustedReturn:calculateRiskAdjustedReturn(scenario.personalROI,4.5,riskScore),incomeReplacementRatio:calculateIncomeReplacementRatio(scenario.personalNetCashFlow,(_variables$currentSal=variables.currentSalary)!==null&&_variables$currentSal!==void 0?_variables$currentSal:100000),wealthBuildingVelocity:calculateWealthBuildingVelocity(moic,5),// Based on actual MOIC from scenario\n// Section 4: Growth & Risk Projections\nexitValueRange:calculateExitValueRange(scenario.ebitda*Math.pow(1+(variables.revenueGrowthRate||5)/100,5),// Year 5 EBITDA\nscenario.ownership.yourOwnership),stressTestResults:calculateStressTestResults(scenario.personalROI),growthFundingCapacity:calculateGrowthFundingCapacity(scenario.ebitda*3,// Max sustainable debt (3x EBITDA)\nscenario.businessDebtService.totalBusinessDebtService+scenario.personalDebtService.totalPersonalDebtService,scenario.businessCashFlow*Math.pow(1+(variables.revenueGrowthRate||5)/100,3),// Year 3 cash flow\ncalculateLeverageMultiplier(personalCashInvested,fundingSources.personalCash.amount))};// Log Leverage Multiplier calculation\nif(DEBUG_METRICS){const leverageMultiplier=calculateLeverageMultiplier(personalCashInvested,fundingSources.personalCash.amount);logMetricCalculation(\"Deal Structure\",\"Leverage Multiplier\",{totalInvestment:personalCashInvested,personalCashInvested:fundingSources.personalCash.amount},\"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\",leverageMultiplier,{interpretation:leverageMultiplier>=8?\"Excellent leverage\":leverageMultiplier>=5?\"Good leverage\":leverageMultiplier>=3?\"Fair leverage\":\"Poor leverage\",calculation:`${personalCashInvested} ÷ ${fundingSources.personalCash.amount} = ${leverageMultiplier}x`});}// Log Risk-Adjusted Return calculation\nif(DEBUG_METRICS){const riskAdjustedReturn=calculateRiskAdjustedReturn(scenario.personalROI,4.5,riskScore);logMetricCalculation(\"Personal Returns\",\"Risk-Adjusted Return\",{yourROI:scenario.personalROI,riskFreeRate:4.5,riskScore},\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\",riskAdjustedReturn,{interpretation:riskAdjustedReturn>=1.5?\"Excellent risk-adjusted return\":riskAdjustedReturn>=1.0?\"Good risk-adjusted return\":riskAdjustedReturn>=0.5?\"Fair risk-adjusted return\":\"Poor risk-adjusted return\",calculation:`(${scenario.personalROI} - 4.5) ÷ ${riskScore} = ${riskAdjustedReturn}`});}// Log W-2 Replacement calculation\nif(DEBUG_METRICS){var _variables$currentSal2,_variables$currentSal3,_variables$currentSal4;const incomeReplacementRatio=calculateIncomeReplacementRatio(scenario.personalNetCashFlow,(_variables$currentSal2=variables.currentSalary)!==null&&_variables$currentSal2!==void 0?_variables$currentSal2:100000);logMetricCalculation(\"Personal Returns\",\"W-2 Replacement\",{yourNetAnnualGain:scenario.personalNetCashFlow,currentSalary:(_variables$currentSal3=variables.currentSalary)!==null&&_variables$currentSal3!==void 0?_variables$currentSal3:100000},\"W-2 Replacement = (Your Net Annual Gain ÷ Current Salary) × 100\",incomeReplacementRatio,{interpretation:incomeReplacementRatio>=120?\"Excellent replacement\":incomeReplacementRatio>=80?\"Good replacement\":incomeReplacementRatio>=40?\"Fair replacement\":\"Poor replacement\",calculation:`(${scenario.personalNetCashFlow} ÷ ${(_variables$currentSal4=variables.currentSalary)!==null&&_variables$currentSal4!==void 0?_variables$currentSal4:100000}) × 100 = ${incomeReplacementRatio}%`});}// Log Wealth Velocity calculation\nif(DEBUG_METRICS){const wealthBuildingVelocity=calculateWealthBuildingVelocity(moic,5);logMetricCalculation(\"Personal Returns\",\"Wealth Velocity\",{totalReturnMultiple:moic,investmentPeriod:5},\"Wealth Velocity = Annual wealth creation rate from total return multiple\",wealthBuildingVelocity,{interpretation:wealthBuildingVelocity>=80?\"Excellent velocity\":wealthBuildingVelocity>=40?\"Good velocity\":wealthBuildingVelocity>=20?\"Fair velocity\":\"Poor velocity\",calculation:`Annual wealth creation from ${moic.toFixed(2)}x return over 5 years = ${wealthBuildingVelocity}%`});}});// Log comprehensive summary for all scenarios\nif(DEBUG_METRICS){console.group(\"📊 COMPREHENSIVE DASHBOARD SUMMARY\");console.log(\"🎯 SCENARIOS ANALYZED:\",allResults.length);allResults.forEach((result,index)=>{var _result$wacc,_result$businessDSCR,_result$businessROA,_result$personalROI,_result$cashOnCashRet;console.group(`📋 SCENARIO ${index+1}: ${result.scenario}`);console.log(\"🏢 DEAL STRUCTURE:\");console.log(`  Purchase Price: ${formatCurrency(result.purchasePrice)}`);console.log(`  Available Cash: ${formatCurrency(result.availableCash||750000)}`);console.log(`  Cash Surplus: ${formatCurrency(result.cashSurplus||0)}`);console.log(`  WACC: ${((_result$wacc=result.wacc)===null||_result$wacc===void 0?void 0:_result$wacc.toFixed(2))||0}%`);console.log(\"📈 BUSINESS HEALTH:\");console.log(`  DSCR: ${((_result$businessDSCR=result.businessDSCR)===null||_result$businessDSCR===void 0?void 0:_result$businessDSCR.toFixed(2))||0}x`);console.log(`  ROA: ${((_result$businessROA=result.businessROA)===null||_result$businessROA===void 0?void 0:_result$businessROA.toFixed(2))||0}%`);console.log(`  EVA: ${formatCurrency(result.businessEVA||0)}`);console.log(\"💰 PERSONAL RETURNS:\");console.log(`  Your ROI: ${((_result$personalROI=result.personalROI)===null||_result$personalROI===void 0?void 0:_result$personalROI.toFixed(2))||0}%`);console.log(`  Cash-on-Cash: ${((_result$cashOnCashRet=result.cashOnCashReturn)===null||_result$cashOnCashRet===void 0?void 0:_result$cashOnCashRet.toFixed(2))||0}%`);console.log(`  Payback: ${result.paybackPeriod||'>5 years'}`);console.log(\"📊 KEY ASSUMPTIONS:\");console.log(`  Target Revenue: ${formatCurrency(result.targetRevenue)}`);console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);console.log(`  Valuation Multiple: ${variables.valuationMultiple}x`);console.log(`  Revenue Growth: ${variables.revenueGrowthRate}%`);console.log(`  Working Capital %: ${variables.workingCapital}%`);console.log(`  Management Salary: ${formatCurrency(variables.managementSalary)}`);console.groupEnd();});console.groupEnd();}},[variables,fundingSources,customTargetRevenue]);const handleFundingSourceChange=useCallback((sourceKey,field,value)=>{setFundingSources(prev=>({...prev,[sourceKey]:{...prev[sourceKey],[field]:value}}));},[]);const handleVariableChange=useCallback((variableKey,value)=>{setVariables(prev=>({...prev,[variableKey]:value}));},[]);const resetToDefaults=useCallback(()=>{setFundingSources({taiwaneseLoan:{amount:300000,rate:0.028,term:10,enabled:true,type:'debt',description:'USD loan from Taiwan'},houseEquity:{amount:98273,rate:0.08,term:15,enabled:true,type:'debt',description:'Home equity loan (tax deductible for business use)'},sbaLoan:{amount:0,rate:0.115,term:10,enabled:false,type:'debt',description:'SBA 7(a) business acquisition loan'},sellerFinancing:{amount:0,rate:0.08,term:5,enabled:false,type:'debt',description:'Seller note (subordinated)'},additionalInvestment:{amount:50000,expectedReturn:0.15,enabled:true,type:'equity',description:'Outside investor equity (dilutes ownership)'},personalCash:{amount:50000,opportunityCost:0.08,enabled:true,type:'equity',description:'Personal cash investment'}});setVariables(DEFAULT_SCENARIO.variables);},[]);// Info Tooltip Component with Auto-Positioning\nconst InfoTooltip=_ref5=>{let{formula,children}=_ref5;const[showTooltip,setShowTooltip]=useState(false);const[tooltipPosition,setTooltipPosition]=useState({top:true,left:true});const triggerRef=useRef(null);const tooltipRef=useRef(null);const calculatePosition=useCallback(()=>{if(!triggerRef.current||!tooltipRef.current)return;const triggerRect=triggerRef.current.getBoundingClientRect();const tooltipRect=tooltipRef.current.getBoundingClientRect();const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;// Calculate available space in each direction\nconst spaceAbove=triggerRect.top;const spaceBelow=viewportHeight-triggerRect.bottom;const spaceLeft=triggerRect.left;const spaceRight=viewportWidth-triggerRect.right;// Determine vertical position (prefer below, fallback to above)\nconst shouldShowAbove=spaceBelow<tooltipRect.height&&spaceAbove>tooltipRect.height;// Determine horizontal position (prefer center, fallback to left/right)\nlet horizontalPosition='center';if(spaceRight<tooltipRect.width/2){horizontalPosition='left';}else if(spaceLeft<tooltipRect.width/2){horizontalPosition='right';}// Ensure tooltip doesn't go off-screen\nif(tooltipRect.width>viewportWidth){horizontalPosition='center';}setTooltipPosition({top:!shouldShowAbove,left:horizontalPosition==='left',center:horizontalPosition==='center',right:horizontalPosition==='right'});},[]);// Add window resize and scroll listeners\nuseEffect(()=>{const handleResize=()=>{if(showTooltip){calculatePosition();}};const handleScroll=()=>{if(showTooltip){calculatePosition();}};window.addEventListener('resize',handleResize);window.addEventListener('scroll',handleScroll);return()=>{window.removeEventListener('resize',handleResize);window.removeEventListener('scroll',handleScroll);};},[showTooltip,calculatePosition]);const handleMouseEnter=()=>{setShowTooltip(true);// Calculate position after tooltip is rendered\nsetTimeout(calculatePosition,0);};const handleMouseLeave=()=>{setShowTooltip(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:triggerRef,className:\"inline-flex items-center gap-1 cursor-help\",onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,children:[children,!children&&/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 text-gray-400 hover:text-gray-600\"})]}),showTooltip&&/*#__PURE__*/_jsxs(\"div\",{ref:tooltipRef,className:`absolute z-50 px-4 py-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg max-w-md max-h-96 overflow-auto ${tooltipPosition.top?'top-full mt-2':'bottom-full mb-2'} ${tooltipPosition.center?'left-1/2 transform -translate-x-1/2':tooltipPosition.left?'left-0':'right-0'}`,style:{maxWidth:'calc(100vw - 2rem)',maxHeight:'calc(100vh - 2rem)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium mb-2\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap leading-relaxed\",children:formula}),/*#__PURE__*/_jsx(\"div\",{className:`absolute w-0 h-0 border-l-4 border-r-4 border-transparent ${tooltipPosition.top?'bottom-full left-1/2 transform -translate-x-1/2 border-b-4 border-b-gray-900':'top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900'}`})]})]});};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(amount);};// All metrics data\nconst allMetricsData=[{section:\"Deal Structure\",metrics:[{name:\"Purchase Price\",formula:\"Purchase Price = Target Revenue × Net Profit Margin % × Valuation Multiple\"},{name:\"SBA Down Payment\",formula:\"SBA Down Payment = (Purchase Price - Seller Financing Amount) × SBA Down Payment %\\n\\nThis is the minimum cash required for the SBA loan.\"},{name:\"Down Payment Needed\",formula:\"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\n\\nIncludes:\\n• SBA Down Payment\\n• Working Capital (7.9% of revenue)\\n• Due Diligence & Professional Fees (2.5% of purchase price)\"},{name:\"Available Cash\",formula:\"Available Cash = Sum of all enabled funding sources:\\n\\n• Taiwanese Loan (2.8%)\\n• Personal Cash (8.0%)\\n• Additional Investment (15.0%)\\n• Home Equity (8.0%)\"},{name:\"Cash Surplus/Deficit\",formula:\"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\n\\nPositive (Green): You have sufficient cash for the acquisition\\nNegative (Red): You need additional funding or must reduce deal size\"},{name:\"WACC\",formula:\"WACC = Weighted Average Cost of Capital\\nIncludes ALL funding sources with after-tax rates:\\n• Taiwanese Loan: 2.1% after-tax\\n• Personal Cash: 6% after-tax\\n• Additional Investment: 15% (equity cost)\\n• Home Equity: 6% after-tax\"},{name:\"Your Personal Cost\",formula:\"Your Personal Cost of Capital\\nWeighted average of your personal funding sources:\\n• Taiwanese Loan: 2.8%\\n• Personal Cash: 8% (opportunity cost)\\n• Home Equity: 8%\"},{name:\"Your Ownership\",formula:\"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\"},{name:\"Monthly Business Debt Payment\",formula:\"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\"},{name:\"Monthly Personal Debt Payment\",formula:\"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\"},{name:\"Capital Utilization Rate\",formula:\"Capital Utilization Rate = Total Allocated Funding ÷ Available Cash × 100\\n\\nMeasures percentage of available funding deployed in the deal. Lower utilization provides safety margin for unexpected costs.\"},{name:\"Leverage Multiplier\",formula:\"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\\n\\nShows how effectively you're using leverage to amplify investment capacity. Higher multipliers indicate better capital efficiency.\"},{name:\"Price-to-Revenue\",formula:\"Price-to-Revenue = Purchase Price ÷ Target Annual Revenue\\n\\nMeasures deal efficiency relative to business size. Lower ratios indicate better value deals.\"}]},{section:\"Business Health\",metrics:[{name:\"Business Debt Service\",formula:\"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\nSBA: 11.5% rate, 10-year term\\nSeller: 8% rate, 5-year term\"},{name:\"Economic Value Added\",formula:\"Economic Value Added = NOPAT - Capital Charge\\nNOPAT = EBITDA × (1 - Tax Rate)\\nCapital Charge = Business Capital Invested × WACC\"},{name:\"Business DSCR\",formula:\"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\"},{name:\"Business ROA\",formula:\"Business ROA = (Business Free Cash Flow / Business Capital Invested) × 100\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\"},{name:\"Debt-to-EBITDA Ratio\",formula:\"Debt-to-EBITDA Ratio = Total Business Debt ÷ EBITDA\"},{name:\"Interest Coverage Ratio\",formula:\"Interest Coverage Ratio = EBITDA ÷ Interest Payments\"},{name:\"EBITDA Margin\",formula:\"EBITDA Margin = Business EBITDA ÷ Business Revenue × 100\\n\\nMeasures operational profitability before financing and tax effects. Higher margins indicate more efficient operations and better value creation potential.\"},{name:\"Business Cash Conversion\",formula:\"Business Cash Conversion = Business Free Cash Flow ÷ Business EBITDA × 100\\n\\nShows how efficiently EBITDA converts to actual cash flow. Higher conversion indicates better working capital management.\"},{name:\"Revenue-to-Investment Efficiency\",formula:\"Revenue-to-Investment Efficiency = Target Revenue ÷ Your Total Investment\\n\\nMeasures business scale relative to capital deployed. Higher ratios indicate more efficient capital deployment.\"}]},{section:\"Personal Returns\",metrics:[{name:\"Your ROI\",formula:\"Your ROI = (Your Net Annual Gain ÷ Your Total Cash Invested) × 100\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\"},{name:\"Cash-on-Cash Return\",formula:\"Cash-on-Cash Return = Annual Cash Flow ÷ Your Cash Invested\"},{name:\"Payback Period\",formula:\"Payback Period = Your Total Investment ÷ Your Net Annual Gain\"},{name:\"Risk-Adjusted Return\",formula:\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\\n\\nMeasures return per unit of risk taken. Higher ratios indicate better risk-adjusted performance compared to safe investments.\"},{name:\"Income Replacement Ratio\",formula:\"Income Replacement Ratio = Your Net Annual Gain ÷ Current Salary × 100\\n\\nShows percentage of current employment income replaced by business cash flows. Higher ratios indicate faster transition to business ownership.\"},{name:\"Wealth Building Velocity\",formula:\"Wealth Building Velocity = Annual Wealth Creation Rate\\n\\nMeasures how fast your investment builds wealth compared to traditional investments. Based on total return projections including exit value.\"}]},{section:\"Growth & Risk Projections\",metrics:[{name:\"5-Year Exit Value Scenarios\",formula:\"5-Year Exit Value Range = Year 5 EBITDA × Valuation Multiple × Your Ownership %\\n\\nProjects potential business sale value in 5 years under different market scenarios. Includes cumulative cash flows received during ownership period.\\n\\nAssumptions:\\n• Year 5 EBITDA (5% annual growth)\\n• Your Ownership percentage\\n• Multiple Range: 3.0x (recession) to 4.5x (growth market)\\n\\nTotal Return = Exit Value + 5-Year Cumulative Cash Flows\\n\\nConservative includes potential market downturns\\nExpected assumes current market conditions continue  \\nOptimistic reflects strong business performance and market growth\"},{name:\"Stress Test Results\",formula:\"Stress Test Results = ROI Under Adverse Scenarios\\n\\nTests investment performance under various economic stress conditions to assess downside protection and resilience.\\n\\nTest Scenarios:\\n• Revenue Decline: -20% from base case\\n• Margin Compression: -300 basis points EBITDA margin\\n• Interest Rate Rise: +200 basis points on variable debt\\n\\nMinimum ROI shows worst-case scenario performance\\nTarget: Maintain >7% ROI (market minimum) under stress\\n\\nStrong stress test results indicate robust investment with good downside protection\"},{name:\"Growth Funding Capacity\",formula:\"Growth Funding Capacity = Additional Sustainable Debt Capacity\\n\\nEstimates additional funding available for business growth, acquisitions, or expansion based on improved cash flows and debt capacity.\\n\\nCalculation Based On:\\n• Improved DSCR from business growth\\n• Conservative debt-to-EBITDA limits (<3.0x)\\n• Projected Year 3+ cash flow performance\\n\\nUses Include:\\n• Acquiring competitor businesses\\n• Major expansion projects  \\n• Equipment or technology investments\\n• Working capital for growth\\n\\nHigher capacity indicates strong scalability potential and strategic flexibility\"}]}];// Auto-focus search input when popup opens\nuseEffect(()=>{if(showInfoPopup&&searchInputRef.current){// Small delay to ensure the popup is fully rendered\nsetTimeout(()=>{var _searchInputRef$curre;(_searchInputRef$curre=searchInputRef.current)===null||_searchInputRef$curre===void 0?void 0:_searchInputRef$curre.focus();},100);}},[showInfoPopup]);// Test calculation to verify formulas\nconst testCalculation=useCallback(()=>{const testScenario={targetRevenue:2500000,netProfitMargin:25,valuationMultiple:4,sbaLoanAmount:1500000,sellerFinancingAmount:500000,personalCash:550000,additionalInvestment:100000};const result=verifyCalculations(testScenario);// Verify results are in expected ranges\nconst{testScenario:calc,expectedRanges}=result;return result;},[]);// Run test calculation on component mount\nuseEffect(()=>{testCalculation();},[testCalculation]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-background\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Business Acquisition Calculator\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Interactive tool for evaluating acquisition scenarios\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowInfoPopup(true),className:\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4\"}),\"Info\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"Export\"]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/3 bg-gray-50 p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Funding Sources Configuration\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:Object.entries(fundingSources).filter(_ref6=>{let[key,source]=_ref6;return key!=='sbaLoan'&&key!=='sellerFinancing';}).map(_ref7=>{let[key,source]=_ref7;return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-900\",children:key==='houseEquity'?'Home Equity':key==='sbaLoan'?'SBA Loan':key==='personalCash'?'Personal Cash':key==='additionalInvestment'?'Additional Investment':key==='taiwaneseLoan'?'Taiwanese Loan':key.replace(/([A-Z])/g,' $1').trim()}),/*#__PURE__*/_jsx(InfoTooltip,{formula:source.description,children:/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 text-gray-400 hover:text-gray-600\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-gray-700\",children:\"Current: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900\",children:formatCurrency(source.amount)})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CustomSlider,{value:source.amount,onChange:value=>handleFundingSourceChange(key,'amount',value),min:0,max:key==='taiwaneseLoan'||key==='houseEquity'?300000:key==='additionalInvestment'||key==='personalCash'?100000:1000000,step:25000,unit:\"$\",color:\"blue\",showTooltip:false})}),source.type==='debt'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Rate: \",(source.rate*100).toFixed(1),\"% (after tax \",key==='houseEquity'?(source.rate*100).toFixed(1):(source.rate*0.75*100).toFixed(1),\"%)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Term: \",source.term,\" years\"]})]})]})]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"Variable Controls\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:Object.entries(VARIABLES).map(_ref8=>{let[key,variable]=_ref8;return/*#__PURE__*/_jsx(VariableCard,{variableKey:key,variable:variable,value:variables[key],onValueChange:value=>handleVariableChange(key,value)},key);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-2/3 bg-white p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Scenario Comparison\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-4 gap-4\",children:keyParameters.map((scenario,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm text-gray-600\",children:index===3?\"Custom Target Annual Revenue:\":\"Target Annual Revenue:\"}),index===3?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customTargetRevenue.toLocaleString(),onChange:e=>{const value=parseInt(e.target.value.replace(/[^0-9]/g,''))||0;setCustomTargetRevenue(value);},onBlur:e=>{const value=parseInt(e.target.value.replace(/[^0-9]/g,''))||0;setCustomTargetRevenue(value);},className:\"text-lg font-bold text-gray-900 bg-transparent border-none outline-none text-center w-32 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded\",placeholder:\"3,500,000\",min:\"100000\",max:\"10000000\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-gray-900\",children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-purple-50 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Purchase Price = Target Revenue \\xD7 Net Profit Margin % \\xD7 Valuation Multiple\\\\n\\\\nExample: $2,000,000 \\xD7 20.7% \\xD7 4.1x = $1,697,400\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-purple-800\",children:\"Purchase Price\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-purple-900 text-center\",children:formatCurrency(scenario.purchasePrice)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-orange-50 rounded-lg border border-orange-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"SBA Down Payment = (Purchase Price - Seller Financing Amount) \\xD7 SBA Down Payment %\\\\n\\\\nExample: ($1,697,400 - $274,979) \\xD7 13% = $184,915\\\\n\\\\nThis is the minimum cash required for the SBA loan portion only.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-orange-800\",children:\"SBA Down Payment\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-orange-900 text-center\",children:formatCurrency(scenario.sbaDownPayment)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\\\n\\\\nIncludes:\\\\n\\u2022 SBA Down Payment\\\\n\\u2022 Working Capital (7.9% of revenue)\\\\n\\u2022 Due Diligence & Professional Fees (2.5% of purchase price)\\\\n\\\\nThis is the total cash required for the acquisition.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-blue-800\",children:\"Down Payment Needed\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-blue-900 text-center\",children:formatCurrency(scenario.downPaymentNeeded)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-yellow-50 rounded-lg border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Available Cash = Sum of all enabled funding sources:\\\\n\\\\n\\u2022 Taiwanese Loan: $725,000 (2.8%)\\\\n\\u2022 Personal Cash: $550,000 (8.0%)\\\\n\\u2022 Additional Investment: $100,000 (15.0%)\\\\n\\u2022 Home Equity: $200,000 (8.0%)\\\\n\\\\nThis represents your total accessible capital for the acquisition.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-yellow-800\",children:\"Available Cash\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-yellow-900 text-center\",children:formatCurrency(scenario.availableCash)})]}),/*#__PURE__*/_jsxs(\"div\",{className:`p-2 rounded-lg border ${scenario.cashSurplusDeficit>=0?'bg-green-50 border-green-200':'bg-red-50 border-red-200'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\\\n\\\\nPositive (Green): You have sufficient cash for the acquisition\\\\nNegative (Red): You need additional funding or must reduce acquisition costs\\\\n\\\\nThis determines if the deal is financially feasible with your current resources.\",children:/*#__PURE__*/_jsx(\"span\",{className:`text-xs font-medium ${scenario.cashSurplusDeficit>=0?'text-green-800':'text-red-800'}`,children:\"Cash Surplus/Deficit\"})})}),/*#__PURE__*/_jsx(\"p\",{className:`text-sm font-bold text-center ${scenario.cashSurplusDeficit>=0?'text-green-900':'text-red-900'}`,children:formatCurrency(scenario.cashSurplusDeficit)})]})]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Deal Structure & Financing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-4 gap-4\",children:allResults.map((scenario,index)=>{var _scenario$fundingAllo,_scenario$fundingAllo2,_scenario$fundingAllo3,_scenario$fundingAllo4,_scenario$fundingAllo5,_scenario$fundingAllo6,_scenario$fundingAllo7,_scenario$fundingAllo8,_scenario$fundingAllo9,_scenario$fundingAllo0,_scenario$fundingAllo1,_scenario$fundingAllo10,_scenario$fundingAllo11,_scenario$fundingAllo12;return/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Funding Allocation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Taiwanese Loan:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo=scenario.fundingAllocation)===null||_scenario$fundingAllo===void 0?void 0:(_scenario$fundingAllo2=_scenario$fundingAllo.allocation)===null||_scenario$fundingAllo2===void 0?void 0:_scenario$fundingAllo2.taiwaneseLoan)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Cash:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo3=scenario.fundingAllocation)===null||_scenario$fundingAllo3===void 0?void 0:(_scenario$fundingAllo4=_scenario$fundingAllo3.allocation)===null||_scenario$fundingAllo4===void 0?void 0:_scenario$fundingAllo4.personalCash)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Additional Investment:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo5=scenario.fundingAllocation)===null||_scenario$fundingAllo5===void 0?void 0:(_scenario$fundingAllo6=_scenario$fundingAllo5.allocation)===null||_scenario$fundingAllo6===void 0?void 0:_scenario$fundingAllo6.additionalInvestment)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Seller Financing:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo7=scenario.fundingAllocation)===null||_scenario$fundingAllo7===void 0?void 0:(_scenario$fundingAllo8=_scenario$fundingAllo7.allocation)===null||_scenario$fundingAllo8===void 0?void 0:_scenario$fundingAllo8.sellerFinancing)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Home Equity:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo9=scenario.fundingAllocation)===null||_scenario$fundingAllo9===void 0?void 0:(_scenario$fundingAllo0=_scenario$fundingAllo9.allocation)===null||_scenario$fundingAllo0===void 0?void 0:_scenario$fundingAllo0.houseEquity)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"SBA Loan:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo1=scenario.fundingAllocation)===null||_scenario$fundingAllo1===void 0?void 0:(_scenario$fundingAllo10=_scenario$fundingAllo1.allocation)===null||_scenario$fundingAllo10===void 0?void 0:_scenario$fundingAllo10.sbaLoan)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-1 mt-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Allocated:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(((_scenario$fundingAllo11=scenario.fundingAllocation)===null||_scenario$fundingAllo11===void 0?void 0:_scenario$fundingAllo11.totalAllocated)||0)})]}),((_scenario$fundingAllo12=scenario.fundingAllocation)===null||_scenario$fundingAllo12===void 0?void 0:_scenario$fundingAllo12.downPaymentGap)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-red-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Funding Gap:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(scenario.fundingAllocation.downPaymentGap)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Financing Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"WACC = Weighted Average Cost of Capital\\\\nIncludes ALL funding sources with after-tax rates:\\\\n\\u2022 Taiwanese Loan: 2.1% after-tax\\\\n\\u2022 Personal Cash: 6% after-tax\\\\n\\u2022 Additional Investment: 15%\\\\n\\u2022 Seller Financing: 6% after-tax\\\\n\\u2022 Home Equity: 8%\\\\n\\u2022 SBA Loan: 8.6% after-tax\",children:/*#__PURE__*/_jsx(\"span\",{children:\"WACC:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[(scenario.wacc||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Your Personal Cost of Capital\\\\nWeighted average of your personal funding sources:\\\\n\\u2022 Taiwanese Loan: 2.8%\\\\n\\u2022 Personal Cash: 8% (opportunity cost)\\\\n\\u2022 Home Equity: 8%\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your Personal Cost:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[(scenario.personalCostOfCapital||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your Ownership:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[((scenario.ownershipPercentage||0)*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Investor Ownership:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[((scenario.investorOwnership||0)*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:\"Based on risk-adjusted contributions (Taiwanese Loan: 80%, Home Equity: 120%, Personal Cash: 100%). Control premium and sweat equity not considered.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Monthly Business Debt Payment:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessDebtService.totalBusinessDebtService/12)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Monthly Personal Debt Payment:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.personalDebtService.totalPersonalDebtService/12)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-2 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Capital Utilization Rate = Total Allocated Funding \\xF7 Available Cash \\xD7 100\\\\n\\\\nMeasures percentage of available funding deployed in the deal. Lower utilization provides safety margin for unexpected costs.\\\\n\\\\nExample: $516K allocated \\xF7 $750K available = 69%\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: >95% (Minimal safety margin)\\\\n\\uD83D\\uDFE1 Below Target: 85-95% (Limited flexibility)  \\\\n\\uD83D\\uDFE2 Good: 65-85% (Balanced deployment)\\\\n\\uD83D\\uDD35 Excellent: <65% (High safety margin)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Capital Utilization:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color==='#E74C3C'?'text-red-600':getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color==='#F1C40F'?'text-yellow-500':getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.capitalUtilizationRate||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >95% | Below Target 85-95% | Good 65-85% | Excellent <65%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Leverage Multiplier = Total Investment \\xF7 Personal Cash Invested\\\\n\\\\nShows how effectively you're using leverage to amplify investment capacity. Higher multipliers indicate better capital efficiency.\\\\n\\\\nExample: $516K total investment \\xF7 $50K personal cash = 10.3x\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <3x (Inefficient capital use)\\\\n\\uD83D\\uDFE1 Below Target: 3-5x (Limited leverage)\\\\n\\uD83D\\uDFE2 Good: 5-8x (Balanced leverage)\\\\n\\uD83D\\uDD35 Excellent: >8x (High capital efficiency)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Leverage Multiplier:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getLeverageMultiplierStatus(scenario.leverageMultiplier).color==='#E74C3C'?'text-red-600':getLeverageMultiplierStatus(scenario.leverageMultiplier).color==='#F1C40F'?'text-yellow-500':getLeverageMultiplierStatus(scenario.leverageMultiplier).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.leverageMultiplier||0).toFixed(1),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <3x | Below Target 3-5x | Good 5-8x | Excellent >8x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Price-to-Revenue = Purchase Price \\xF7 Target Annual Revenue\\\\n\\\\nMeasures deal efficiency relative to business size. Lower ratios indicate better value deals.\\\\n\\\\nExample: $2,147,000 purchase price \\xF7 $2,500,000 revenue = 0.86x\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: >1.2x (Expensive relative to revenue)\\\\n\\uD83D\\uDFE1 Below Target: 1.0-1.2x (Fair market pricing)\\\\n\\uD83D\\uDFE2 Good: 0.8-1.0x (Good value)\\\\n\\uD83D\\uDD35 Excellent: <0.8x (Excellent value)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Price-to-Revenue:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getPriceToRevenueStatus(scenario.priceToRevenueRatio).color==='#E74C3C'?'text-red-600':getPriceToRevenueStatus(scenario.priceToRevenueRatio).color==='#F1C40F'?'text-yellow-500':getPriceToRevenueStatus(scenario.priceToRevenueRatio).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.priceToRevenueRatio||0).toFixed(2),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >1.2x | Below Target 1.0-1.2x | Good 0.8-1.0x | Excellent <0.8x\"]})]})]})]})},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Business Health Metrics\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-4 gap-4\",children:allResults.map((scenario,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Revenue:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business EBITDA:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.ebitda)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\\\nSBA: 11.5% rate, 10-year term\\\\nSeller: 8% rate, 5-year term\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business Debt Service:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessDebtService.totalBusinessDebtService)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Free Cash Flow:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessFreeCashFlow)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Economic Value Added = NOPAT - Capital Charge\\\\nNOPAT = EBITDA \\xD7 (1 - Tax Rate)\\\\nCapital Charge = Business Capital Invested \\xD7 WACC\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Economic Value Added:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessEVA)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business DSCR:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.businessDSCR<1.25?'text-red-600':scenario.businessDSCR<1.5?'text-yellow-500':scenario.businessDSCR<2.0?'text-green-600':'text-blue-600'}`,children:[(scenario.businessDSCR||0).toFixed(2),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <1.25x | Below Target 1.25-1.5x | Good 1.5-2.0x | Excellent >2.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business ROA = (Business Free Cash Flow / Business Capital Invested) \\xD7 100\\\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business ROA:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<3?'text-red-600':scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<6?'text-yellow-500':scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<10?'text-green-600':'text-blue-600'}`,children:[(scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <3% | Below Target 3-6% | Good 6-10% | Excellent >10%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Debt-to-EBITDA Ratio = Total Business Debt \\xF7 EBITDA\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Debt-to-EBITDA Ratio:\"})}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>4.0?'text-red-600':(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>3.0?'text-yellow-500':(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>2.0?'text-green-600':'text-blue-600'}`,children:(()=>{const sbaLoan=scenario.fundingAllocation.allocation.sbaLoan||0;const sellerFinancing=scenario.fundingAllocation.allocation.sellerFinancing||0;const totalBusinessDebt=sbaLoan+sellerFinancing;const debtToEbitdaRatio=totalBusinessDebt/scenario.ebitda;return debtToEbitdaRatio.toFixed(1)+'x';})()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >4.0x | Below Target 3.0-4.0x | Good 2.0-3.0x | Excellent <2.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Interest Coverage Ratio = EBITDA \\xF7 Interest Payments\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Interest Coverage Ratio:\"})}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<1.5?'text-red-600':scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<2.5?'text-yellow-500':scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<3.0?'text-green-600':'text-blue-600'}`,children:(()=>{const sbaLoan=scenario.fundingAllocation.allocation.sbaLoan||0;const sellerFinancing=scenario.fundingAllocation.allocation.sellerFinancing||0;const sbaInterest=sbaLoan*0.115;const sellerInterest=sellerFinancing*0.08;const totalInterest=sbaInterest+sellerInterest;const interestCoverageRatio=totalInterest>0?scenario.ebitda/totalInterest:Infinity;return interestCoverageRatio.toFixed(1)+'x';})()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <1.5x | Below Target 1.5-2.5x | Good 2.5-3.0x | Excellent >3.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"EBITDA Margin = Business EBITDA \\xF7 Business Revenue \\xD7 100\\\\n\\\\nMeasures operational profitability before financing and tax effects. Higher margins indicate more efficient operations and pricing power.\\\\n\\\\nExample: $565K EBITDA \\xF7 $2,500K revenue = 22.6%\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <15% (Poor profitability)\\\\n\\uD83D\\uDFE1 Below Target: 15-18% (Below average)\\\\n\\uD83D\\uDFE2 Good: 18-22% (Solid profitability)\\\\n\\uD83D\\uDD35 Excellent: >22% (Strong profitability)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"EBITDA Margin:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getEBITDAMarginStatus(scenario.ebitdaMargin).color==='#E74C3C'?'text-red-600':getEBITDAMarginStatus(scenario.ebitdaMargin).color==='#F1C40F'?'text-yellow-500':getEBITDAMarginStatus(scenario.ebitdaMargin).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.ebitdaMargin||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <15% | Below Target 15-18% | Good 18-22% | Excellent >22%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business Cash Conversion = Business Free Cash Flow \\xF7 Business EBITDA \\xD7 100\\\\n\\\\nShows how efficiently EBITDA converts to actual cash flow. Higher conversion indicates better working capital management and cash generation.\\\\n\\\\nExample: $157K FCF \\xF7 $565K EBITDA = 28%\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <15% (Poor cash conversion)\\\\n\\uD83D\\uDFE1 Below Target: 15-20% (Below average)\\\\n\\uD83D\\uDFE2 Good: 20-30% (Solid conversion)\\\\n\\uD83D\\uDD35 Excellent: >30% (Strong cash generation)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Cash Conversion:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getCashConversionStatus(scenario.businessCashConversion).color==='#E74C3C'?'text-red-600':getCashConversionStatus(scenario.businessCashConversion).color==='#F1C40F'?'text-yellow-500':getCashConversionStatus(scenario.businessCashConversion).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.businessCashConversion||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <15% | Below Target 15-20% | Good 20-30% | Excellent >30%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Revenue-to-Investment Efficiency = Target Revenue \\xF7 Your Total Investment\\\\n\\\\nMeasures business scale relative to capital deployed. Higher ratios indicate more efficient capital deployment and larger business scale per dollar invested.\\\\n\\\\nExample: $2,500K revenue \\xF7 $516K investment = 4.8x\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <3x (Inefficient scale)\\\\n\\uD83D\\uDFE1 Below Target: 3-4x (Below average)\\\\n\\uD83D\\uDFE2 Good: 4-6x (Good efficiency)\\\\n\\uD83D\\uDD35 Excellent: >6x (High efficiency)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Revenue Multiple:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color==='#E74C3C'?'text-red-600':getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color==='#F1C40F'?'text-yellow-500':getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.revenueToInvestmentEfficiency||0).toFixed(1),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <3x | Below Target 3-4x | Good 4-6x | Excellent >6x\"]})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Personal Investment Returns\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-4 gap-4\",children:allResults.map((scenario,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"business-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Business Level\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Revenue Burden:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Operating Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.targetRevenue-scenario.ebitda)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Debt Service:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.businessDebtService.totalBusinessDebtService)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Management Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(variables.managementSalary)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-2 font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Net Gain:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessFreeCashFlow)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personal-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Personal Level\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Investment:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.personalCashInvested)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Distribution:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"+\",formatCurrency(scenario.ownerDistribution)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Debt Service:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.personalDebtService.totalPersonalDebtService)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-2 font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Your Net Annual Gain:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.personalCashFlow)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Your ROI = (Your Net Annual Gain \\xF7 Your Total Cash Invested) \\xD7 100\\\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your ROI:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalROI<7?'text-red-600':scenario.personalROI<12?'text-yellow-500':scenario.personalROI<20?'text-green-600':'text-blue-600'}`,children:[scenario.personalROI.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <7% | Below Target 7-12% | Good 12-20% | Excellent >20%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Cash-on-Cash Return = Annual Cash Flow \\xF7 Your Cash Invested\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Cash-on-Cash Return:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalCashFlow/scenario.personalCashInvested*100<8?'text-red-600':scenario.personalCashFlow/scenario.personalCashInvested*100<12?'text-yellow-500':scenario.personalCashFlow/scenario.personalCashInvested*100<20?'text-green-600':'text-blue-600'}`,children:[(scenario.personalCashFlow/scenario.personalCashInvested*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <8% | Below Target 8-12% | Good 12-20% | Excellent >20%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Payback Period = Your Total Investment \\xF7 Your Net Annual Gain\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Payback Period:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalCashInvested/scenario.personalCashFlow>8?'text-red-600':scenario.personalCashInvested/scenario.personalCashFlow>5?'text-yellow-500':scenario.personalCashInvested/scenario.personalCashFlow>3?'text-green-600':'text-blue-600'}`,children:[(scenario.personalCashInvested/scenario.personalCashFlow).toFixed(1),\" years\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >8 years | Below Target 5-8 years | Good 3-5 years | Excellent <3 years\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) \\xF7 Risk Score\\\\n\\\\nMeasures return per unit of risk taken. Higher ratios indicate better risk-adjusted performance compared to safer alternatives.\\\\n\\\\nExample: (14.8% ROI - 4.5% treasury) \\xF7 4.9 risk score = 2.1\\\\n\\\\nRisk Score Components: Leverage, concentration, industry, execution risk\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <0.5 (Poor risk compensation)\\\\n\\uD83D\\uDFE1 Below Target: 0.5-1.0 (Fair risk-return)\\\\n\\uD83D\\uDFE2 Good: 1.0-1.5 (Good risk-return)\\\\n\\uD83D\\uDD35 Excellent: >1.5 (Strong risk-return)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Risk-Adjusted Return:\"})}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${getRiskAdjustedStatus(scenario.riskAdjustedReturn).color==='#E74C3C'?'text-red-600':getRiskAdjustedStatus(scenario.riskAdjustedReturn).color==='#F1C40F'?'text-yellow-500':getRiskAdjustedStatus(scenario.riskAdjustedReturn).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:(scenario.riskAdjustedReturn||0).toFixed(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <0.5 | Below Target 0.5-1.0 | Good 1.0-1.5 | Excellent >1.5\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Income Replacement Ratio = Your Net Annual Gain \\xF7 Current Salary \\xD7 100\\\\n\\\\nShows percentage of current employment income replaced by business cash flows. Higher ratios indicate faster path to financial independence.\\\\n\\\\nExample: $76K business income \\xF7 $100K salary = 76%\\\\n\\\\nTimeline: Year 1: 76% | Year 3: 132% (full replacement + growth)\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <40% (Cannot replace income)\\\\n\\uD83D\\uDFE1 Below Target: 40-80% (Partial replacement)\\\\n\\uD83D\\uDFE2 Good: 80-120% (Near full replacement)\\\\n\\uD83D\\uDD35 Excellent: >120% (Income enhancement)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"W-2 Replacement:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getIncomeReplacementStatus(scenario.incomeReplacementRatio).color==='#E74C3C'?'text-red-600':getIncomeReplacementStatus(scenario.incomeReplacementRatio).color==='#F1C40F'?'text-yellow-500':getIncomeReplacementStatus(scenario.incomeReplacementRatio).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.incomeReplacementRatio||0).toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <40% | Below Target 40-80% | Good 80-120% | Excellent >120%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Wealth Building Velocity = Annual Wealth Creation Rate\\\\n\\\\nMeasures how fast your investment builds wealth compared to traditional investments. Based on total return projections including cash flows and equity appreciation.\\\\n\\\\nExample: 5.0x total return over 5 years = 100%+ annual wealth creation\\\\n\\\\nComparison: S&P 500 ~10% | Real Estate ~15% | This Investment ~100%+\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <20% (Below market alternatives)\\\\n\\uD83D\\uDFE1 Below Target: 20-40% (Market competitive)\\\\n\\uD83D\\uDFE2 Good: 40-80% (Above market)\\\\n\\uD83D\\uDD35 Excellent: >80% (Exceptional wealth building)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Wealth Velocity:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getWealthVelocityStatus(scenario.wealthBuildingVelocity).color==='#E74C3C'?'text-red-600':getWealthVelocityStatus(scenario.wealthBuildingVelocity).color==='#F1C40F'?'text-yellow-500':getWealthVelocityStatus(scenario.wealthBuildingVelocity).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.wealthBuildingVelocity||0).toFixed(0),\"%+\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <20% | Below Target 20-40% | Good 40-80% | Excellent >80%\"]})]})]})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Growth & Risk Projections\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-4 gap-4\",children:allResults.map((scenario,index)=>{var _scenario$exitValueRa,_scenario$exitValueRa2,_scenario$exitValueRa3,_scenario$stressTestR,_scenario$stressTestR2,_scenario$stressTestR3,_scenario$stressTestR4,_scenario$stressTestR5,_scenario$stressTestR6,_scenario$stressTestR7,_scenario$stressTestR8,_scenario$stressTestR9,_scenario$stressTestR0,_scenario$stressTestR1,_scenario$stressTestR10,_scenario$stressTestR11,_scenario$stressTestR12,_scenario$stressTestR13,_scenario$stressTestR14;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded p-4\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-1\",children:\"Year\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Business FCF\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Your Distribution\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Your Net FCF\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"DSCR\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:scenario.projections.map((year,yearIndex)=>{// Calculate business FCF for this year\nconst yearEBITDA=year.ebitda;const yearBusinessFCF=yearEBITDA-scenario.businessDebtService.totalBusinessDebtService-variables.managementSalary-variables.techInvestment/3;const yearOwnerDistribution=yearBusinessFCF*scenario.ownership.yourOwnership;const yearYourFCF=yearOwnerDistribution-scenario.personalDebtService.totalPersonalDebtService;const yearDSCR=scenario.businessDebtService.totalBusinessDebtService>0?yearEBITDA/scenario.businessDebtService.totalBusinessDebtService:0;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-1\",children:year.year}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearBusinessFCF)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearOwnerDistribution)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearYourFCF)}),/*#__PURE__*/_jsxs(\"td\",{className:`text-right py-1 ${yearDSCR<1.25?'text-red-600':yearDSCR<1.5?'text-yellow-500':yearDSCR<2.0?'text-green-600':'text-blue-600'}`,children:[yearDSCR.toFixed(2),\"x\"]})]},yearIndex);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-3 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-700 mb-2\",children:\"5-Year Exit Value Scenarios:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Conservative:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(((_scenario$exitValueRa=scenario.exitValueRange)===null||_scenario$exitValueRa===void 0?void 0:_scenario$exitValueRa.conservative)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Expected:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[formatCurrency(((_scenario$exitValueRa2=scenario.exitValueRange)===null||_scenario$exitValueRa2===void 0?void 0:_scenario$exitValueRa2.expected)||0),\" \\uD83C\\uDFAF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Optimistic:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(((_scenario$exitValueRa3=scenario.exitValueRange)===null||_scenario$exitValueRa3===void 0?void 0:_scenario$exitValueRa3.optimistic)||0)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"5-Year Exit Value Range = Year 5 EBITDA \\xD7 Valuation Multiple \\xD7 Your Ownership %\\\\n\\\\nProjects potential business sale value in 5 years under different market scenarios. Includes cumulative cash flows received during ownership period.\\\\n\\\\nAssumptions:\\\\n\\u2022 Year 5 EBITDA: $721K (5% annual growth)\\\\n\\u2022 Your Ownership: 83%\\\\n\\u2022 Multiple Range: 3.0x (recession) to 4.5x (growth market)\\\\n\\\\nTotal Return = Exit Value + 5-Year Cumulative Cash Flows\\\\n\\\\nConservative includes potential market downturns\\\\nExpected assumes current market conditions continue  \\\\nOptimistic reflects strong business performance and market growth\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Based on Year 5 EBITDA projections and market multiples\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-700 mb-2\",children:\"Stress Test Results:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Revenue -20%:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR=scenario.stressTestResults)===null||_scenario$stressTestR===void 0?void 0:_scenario$stressTestR.revenueStressROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR2=scenario.stressTestResults)===null||_scenario$stressTestR2===void 0?void 0:_scenario$stressTestR2.revenueStressROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR3=scenario.stressTestResults)===null||_scenario$stressTestR3===void 0?void 0:_scenario$stressTestR3.revenueStressROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[\"ROI = \",(((_scenario$stressTestR4=scenario.stressTestResults)===null||_scenario$stressTestR4===void 0?void 0:_scenario$stressTestR4.revenueStressROI)||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Margin -300bp:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR5=scenario.stressTestResults)===null||_scenario$stressTestR5===void 0?void 0:_scenario$stressTestR5.marginStressROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR6=scenario.stressTestResults)===null||_scenario$stressTestR6===void 0?void 0:_scenario$stressTestR6.marginStressROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR7=scenario.stressTestResults)===null||_scenario$stressTestR7===void 0?void 0:_scenario$stressTestR7.marginStressROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[\"ROI = \",(((_scenario$stressTestR8=scenario.stressTestResults)===null||_scenario$stressTestR8===void 0?void 0:_scenario$stressTestR8.marginStressROI)||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Interest +200bp:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR9=scenario.stressTestResults)===null||_scenario$stressTestR9===void 0?void 0:_scenario$stressTestR9.rateStressROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR0=scenario.stressTestResults)===null||_scenario$stressTestR0===void 0?void 0:_scenario$stressTestR0.rateStressROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR1=scenario.stressTestResults)===null||_scenario$stressTestR1===void 0?void 0:_scenario$stressTestR1.rateStressROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[\"ROI = \",(((_scenario$stressTestR10=scenario.stressTestResults)===null||_scenario$stressTestR10===void 0?void 0:_scenario$stressTestR10.rateStressROI)||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Minimum Scenario:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR11=scenario.stressTestResults)===null||_scenario$stressTestR11===void 0?void 0:_scenario$stressTestR11.minROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR12=scenario.stressTestResults)===null||_scenario$stressTestR12===void 0?void 0:_scenario$stressTestR12.minROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR13=scenario.stressTestResults)===null||_scenario$stressTestR13===void 0?void 0:_scenario$stressTestR13.minROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(((_scenario$stressTestR14=scenario.stressTestResults)===null||_scenario$stressTestR14===void 0?void 0:_scenario$stressTestR14.minROI)||0).toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Stress Test Results = ROI Under Adverse Scenarios\\\\n\\\\nTests investment performance under various economic stress conditions to assess downside protection and resilience.\\\\n\\\\nTest Scenarios:\\\\n\\u2022 Revenue Decline: -20% from base case\\\\n\\u2022 Margin Compression: -300 basis points EBITDA margin\\\\n\\u2022 Interest Rate Rise: +200 basis points on variable debt\\\\n\\\\nMinimum ROI shows worst-case scenario performance\\\\nTarget: Maintain >7% ROI (market minimum) under stress\\\\n\\\\nStrong stress test results indicate robust investment with good downside protection\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Target: Maintain >7% ROI under stress\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-700 mb-2\",children:\"Growth Funding Capacity:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Available Capacity:\"}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${getGrowthCapacityStatus(scenario.growthFundingCapacity).color==='#E74C3C'?'text-red-600':getGrowthCapacityStatus(scenario.growthFundingCapacity).color==='#F1C40F'?'text-yellow-500':getGrowthCapacityStatus(scenario.growthFundingCapacity).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:formatCurrency(scenario.growthFundingCapacity||0)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Growth Funding Capacity = Additional Sustainable Debt Capacity\\\\n\\\\nEstimates additional funding available for business growth, acquisitions, or expansion based on improved cash flows and debt capacity.\\\\n\\\\nCalculation Based On:\\\\n\\u2022 Improved DSCR from business growth\\\\n\\u2022 Conservative debt-to-EBITDA limits (<3.0x)\\\\n\\u2022 Projected Year 3+ cash flow performance\\\\n\\\\nUses Include:\\\\n\\u2022 Acquiring competitor businesses\\\\n\\u2022 Major expansion projects  \\\\n\\u2022 Equipment or technology investments\\\\n\\u2022 Working capital for growth\\\\n\\\\nHigher capacity indicates strong scalability potential and strategic flexibility\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Available for: Acquisition or expansion\"})})})]})]})]})]},index);})})]})]})]}),showInfoPopup&&/*#__PURE__*/_jsx(InfoPopup,{showInfoPopup:showInfoPopup,setShowInfoPopup:setShowInfoPopup,searchTerm:searchTerm,setSearchTerm:setSearchTerm,searchInputRef:searchInputRef,allMetricsData:allMetricsData})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","useRef","Download","Settings","Info","VariableCard","CustomSlider","VARIABLES","DEFAULT_SCENARIO","calculateTotalCashRequired","calculateAnnualCashToPocket","calculateDSCR","calculateCashOnCashReturn","calculateEnhancedRiskScore","calculateIRR","calculateMOIC","calculatePaybackPeriod","calculateFiveYearProjections","calculateRiskAdjustedOwnership","calculateBusinessWACC","calculateBusinessEVA","verifyCalculations","calculateScenariosWithPriority","calculateTotalCashNeeded","allocateFundingByPriority","calculatePurchasePriceFinancing","calculateBusinessDebtService","calculatePersonalDebtService","calculatePriorityBasedWACC","calculatePriorityBasedOwnership","calculateCapitalUtilizationRate","getCapitalUtilizationStatus","calculateLeverageMultiplier","getLeverageMultiplierStatus","calculatePriceToRevenueRatio","getPriceToRevenueStatus","calculateEBITDAMargin","getEBITDAMarginStatus","calculateBusinessCashConversion","getCashConversionStatus","calculateRevenueToInvestmentEfficiency","getRevenueEfficiencyStatus","calculateRiskAdjustedReturn","getRiskAdjustedStatus","calculateIncomeReplacementRatio","getIncomeReplacementStatus","calculateWealthBuildingVelocity","getWealthVelocityStatus","calculateExitValueRange","calculateStressTestResults","getStressTestStatus","calculateGrowthFundingCapacity","getGrowthCapacityStatus","DEBUG_METRICS","logMetricCalculation","logAllMetricsSummary","jsx","_jsx","jsxs","_jsxs","InfoPopup","_ref","showInfoPopup","setShowInfoPopup","searchTerm","setSearchTerm","searchInputRef","allMetricsData","filteredMetrics","map","section","metrics","filter","metric","name","toLowerCase","includes","formula","length","createDetailedBreakdown","metricName","variables","_variables$management","breakdowns","steps","targetRevenue","netProfitMargin","toLocaleString","valuationMultiple","sellerFinancing","managementSalary","techInvestment","className","children","onClick","ref","type","placeholder","value","onChange","e","target","reduce","total","sectionIndex","metricIndex","breakdown","sbaDownPayment","workingCapital","step","stepIndex","startsWith","App","fundingSources","setFundingSources","saved","localStorage","getItem","JSON","parse","taiwaneseLoan","amount","rate","term","enabled","description","houseEquity","sbaLoan","additionalInvestment","expectedReturn","personalCash","opportunityCost","customTargetRevenue","setCustomTargetRevenue","setVariables","savedVariables","setItem","stringify","validateScenario","scenario","errors","isNaN","push","ebitda","purchasePrice","wacc","downPaymentNeeded","console","error","calculateLoanPayment","principal","termYears","monthlyRate","payments","Math","pow","calculateWACC","taxRate","arguments","undefined","totalCapital","weightedCost","Object","entries","forEach","_ref2","key","source","costRate","keyParameters","totalAvailableCash","scenarios","_variables$sellerFina","_variables$revenueGro","netMargin","sellerFinancingPercent","revenueGrowthRate","sbaDownPaymentPercent","max","sellerFinancingAmount","sbaLoanAmount","workingCapitalPercent","fees","totalDownPaymentNeeded","round","availableCash","cashSurplusDeficit","allResults","targetRevenues","scenarioNames","index","_scenario$businessDeb","_scenario$personalDeb","_variables$currentSal","cashRequired","cashFlow","netProfitMarginPercent","purchaseFinancing","fiveYearProjections","revenueGrowthRatePercent","sbaInterestRate","sellerInterestRate","personalInvestmentBase","fundingAllocation","allocation","irr","p","moic","paybackPeriod","projections","currentRevenue","cumulativeCashFlow","year","sbaPayment","sellerPayment","techInvestmentAmortized","netCashFlow","revenue","group","yearData","log","groupEnd","totalInvestment","sixYearCashFlow","roi","debtServiceCoverage","businessDebtService","totalBusinessDebtService","cashOnCashReturn","riskScore","businessEBITDA","debtServiceComponents","calculation","yourNetAnnualGain","yourCashInvested","definition","businessCapitalInvested","businessEVA","nopat","capitalCharge","dealROI","businessCashFlow","personalCashInvested","validationErrors","totalCashNeeded","financing","downPayment","dscr","sbaLoanPrincipal","sbaMonthlyPayment","sbaAnnualPayment","sellerMonthlyPayment","sellerAnnualPayment","activeFundingSources","_ref3","_","acc","_ref4","annualPayment","personalDebtService","taiwanesePayment","houseEquityPayment","totalFunding","totalAllocated","totalDebtService","totalPersonalDebtService","totalPersonalEquity","totalAdditionalEquity","ownershipPercentage","ownership","yourOwnership","personalCostOfCapital","businessFreeCashFlow","businessDSCR","businessWACC","personalCashFlow","personalNetCashFlow","ownerCashFlow","personalROI","ownerROI","ownerDistribution","ownershipDilution","investorOwnership","ownershipBreakdown","capitalUtilizationRate","leverageMultiplier","priceToRevenueRatio","ebitdaMargin","businessCashConversion","revenueToInvestmentEfficiency","riskAdjustedReturn","incomeReplacementRatio","currentSalary","wealthBuildingVelocity","exitValueRange","stressTestResults","growthFundingCapacity","interpretation","yourROI","riskFreeRate","_variables$currentSal2","_variables$currentSal3","_variables$currentSal4","totalReturnMultiple","investmentPeriod","toFixed","result","_result$wacc","_result$businessDSCR","_result$businessROA","_result$personalROI","_result$cashOnCashRet","formatCurrency","cashSurplus","businessROA","handleFundingSourceChange","sourceKey","field","prev","handleVariableChange","variableKey","resetToDefaults","InfoTooltip","_ref5","showTooltip","setShowTooltip","tooltipPosition","setTooltipPosition","top","left","triggerRef","tooltipRef","calculatePosition","current","triggerRect","getBoundingClientRect","tooltipRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","spaceAbove","spaceBelow","bottom","spaceLeft","spaceRight","right","shouldShowAbove","height","horizontalPosition","width","center","handleResize","handleScroll","addEventListener","removeEventListener","handleMouseEnter","setTimeout","handleMouseLeave","onMouseEnter","onMouseLeave","style","maxWidth","maxHeight","Intl","NumberFormat","currency","minimumFractionDigits","maximumFractionDigits","format","_searchInputRef$curre","focus","testCalculation","testScenario","calc","expectedRanges","_ref6","_ref7","replace","trim","min","unit","color","_ref8","variable","onValueChange","parseInt","onBlur","_scenario$fundingAllo","_scenario$fundingAllo2","_scenario$fundingAllo3","_scenario$fundingAllo4","_scenario$fundingAllo5","_scenario$fundingAllo6","_scenario$fundingAllo7","_scenario$fundingAllo8","_scenario$fundingAllo9","_scenario$fundingAllo0","_scenario$fundingAllo1","_scenario$fundingAllo10","_scenario$fundingAllo11","_scenario$fundingAllo12","downPaymentGap","totalBusinessDebt","debtToEbitdaRatio","sbaInterest","sellerInterest","totalInterest","interestCoverageRatio","Infinity","_scenario$exitValueRa","_scenario$exitValueRa2","_scenario$exitValueRa3","_scenario$stressTestR","_scenario$stressTestR2","_scenario$stressTestR3","_scenario$stressTestR4","_scenario$stressTestR5","_scenario$stressTestR6","_scenario$stressTestR7","_scenario$stressTestR8","_scenario$stressTestR9","_scenario$stressTestR0","_scenario$stressTestR1","_scenario$stressTestR10","_scenario$stressTestR11","_scenario$stressTestR12","_scenario$stressTestR13","_scenario$stressTestR14","yearIndex","yearEBITDA","yearBusinessFCF","yearOwnerDistribution","yearYourFCF","yearDSCR","conservative","expected","optimistic","revenueStressROI","marginStressROI","rateStressROI","minROI"],"sources":["/Users/juihanlin/Desktop/Biz Acquisition Calculator/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { Download, Settings, Info } from 'lucide-react';\nimport VariableCard from './components/VariableCard';\nimport CustomSlider from './components/CustomSlider';\nimport { VARIABLES, DEFAULT_SCENARIO } from './utils/variables';\nimport { \n  calculateTotalCashRequired, \n  calculateAnnualCashToPocket, \n  calculateDSCR,\n  calculateCashOnCashReturn,\n  calculateEnhancedRiskScore,\n  calculateIRR,\n  calculateMOIC,\n  calculatePaybackPeriod,\n  calculateFiveYearProjections,\n  calculateRiskAdjustedOwnership,\n  calculateBusinessWACC,\n  calculateBusinessEVA,\n  verifyCalculations,\n  calculateScenariosWithPriority,\n  calculateTotalCashNeeded,\n  allocateFundingByPriority,\n  calculatePurchasePriceFinancing,\n  calculateBusinessDebtService,\n  calculatePersonalDebtService,\n  calculatePriorityBasedWACC,\n  calculatePriorityBasedOwnership,\n  // New metrics calculations\n  calculateCapitalUtilizationRate,\n  getCapitalUtilizationStatus,\n  calculateLeverageMultiplier,\n  getLeverageMultiplierStatus,\n  calculatePriceToRevenueRatio,\n  getPriceToRevenueStatus,\n  calculateEBITDAMargin,\n  getEBITDAMarginStatus,\n  calculateBusinessCashConversion,\n  getCashConversionStatus,\n  calculateRevenueToInvestmentEfficiency,\n  getRevenueEfficiencyStatus,\n  calculateRiskAdjustedReturn,\n  getRiskAdjustedStatus,\n  calculateIncomeReplacementRatio,\n  getIncomeReplacementStatus,\n  calculateWealthBuildingVelocity,\n  getWealthVelocityStatus,\n  calculateExitValueRange,\n  calculateStressTestResults,\n  getStressTestStatus,\n  calculateGrowthFundingCapacity,\n  getGrowthCapacityStatus,\n  // Debug logging functions\n  DEBUG_METRICS,\n  logMetricCalculation,\n  logAllMetricsSummary\n} from './utils/calculations';\n\n// Separate InfoPopup component to prevent recreation\nconst InfoPopup = ({ \n  showInfoPopup, \n  setShowInfoPopup, \n  searchTerm, \n  setSearchTerm, \n  searchInputRef, \n  allMetricsData \n}) => {\n  // Filter metrics based on search term\n  const filteredMetrics = allMetricsData.map(section => ({\n    ...section,\n    metrics: section.metrics.filter(metric => \n      metric.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      metric.formula.toLowerCase().includes(searchTerm.toLowerCase())\n    )\n  })).filter(section => section.metrics.length > 0);\n\n  // Function to create detailed breakdown for each metric\n  const createDetailedBreakdown = (metricName, variables) => {\n    const breakdowns = {\n      \"Your ROI\": {\n        steps: [\n          \"Step 1: Calculate Your Net Annual Gain\",\n          \"Your Net Annual Gain = EBITDA - Business Debt Payments - Management Salary - Tech Investment (amortized)\",\n          `EBITDA = $${(variables.targetRevenue * variables.netProfitMargin / 100).toLocaleString()}`,\n          \"Business Debt Payments = SBA Payment + Seller Financing Payment\",\n          `SBA Payment = $${(variables.targetRevenue * variables.netProfitMargin / 100 * variables.valuationMultiple * (1 - variables.sellerFinancing / 100) * 0.115).toLocaleString()} (11.5% rate)`,\n          `Seller Payment = $${(variables.targetRevenue * variables.netProfitMargin / 100 * variables.valuationMultiple * variables.sellerFinancing / 100 * 0.08).toLocaleString()} (8% rate)`,\n          `Management Salary = $${variables.managementSalary?.toLocaleString()}`,\n          `Tech Investment (amortized) = $${variables.techInvestment / 3} (over 3 years)`,\n          \"\",\n          \"Step 2: Calculate Your Total Investment\",\n          \"Your Total Investment = Personal Cash + Taiwanese Loan + Home Equity\",\n          \"Your Total Investment = Sum of your personal funding sources\",\n          \"\",\n          \"Step 3: Calculate ROI\",\n          \"Your ROI = (Your Net Annual Gain ÷ Your Total Investment) × 100\"\n        ]\n      },\n      \"Wealth Building Velocity\": {\n        steps: [\n          \"Step 1: Calculate MOIC (Multiple on Invested Capital)\",\n          \"MOIC = (Total Cash Returned + Business Value at Exit) ÷ Personal Cash Invested\",\n          \"\",\n          \"Step 2: Calculate Annual Wealth Creation Rate\",\n          \"Wealth Building Velocity = (MOIC^(1/5) - 1) × 100\",\n          \"\",\n          \"This converts your total 5-year return into an annualized compound growth rate.\",\n          \"Example: If MOIC = 3.0x over 5 years:\",\n          \"Wealth Building Velocity = (3.0^(1/5) - 1) × 100 = 24.57%\"\n        ]\n      }\n    };\n    \n    return breakdowns[metricName] || null;\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden\">\n        <div className=\"flex justify-between items-center p-6 border-b border-gray-200\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">All Metrics & Formulas</h2>\n          <button\n            onClick={() => {\n              setShowInfoPopup(false);\n              setSearchTerm('');\n            }}\n            className=\"text-gray-400 hover:text-gray-600 text-2xl font-bold\"\n          >\n            ×\n          </button>\n        </div>\n        \n        {/* Search Box */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"relative\">\n            <input\n              ref={searchInputRef}\n              type=\"text\"\n              placeholder=\"Search metrics and formulas...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            />\n            {searchTerm && (\n              <button\n                onClick={() => setSearchTerm('')}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n              >\n                ×\n              </button>\n            )}\n          </div>\n          {searchTerm && (\n            <div className=\"mt-2 text-sm text-gray-600\">\n              Found {filteredMetrics.reduce((total, section) => total + section.metrics.length, 0)} matching metrics\n            </div>\n          )}\n        </div>\n        \n        <div className=\"overflow-y-auto max-h-[calc(90vh-200px)] p-6\">\n          {filteredMetrics.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <div className=\"text-gray-400 text-lg mb-2\">No metrics found</div>\n              <div className=\"text-gray-500 text-sm\">Try a different search term</div>\n            </div>\n          ) : (\n            filteredMetrics.map((section, sectionIndex) => (\n              <div key={sectionIndex} className=\"mb-8\">\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2\">\n                  {section.section}\n                </h3>\n                <div className=\"grid gap-4\">\n                  {section.metrics.map((metric, metricIndex) => {\n                    const breakdown = createDetailedBreakdown(metric.name, {\n                      targetRevenue: 2500000,\n                      netProfitMargin: 25,\n                      valuationMultiple: 4.2,\n                      sellerFinancing: 20,\n                      sbaDownPayment: 12,\n                      workingCapital: 12,\n                      managementSalary: 75000,\n                      techInvestment: 60000\n                    });\n                    \n                    return (\n                      <div key={metricIndex} className=\"bg-gray-50 rounded-lg p-4\">\n                        <h4 className=\"font-semibold text-gray-900 mb-2\">{metric.name}</h4>\n                        \n                        {/* Original Formula */}\n                        <div className=\"mb-3\">\n                          <div className=\"text-sm font-medium text-gray-700 mb-1\">Formula:</div>\n                          <div className=\"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed bg-white p-3 rounded border\">\n                            {metric.formula}\n                          </div>\n                        </div>\n                        \n                        {/* Detailed Breakdown */}\n                        {breakdown && (\n                          <div className=\"mt-4\">\n                            <div className=\"text-sm font-medium text-gray-700 mb-2\">Step-by-Step Calculation:</div>\n                            <div className=\"bg-white p-3 rounded border\">\n                              {breakdown.steps.map((step, stepIndex) => (\n                                <div key={stepIndex} className={`text-sm ${step === \"\" ? \"h-2\" : \"mb-1\"}`}>\n                                  {step === \"\" ? \"\" : (\n                                    <span className={step.startsWith(\"Step\") ? \"font-semibold text-blue-600\" : \n                                                   step.startsWith(\"•\") ? \"text-gray-600 ml-2\" : \n                                                   \"text-gray-700\"}>{step}</span>\n                                  )}\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst App = () => {\n  // NEW FUNDING SOURCES STATE\n  const [fundingSources, setFundingSources] = useState(() => {\n    const saved = localStorage.getItem('fundingSources');\n    return saved ? JSON.parse(saved) : {\n      taiwaneseLoan: { \n        amount: 300000, \n        rate: 0.028, \n        term: 10, \n        enabled: true,\n        type: 'debt',\n        description: 'USD loan from Taiwan'\n      },\n      houseEquity: { \n        amount: 98273, \n        rate: 0.08, \n        term: 15, \n        enabled: true,\n        type: 'debt',\n        description: 'Home equity loan (tax deductible for business use)'\n      },\n      sbaLoan: { \n        amount: 0, \n        rate: 0.115, \n        term: 10, \n        enabled: false,\n        type: 'debt',\n        description: 'SBA 7(a) business acquisition loan'\n      },\n      sellerFinancing: { \n        amount: 0, \n        rate: 0.08, \n        term: 5, \n        enabled: false,\n        type: 'debt',\n        description: 'Seller note (subordinated)'\n      },\n      additionalInvestment: { \n        amount: 50000, \n        expectedReturn: 0.15, \n        enabled: true,\n        type: 'equity',\n        description: 'Outside investor equity (dilutes ownership)'\n      },\n      personalCash: { \n        amount: 50000, \n        opportunityCost: 0.08, \n        enabled: true,\n        type: 'equity',\n        description: 'Personal cash investment'\n      }\n    };\n  });\n\n  // Info popup state\n  const [showInfoPopup, setShowInfoPopup] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const searchInputRef = useRef(null);\n\n  // Custom target revenue state\n  const [customTargetRevenue, setCustomTargetRevenue] = useState(3500000);\n\n  const [variables, setVariables] = useState(() => {\n    const saved = localStorage.getItem('variables');\n    const savedVariables = saved ? JSON.parse(saved) : DEFAULT_SCENARIO.variables;\n    \n    // Ensure new variables are present (for backward compatibility)\n    return {\n      ...DEFAULT_SCENARIO.variables,\n      ...savedVariables\n    };\n  });\n\n  // Save state to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('fundingSources', JSON.stringify(fundingSources));\n  }, [fundingSources]);\n\n  useEffect(() => {\n    localStorage.setItem('variables', JSON.stringify(variables));\n  }, [variables]);\n\n  // Validation function to catch calculation errors - MUST BE DEFINED BEFORE ANY USEMEMO\n  const validateScenario = (scenario) => {\n    const errors = [];\n    \n    if (isNaN(scenario.targetRevenue) || scenario.targetRevenue <= 0) {\n      errors.push('Business revenue is invalid');\n    }\n    \n    if (isNaN(scenario.ebitda) || scenario.ebitda <= 0) {\n      errors.push('EBITDA calculation is invalid');\n    }\n    \n    if (isNaN(scenario.purchasePrice) || scenario.purchasePrice <= 0) {\n      errors.push('Purchase price calculation is invalid');\n    }\n    \n    if (scenario.wacc > 50) {\n      errors.push(`WACC too high: ${scenario.wacc}% (should be 7-12%)`);\n    }\n    \n    if (scenario.downPaymentNeeded < scenario.purchasePrice * 0.15) {\n      errors.push('Down payment unrealistically low');\n    }\n    \n    if (errors.length > 0) {\n      console.error('❌ Calculation Errors:', errors);\n    } else {\n  \n    }\n    \n    return errors;\n  };\n\n  // NEW CALCULATION FUNCTIONS\n  // Calculate monthly payment for any loan\n  const calculateLoanPayment = (principal, rate, termYears) => {\n    if (principal <= 0 || rate <= 0) return 0;\n    const monthlyRate = rate / 12;\n    const payments = termYears * 12;\n    return (principal * monthlyRate * Math.pow(1 + monthlyRate, payments)) / \n           (Math.pow(1 + monthlyRate, payments) - 1) * 12; // Return annual payment\n  };\n\n  // Fix WACC calculation - use decimal rates, not percentages!\n  const calculateWACC = (fundingSources, taxRate = 0.25) => {\n    let totalCapital = 0;\n    let weightedCost = 0;\n    \n    // Include only enabled funding sources with amounts\n    Object.entries(fundingSources).forEach(([key, source]) => {\n      if (source.enabled && source.amount > 0) {\n        totalCapital += source.amount;\n        \n        // CRITICAL: Use decimal rates, not percentages!\n        let costRate;\n        if (key === 'taiwaneseLoan') costRate = 0.028; // 2.8% (personal loan)\n        else if (key === 'houseEquity') costRate = 0.08; // 8% (personal loan)\n        else if (key === 'sbaLoan') costRate = 0.115 * (1 - taxRate); // 11.5% after tax (business deductible)\n        else if (key === 'sellerFinancing') costRate = 0.08 * (1 - taxRate * 0.5); // 8% after partial tax (less deductible)\n        else if (key === 'additionalInvestment') costRate = 0.20; // 20% equity cost (investor expected return)\n        else if (key === 'personalCash') costRate = 0.08; // 8% opportunity cost\n        else costRate = 0.08; // Default\n        \n        weightedCost += source.amount * costRate;\n      }\n    });\n    \n    const wacc = totalCapital > 0 ? (weightedCost / totalCapital) : 0;\n    return wacc * 100; // Convert to percentage for display\n  };\n\n\n\n\n\n\n\n  // Calculate key parameters for three scenarios\n  const keyParameters = useMemo(() => {\n    // Fix available cash calculation to only include specific funding sources\n    const totalAvailableCash = (\n      (fundingSources.taiwaneseLoan.enabled ? fundingSources.taiwaneseLoan.amount : 0) +\n      (fundingSources.houseEquity.enabled ? fundingSources.houseEquity.amount : 0) +\n      (fundingSources.additionalInvestment.enabled ? fundingSources.additionalInvestment.amount : 0) +\n      (fundingSources.personalCash.enabled ? fundingSources.personalCash.amount : 0)\n    );\n    \n    const scenarios = [\n      { targetRevenue: 2000000, name: \"Small Business\" },\n      { targetRevenue: 2500000, name: \"Target Business\" },\n      { targetRevenue: 3000000, name: \"Large Business\" },\n      { targetRevenue: customTargetRevenue, name: \"Custom Business\" }\n    ];\n\n    return scenarios.map(scenario => {\n      // Step 1: Calculate EBITDA using current variable values (not mean)\n      const netMargin = variables.netProfitMargin || 25;\n      const valuationMultiple = variables.valuationMultiple || 4;\n      const sellerFinancingPercent = variables.sellerFinancing ?? 20;\n      const revenueGrowthRate = variables.revenueGrowthRate ?? 8;\n      const sbaDownPaymentPercent = Math.max(variables.sbaDownPayment || 12, 10);\n      \n      const ebitda = scenario.targetRevenue * (netMargin / 100);\n      const purchasePrice = ebitda * valuationMultiple;\n      \n      // Step 2: Calculate proper down payment structure\n      // CORRECTED LOGIC: Calculate seller financing first, then SBA loan, then down payment\n      const sellerFinancingAmount = purchasePrice * (sellerFinancingPercent / 100);\n      const sbaLoanAmount = purchasePrice - sellerFinancingAmount;\n      const sbaDownPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n      \n      // Note: Total financing may exceed purchase price if both SBA and seller financing are used\n      // This is typical in SBA deals where seller financing is additional to SBA loan\n      \n      // Step 3: Add working capital and fees\n      const workingCapitalPercent = variables.workingCapital || 10;\n      const workingCapital = scenario.targetRevenue * (workingCapitalPercent / 100);\n      const fees = purchasePrice * 0.025; // 2.5% total fees\n      \n      const totalDownPaymentNeeded = sbaDownPayment + workingCapital + fees;\n      \n\n      \n      return {\n        ...scenario,\n        ebitda: Math.round(ebitda),\n        purchasePrice: Math.round(purchasePrice),\n        availableCash: totalAvailableCash,\n        downPaymentNeeded: Math.round(totalDownPaymentNeeded),\n        sbaDownPayment: Math.round(sbaDownPayment),\n        sbaLoanAmount: Math.round(sbaLoanAmount),\n        sellerFinancingAmount: Math.round(sellerFinancingAmount),\n        workingCapital: Math.round(workingCapital),\n        fees: Math.round(fees),\n        cashSurplusDeficit: Math.round(totalAvailableCash - totalDownPaymentNeeded)\n      };\n    });\n  }, [fundingSources, variables, customTargetRevenue]);\n\n  // Calculate results for all three scenarios with priority-based funding\n  const allResults = useMemo(() => {\n    const targetRevenues = [2000000, 2500000, 3000000, customTargetRevenue];\n    const scenarioNames = [\"Small Business\", \"Target Business\", \"Large Business\", \"Custom Business\"];\n    \n    return calculateScenariosWithPriority(targetRevenues, variables, fundingSources).map((scenario, index) => {\n      // Calculate additional metrics using existing functions\n      const cashRequired = calculateTotalCashRequired({\n        purchasePrice: scenario.purchasePrice,\n        sbaDownPaymentPercent: variables.sbaDownPayment,\n        sellerFinancingPercent: variables.sellerFinancing,\n        workingCapitalPercent: variables.workingCapital,\n        targetRevenue: scenario.targetRevenue,\n        techInvestment: variables.techInvestment\n      });\n\n      const cashFlow = calculateAnnualCashToPocket({\n        targetRevenue: scenario.targetRevenue,\n        netProfitMarginPercent: variables.netProfitMargin,\n        sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n        sellerFinancingAmount: scenario.purchaseFinancing.sellerFinancingAmount,\n        managementSalary: variables.managementSalary,\n        techInvestment: variables.techInvestment\n      });\n\n      // Calculate 5-year projections for advanced metrics\n      const fiveYearProjections = calculateFiveYearProjections({\n        targetRevenue: scenario.targetRevenue,\n        revenueGrowthRatePercent: variables.revenueGrowthRate,\n        netProfitMarginPercent: variables.netProfitMargin,\n        sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n        sellerFinancingAmount: scenario.purchaseFinancing.sellerFinancingAmount,\n        managementSalary: variables.managementSalary,\n        techInvestment: variables.techInvestment,\n        sbaInterestRate: variables.sbaInterestRate,\n        sellerInterestRate: variables.sellerInterestRate\n      });\n\n      // Calculate advanced return metrics using personal investment base\n      const personalInvestmentBase = \n        scenario.fundingAllocation.allocation.personalCash + \n        scenario.fundingAllocation.allocation.taiwaneseLoan + \n        scenario.fundingAllocation.allocation.houseEquity;\n      const irr = calculateIRR(personalInvestmentBase, fiveYearProjections.map(p => p.cashFlow));\n      const moic = calculateMOIC(personalInvestmentBase, fiveYearProjections);\n      const paybackPeriod = calculatePaybackPeriod(personalInvestmentBase, fiveYearProjections);\n\n      // Calculate 6-year projections\n      const projections = [];\n      let currentRevenue = scenario.targetRevenue;\n      let cumulativeCashFlow = 0;\n\n      for (let year = 1; year <= 6; year++) {\n        const ebitda = currentRevenue * (variables.netProfitMargin / 100);\n        const sbaPayment = calculateLoanPayment(scenario.purchaseFinancing.sbaLoanAmount, variables.sbaInterestRate / 100, 10);\n        const sellerPayment = calculateLoanPayment(scenario.purchaseFinancing.sellerFinancingAmount, variables.sellerInterestRate / 100, 5);\n        const techInvestmentAmortized = variables.techInvestment / 3;\n\n        const netCashFlow = ebitda - sbaPayment - sellerPayment - variables.managementSalary - techInvestmentAmortized;\n        cumulativeCashFlow += netCashFlow;\n\n        projections.push({\n          year,\n          revenue: currentRevenue,\n          ebitda,\n          netCashFlow,\n          cumulativeCashFlow\n        });\n\n        currentRevenue *= (1 + variables.revenueGrowthRate / 100);\n      }\n      \n      // Log 6-Year Projections\n      if (DEBUG_METRICS) {\n        console.group(\"📊 Growth Projections - 6-Year Cash Flow\");\n        \n        for (let year = 1; year <= 6; year++) {\n          const yearData = projections[year - 1];\n          console.log(`📅 YEAR ${year}:`);\n          console.log(`  Revenue: ${yearData.revenue}`);\n          console.log(`  EBITDA: ${yearData.ebitda}`);\n          console.log(`  Net Cash Flow: ${yearData.netCashFlow}`);\n          console.log(`  Cumulative Cash Flow: ${yearData.cumulativeCashFlow}`);\n          console.log(`  Growth Rate: Revenue +${variables.revenueGrowthRate}%`);\n          console.log(`---`);\n        }\n        \n        console.log(`📋 ASSUMPTIONS:`);\n        console.log(`  Annual Revenue Growth: ${variables.revenueGrowthRate}%`);\n        console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);\n        console.log(`  Management Salary: ${variables.managementSalary}`);\n        console.log(`  Tech Investment: ${variables.techInvestment} (amortized over 3 years)`);\n        \n        console.groupEnd();\n      }\n\n      // Calculate ROI\n      const totalInvestment = cashRequired.total;\n      const sixYearCashFlow = projections[5].cumulativeCashFlow;\n      const roi = ((sixYearCashFlow - totalInvestment) / totalInvestment) * 100;\n\n      // Calculate additional metrics\n      const debtServiceCoverage = scenario.businessDebtService.totalBusinessDebtService > 0 ? \n        scenario.ebitda / scenario.businessDebtService.totalBusinessDebtService : 0;\n      const cashOnCashReturn = calculateCashOnCashReturn(cashFlow.netCashFlow, personalInvestmentBase);\n      const riskScore = calculateEnhancedRiskScore(debtServiceCoverage, cashOnCashReturn, variables.sellerFinancing);\n      \n      // Log Business DSCR calculation\n      if (DEBUG_METRICS) {\n        logMetricCalculation(\n          \"Business Health\",\n          \"Business DSCR\",\n          {\n            businessEBITDA: scenario.ebitda,\n            businessDebtService: scenario.businessDebtService.totalBusinessDebtService\n          },\n          \"Business DSCR = Business EBITDA ÷ Business Debt Service\",\n          debtServiceCoverage,\n          {\n            debtServiceComponents: \"SBA + Seller Financing only (excludes personal debt)\",\n            calculation: `${scenario.ebitda} ÷ ${scenario.businessDebtService.totalBusinessDebtService} = ${debtServiceCoverage}x`\n          }\n        );\n      }\n      \n      // Log Cash-on-Cash Return calculation\n      if (DEBUG_METRICS) {\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"Cash-on-Cash Return\",\n          {\n            yourNetAnnualGain: cashFlow.netCashFlow,\n            yourCashInvested: personalInvestmentBase\n          },\n          \"Cash-on-Cash = Annual Cash Flow ÷ Your Cash Invested\",\n          cashOnCashReturn,\n          {\n            definition: \"Return on actual cash invested (excluding leverage)\",\n            calculation: `${cashFlow.netCashFlow} ÷ ${personalInvestmentBase} = ${cashOnCashReturn}%`\n          }\n        );\n      }\n\n      // Business capital invested\n      const businessCapitalInvested = scenario.purchasePrice + \n        (scenario.targetRevenue * variables.workingCapital / 100) + \n        (scenario.purchasePrice * 0.015) + // Due diligence\n        (scenario.purchasePrice * 0.008); // Professional fees\n\n      // Business EVA\n      const businessEVA = calculateBusinessEVA(scenario.ebitda, businessCapitalInvested, scenario.wacc / 100);\n      \n      // Log Business EVA calculation\n      if (DEBUG_METRICS) {\n        logMetricCalculation(\n          \"Business Health\",\n          \"Economic Value Added\",\n          {\n            businessEBITDA: scenario.ebitda,\n            taxRate: 0.25,\n            businessCapitalInvested,\n            wacc: scenario.wacc\n          },\n          \"EVA = NOPAT - Capital Charge = EBITDA × (1 - Tax Rate) - (Capital × WACC)\",\n          businessEVA,\n          {\n            nopat: scenario.ebitda * (1 - 0.25),\n            capitalCharge: businessCapitalInvested * (scenario.wacc / 100),\n            calculation: `${scenario.ebitda} × (1 - 0.25) - (${businessCapitalInvested} × ${scenario.wacc}%) = ${businessEVA}`\n          }\n        );\n      }\n\n      // Deal ROI (business level)\n      const dealROI = scenario.purchasePrice > 0 ? (scenario.businessCashFlow / scenario.purchasePrice) * 100 : 0;\n\n      // Personal cash invested\n      const personalCashInvested = \n        scenario.fundingAllocation.allocation.personalCash + \n        scenario.fundingAllocation.allocation.taiwaneseLoan + \n        scenario.fundingAllocation.allocation.houseEquity;\n\n      // Validate calculations before returning\n      const validationErrors = validateScenario({\n        targetRevenue: scenario.targetRevenue,\n        ebitda: scenario.ebitda,\n        purchasePrice: scenario.purchasePrice,\n        wacc: scenario.wacc,\n        downPaymentNeeded: scenario.totalCashNeeded\n      });\n\n      return {\n        scenario: scenarioNames[index],\n        cashRequired,\n        cashFlow,\n        financing: {\n          purchasePrice: scenario.purchasePrice,\n          sellerFinancing: scenario.purchaseFinancing.sellerFinancingAmount,\n          sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n          downPayment: scenario.purchaseFinancing.sbaDownPayment\n        },\n        projections,\n        roi,\n        // Enhanced metrics\n        debtServiceCoverage,\n        dscr: debtServiceCoverage,\n        cashOnCashReturn,\n        riskScore,\n        sbaLoanPrincipal: scenario.purchaseFinancing.sbaLoanPrincipal,\n        sbaMonthlyPayment: scenario.businessDebtService.sbaAnnualPayment / 12,\n        sbaAnnualPayment: scenario.businessDebtService.sbaAnnualPayment,\n        sellerMonthlyPayment: scenario.businessDebtService.sellerAnnualPayment / 12,\n        sellerAnnualPayment: scenario.businessDebtService.sellerAnnualPayment,\n        irr,\n        moic,\n        paybackPeriod,\n        fiveYearProjections,\n        \n        // FUNDING STRUCTURE WITH PRIORITY ALLOCATION\n        activeFundingSources: Object.entries(scenario.fundingAllocation.allocation)\n          .filter(([_, amount]) => amount > 0)\n          .reduce((acc, [key, amount]) => {\n            acc[key] = {\n              amount,\n              enabled: true,\n              type: key === 'additionalInvestment' || key === 'personalCash' ? 'equity' : 'debt',\n              rate: key === 'taiwaneseLoan' ? 0.028 : \n                    key === 'houseEquity' ? 0.08 : \n                    key === 'sbaLoan' ? 0.115 : \n                    key === 'sellerFinancing' ? 0.08 : 0,\n              term: key === 'taiwaneseLoan' ? 10 : \n                     key === 'houseEquity' ? 15 : \n                     key === 'sbaLoan' ? 10 : \n                     key === 'sellerFinancing' ? 5 : 0,\n              annualPayment: key === 'taiwaneseLoan' ? scenario.personalDebtService.taiwanesePayment :\n                            key === 'houseEquity' ? scenario.personalDebtService.houseEquityPayment :\n                            key === 'sbaLoan' ? scenario.businessDebtService.sbaAnnualPayment :\n                            key === 'sellerFinancing' ? scenario.businessDebtService.sellerAnnualPayment : 0\n            };\n            return acc;\n          }, {}),\n        totalFunding: scenario.fundingAllocation.totalAllocated,\n        totalDebtService: (scenario.businessDebtService?.totalBusinessDebtService || 0) + (scenario.personalDebtService?.totalPersonalDebtService || 0),\n        totalPersonalEquity: scenario.fundingAllocation.allocation.personalCash + scenario.fundingAllocation.allocation.taiwaneseLoan + scenario.fundingAllocation.allocation.houseEquity,\n        totalAdditionalEquity: scenario.fundingAllocation.allocation.additionalInvestment,\n        ownershipPercentage: scenario.ownership.yourOwnership,\n        wacc: scenario.wacc,\n        personalCostOfCapital: scenario.personalCostOfCapital,\n        \n        // BUSINESS-LEVEL METRICS\n        businessFreeCashFlow: Math.round(scenario.businessCashFlow),\n        businessDebtService: Math.round(scenario.businessDebtService.totalBusinessDebtService),\n        businessDSCR: scenario.businessDebtService.totalBusinessDebtService > 0 ? scenario.ebitda / scenario.businessDebtService.totalBusinessDebtService : 0,\n        businessEVA: Math.round(businessEVA),\n        businessWACC: scenario.wacc,\n        businessCapitalInvested: Math.round(businessCapitalInvested),\n        dealROI: dealROI,\n        \n        // PERSONAL-LEVEL METRICS\n        personalCashFlow: Math.round(scenario.personalNetCashFlow),\n        ownerCashFlow: Math.round(scenario.personalNetCashFlow),\n        personalROI: scenario.personalROI,\n        ownerROI: scenario.personalROI,\n        personalDebtService: Math.round(scenario.personalDebtService.totalPersonalDebtService),\n        personalCashInvested: Math.round(personalCashInvested),\n        ownerDistribution: Math.round(scenario.ownerDistribution),\n        ownershipDilution: scenario.ownership.investorOwnership * 100,\n        investorOwnership: scenario.ownership.investorOwnership,\n        \n        // OWNERSHIP BREAKDOWN\n        ownershipBreakdown: scenario.ownership.breakdown,\n        \n        // VALIDATION\n        validationErrors,\n        \n        // PRIORITY ALLOCATION DATA\n        fundingAllocation: scenario.fundingAllocation,\n        purchaseFinancing: scenario.purchaseFinancing,\n        businessDebtService: scenario.businessDebtService,\n        personalDebtService: scenario.personalDebtService,\n        ownership: scenario.ownership,\n        businessCashFlow: scenario.businessCashFlow,\n        ownerDistribution: scenario.ownerDistribution,\n        personalNetCashFlow: scenario.personalNetCashFlow,\n        targetRevenue: scenario.targetRevenue,\n        ebitda: scenario.ebitda,\n        purchasePrice: scenario.purchasePrice,\n        totalCashNeeded: scenario.totalCashNeeded,\n        \n        // NEW METRICS CALCULATIONS\n        // Section 1: Deal Structure & Financing\n        capitalUtilizationRate: calculateCapitalUtilizationRate(scenario.fundingAllocation.totalAllocated, variables.availableCash || 750000),\n        leverageMultiplier: calculateLeverageMultiplier(personalCashInvested, fundingSources.personalCash.amount),\n        priceToRevenueRatio: calculatePriceToRevenueRatio(scenario.purchasePrice, scenario.targetRevenue),\n        \n        // Section 2: Business Health Metrics\n        ebitdaMargin: calculateEBITDAMargin(scenario.ebitda, scenario.targetRevenue),\n        businessCashConversion: calculateBusinessCashConversion(scenario.businessCashFlow, scenario.ebitda),\n        revenueToInvestmentEfficiency: calculateRevenueToInvestmentEfficiency(scenario.targetRevenue, personalCashInvested),\n        \n        // Section 3: Personal Investment Returns\n        riskAdjustedReturn: calculateRiskAdjustedReturn(scenario.personalROI, 4.5, riskScore),\n                  incomeReplacementRatio: calculateIncomeReplacementRatio(scenario.personalNetCashFlow, variables.currentSalary ?? 100000),\n        wealthBuildingVelocity: calculateWealthBuildingVelocity(moic, 5), // Based on actual MOIC from scenario\n        \n        // Section 4: Growth & Risk Projections\n        exitValueRange: calculateExitValueRange(\n          scenario.ebitda * Math.pow(1 + (variables.revenueGrowthRate || 5) / 100, 5), // Year 5 EBITDA\n          scenario.ownership.yourOwnership\n        ),\n        stressTestResults: calculateStressTestResults(scenario.personalROI),\n        growthFundingCapacity: calculateGrowthFundingCapacity(\n          scenario.ebitda * 3, // Max sustainable debt (3x EBITDA)\n          scenario.businessDebtService.totalBusinessDebtService + scenario.personalDebtService.totalPersonalDebtService,\n          scenario.businessCashFlow * Math.pow(1 + (variables.revenueGrowthRate || 5) / 100, 3), // Year 3 cash flow\n          calculateLeverageMultiplier(personalCashInvested, fundingSources.personalCash.amount)\n        )\n      };\n      \n      // Log Leverage Multiplier calculation\n      if (DEBUG_METRICS) {\n        const leverageMultiplier = calculateLeverageMultiplier(personalCashInvested, fundingSources.personalCash.amount);\n        logMetricCalculation(\n          \"Deal Structure\",\n          \"Leverage Multiplier\",\n          {\n            totalInvestment: personalCashInvested,\n            personalCashInvested: fundingSources.personalCash.amount\n          },\n          \"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\",\n          leverageMultiplier,\n          {\n            interpretation: leverageMultiplier >= 8 ? \"Excellent leverage\" : leverageMultiplier >= 5 ? \"Good leverage\" : leverageMultiplier >= 3 ? \"Fair leverage\" : \"Poor leverage\",\n            calculation: `${personalCashInvested} ÷ ${fundingSources.personalCash.amount} = ${leverageMultiplier}x`\n          }\n        );\n      }\n      \n      // Log Risk-Adjusted Return calculation\n      if (DEBUG_METRICS) {\n        const riskAdjustedReturn = calculateRiskAdjustedReturn(scenario.personalROI, 4.5, riskScore);\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"Risk-Adjusted Return\",\n          {\n            yourROI: scenario.personalROI,\n            riskFreeRate: 4.5,\n            riskScore\n          },\n          \"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\",\n          riskAdjustedReturn,\n          {\n            interpretation: riskAdjustedReturn >= 1.5 ? \"Excellent risk-adjusted return\" : riskAdjustedReturn >= 1.0 ? \"Good risk-adjusted return\" : riskAdjustedReturn >= 0.5 ? \"Fair risk-adjusted return\" : \"Poor risk-adjusted return\",\n            calculation: `(${scenario.personalROI} - 4.5) ÷ ${riskScore} = ${riskAdjustedReturn}`\n          }\n        );\n      }\n      \n      // Log W-2 Replacement calculation\n      if (DEBUG_METRICS) {\n        const incomeReplacementRatio = calculateIncomeReplacementRatio(scenario.personalNetCashFlow, variables.currentSalary ?? 100000);\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"W-2 Replacement\",\n          {\n            yourNetAnnualGain: scenario.personalNetCashFlow,\n            currentSalary: variables.currentSalary ?? 100000\n          },\n          \"W-2 Replacement = (Your Net Annual Gain ÷ Current Salary) × 100\",\n          incomeReplacementRatio,\n          {\n            interpretation: incomeReplacementRatio >= 120 ? \"Excellent replacement\" : incomeReplacementRatio >= 80 ? \"Good replacement\" : incomeReplacementRatio >= 40 ? \"Fair replacement\" : \"Poor replacement\",\n            calculation: `(${scenario.personalNetCashFlow} ÷ ${variables.currentSalary ?? 100000}) × 100 = ${incomeReplacementRatio}%`\n          }\n        );\n      }\n      \n      // Log Wealth Velocity calculation\n      if (DEBUG_METRICS) {\n        const wealthBuildingVelocity = calculateWealthBuildingVelocity(moic, 5);\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"Wealth Velocity\",\n          {\n            totalReturnMultiple: moic,\n            investmentPeriod: 5\n          },\n          \"Wealth Velocity = Annual wealth creation rate from total return multiple\",\n          wealthBuildingVelocity,\n          {\n            interpretation: wealthBuildingVelocity >= 80 ? \"Excellent velocity\" : wealthBuildingVelocity >= 40 ? \"Good velocity\" : wealthBuildingVelocity >= 20 ? \"Fair velocity\" : \"Poor velocity\",\n            calculation: `Annual wealth creation from ${moic.toFixed(2)}x return over 5 years = ${wealthBuildingVelocity}%`\n          }\n        );\n      }\n    });\n    \n    // Log comprehensive summary for all scenarios\n    if (DEBUG_METRICS) {\n      console.group(\"📊 COMPREHENSIVE DASHBOARD SUMMARY\");\n      console.log(\"🎯 SCENARIOS ANALYZED:\", allResults.length);\n      \n      allResults.forEach((result, index) => {\n        console.group(`📋 SCENARIO ${index + 1}: ${result.scenario}`);\n        console.log(\"🏢 DEAL STRUCTURE:\");\n        console.log(`  Purchase Price: ${formatCurrency(result.purchasePrice)}`);\n        console.log(`  Available Cash: ${formatCurrency(result.availableCash || 750000)}`);\n        console.log(`  Cash Surplus: ${formatCurrency(result.cashSurplus || 0)}`);\n        console.log(`  WACC: ${result.wacc?.toFixed(2) || 0}%`);\n        \n        console.log(\"📈 BUSINESS HEALTH:\");\n        console.log(`  DSCR: ${result.businessDSCR?.toFixed(2) || 0}x`);\n        console.log(`  ROA: ${result.businessROA?.toFixed(2) || 0}%`);\n        console.log(`  EVA: ${formatCurrency(result.businessEVA || 0)}`);\n        \n        console.log(\"💰 PERSONAL RETURNS:\");\n        console.log(`  Your ROI: ${result.personalROI?.toFixed(2) || 0}%`);\n        console.log(`  Cash-on-Cash: ${result.cashOnCashReturn?.toFixed(2) || 0}%`);\n        console.log(`  Payback: ${result.paybackPeriod || '>5 years'}`);\n        \n        console.log(\"📊 KEY ASSUMPTIONS:\");\n        console.log(`  Target Revenue: ${formatCurrency(result.targetRevenue)}`);\n        console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);\n        console.log(`  Valuation Multiple: ${variables.valuationMultiple}x`);\n        console.log(`  Revenue Growth: ${variables.revenueGrowthRate}%`);\n        console.log(`  Working Capital %: ${variables.workingCapital}%`);\n        console.log(`  Management Salary: ${formatCurrency(variables.managementSalary)}`);\n        console.groupEnd();\n      });\n      \n      console.groupEnd();\n    }\n  }, [variables, fundingSources, customTargetRevenue]);\n\n  const handleFundingSourceChange = useCallback((sourceKey, field, value) => {\n    setFundingSources(prev => ({\n      ...prev,\n      [sourceKey]: { ...prev[sourceKey], [field]: value }\n    }));\n  }, []);\n\n  const handleVariableChange = useCallback((variableKey, value) => {\n    setVariables(prev => ({ ...prev, [variableKey]: value }));\n  }, []);\n\n  const resetToDefaults = useCallback(() => {\n    setFundingSources({\n      taiwaneseLoan: { \n        amount: 300000, \n        rate: 0.028, \n        term: 10, \n        enabled: true,\n        type: 'debt',\n        description: 'USD loan from Taiwan'\n      },\n      houseEquity: { \n        amount: 98273, \n        rate: 0.08, \n        term: 15, \n        enabled: true,\n        type: 'debt',\n        description: 'Home equity loan (tax deductible for business use)'\n      },\n      sbaLoan: { \n        amount: 0, \n        rate: 0.115, \n        term: 10, \n        enabled: false,\n        type: 'debt',\n        description: 'SBA 7(a) business acquisition loan'\n      },\n      sellerFinancing: { \n        amount: 0, \n        rate: 0.08, \n        term: 5, \n        enabled: false,\n        type: 'debt',\n        description: 'Seller note (subordinated)'\n      },\n      additionalInvestment: { \n        amount: 50000, \n        expectedReturn: 0.15, \n        enabled: true,\n        type: 'equity',\n        description: 'Outside investor equity (dilutes ownership)'\n      },\n      personalCash: { \n        amount: 50000, \n        opportunityCost: 0.08, \n        enabled: true,\n        type: 'equity',\n        description: 'Personal cash investment'\n      }\n    });\n    setVariables(DEFAULT_SCENARIO.variables);\n  }, []);\n\n  // Info Tooltip Component with Auto-Positioning\n  const InfoTooltip = ({ formula, children }) => {\n    const [showTooltip, setShowTooltip] = useState(false);\n    const [tooltipPosition, setTooltipPosition] = useState({ top: true, left: true });\n    const triggerRef = useRef(null);\n    const tooltipRef = useRef(null);\n    \n    const calculatePosition = useCallback(() => {\n      if (!triggerRef.current || !tooltipRef.current) return;\n      \n      const triggerRect = triggerRef.current.getBoundingClientRect();\n      const tooltipRect = tooltipRef.current.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n      \n      // Calculate available space in each direction\n      const spaceAbove = triggerRect.top;\n      const spaceBelow = viewportHeight - triggerRect.bottom;\n      const spaceLeft = triggerRect.left;\n      const spaceRight = viewportWidth - triggerRect.right;\n      \n      // Determine vertical position (prefer below, fallback to above)\n      const shouldShowAbove = spaceBelow < tooltipRect.height && spaceAbove > tooltipRect.height;\n      \n      // Determine horizontal position (prefer center, fallback to left/right)\n      let horizontalPosition = 'center';\n      if (spaceRight < tooltipRect.width / 2) {\n        horizontalPosition = 'left';\n      } else if (spaceLeft < tooltipRect.width / 2) {\n        horizontalPosition = 'right';\n      }\n      \n      // Ensure tooltip doesn't go off-screen\n      if (tooltipRect.width > viewportWidth) {\n        horizontalPosition = 'center';\n      }\n      \n      setTooltipPosition({\n        top: !shouldShowAbove,\n        left: horizontalPosition === 'left',\n        center: horizontalPosition === 'center',\n        right: horizontalPosition === 'right'\n      });\n    }, []);\n    \n    // Add window resize and scroll listeners\n    useEffect(() => {\n      const handleResize = () => {\n        if (showTooltip) {\n          calculatePosition();\n        }\n      };\n      \n      const handleScroll = () => {\n        if (showTooltip) {\n          calculatePosition();\n        }\n      };\n      \n      window.addEventListener('resize', handleResize);\n      window.addEventListener('scroll', handleScroll);\n      return () => {\n        window.removeEventListener('resize', handleResize);\n        window.removeEventListener('scroll', handleScroll);\n      };\n    }, [showTooltip, calculatePosition]);\n    \n    const handleMouseEnter = () => {\n      setShowTooltip(true);\n      // Calculate position after tooltip is rendered\n      setTimeout(calculatePosition, 0);\n    };\n    \n    const handleMouseLeave = () => {\n      setShowTooltip(false);\n    };\n    \n    return (\n      <div className=\"relative inline-block\">\n        <div \n          ref={triggerRef}\n          className=\"inline-flex items-center gap-1 cursor-help\"\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n        >\n          {children}\n          {!children && <Info className=\"w-3 h-3 text-gray-400 hover:text-gray-600\" />}\n        </div>\n        {showTooltip && (\n          <div \n            ref={tooltipRef}\n            className={`absolute z-50 px-4 py-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg max-w-md max-h-96 overflow-auto ${\n              tooltipPosition.top \n                ? 'top-full mt-2' \n                : 'bottom-full mb-2'\n            } ${\n              tooltipPosition.center \n                ? 'left-1/2 transform -translate-x-1/2' \n                : tooltipPosition.left \n                ? 'left-0' \n                : 'right-0'\n            }`}\n            style={{\n              maxWidth: 'calc(100vw - 2rem)',\n              maxHeight: 'calc(100vh - 2rem)'\n            }}\n          >\n            <div className=\"font-medium mb-2\">Description:</div>\n            <div className=\"whitespace-pre-wrap leading-relaxed\">{formula}</div>\n            {/* Arrow pointing to trigger */}\n            <div className={`absolute w-0 h-0 border-l-4 border-r-4 border-transparent ${\n              tooltipPosition.top \n                ? 'bottom-full left-1/2 transform -translate-x-1/2 border-b-4 border-b-gray-900' \n                : 'top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900'\n            }`}></div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  // All metrics data\n  const allMetricsData = [\n      {\n        section: \"Deal Structure\",\n        metrics: [\n          {\n            name: \"Purchase Price\",\n            formula: \"Purchase Price = Target Revenue × Net Profit Margin % × Valuation Multiple\"\n          },\n          {\n            name: \"SBA Down Payment\",\n            formula: \"SBA Down Payment = (Purchase Price - Seller Financing Amount) × SBA Down Payment %\\n\\nThis is the minimum cash required for the SBA loan.\"\n          },\n          {\n            name: \"Down Payment Needed\",\n            formula: \"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\n\\nIncludes:\\n• SBA Down Payment\\n• Working Capital (7.9% of revenue)\\n• Due Diligence & Professional Fees (2.5% of purchase price)\"\n          },\n          {\n            name: \"Available Cash\",\n            formula: \"Available Cash = Sum of all enabled funding sources:\\n\\n• Taiwanese Loan (2.8%)\\n• Personal Cash (8.0%)\\n• Additional Investment (15.0%)\\n• Home Equity (8.0%)\"\n          },\n          {\n            name: \"Cash Surplus/Deficit\",\n            formula: \"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\n\\nPositive (Green): You have sufficient cash for the acquisition\\nNegative (Red): You need additional funding or must reduce deal size\"\n          },\n          {\n            name: \"WACC\",\n            formula: \"WACC = Weighted Average Cost of Capital\\nIncludes ALL funding sources with after-tax rates:\\n• Taiwanese Loan: 2.1% after-tax\\n• Personal Cash: 6% after-tax\\n• Additional Investment: 15% (equity cost)\\n• Home Equity: 6% after-tax\"\n          },\n          {\n            name: \"Your Personal Cost\",\n            formula: \"Your Personal Cost of Capital\\nWeighted average of your personal funding sources:\\n• Taiwanese Loan: 2.8%\\n• Personal Cash: 8% (opportunity cost)\\n• Home Equity: 8%\"\n          },\n          {\n            name: \"Your Ownership\",\n            formula: \"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\"\n          },\n          {\n            name: \"Monthly Business Debt Payment\",\n            formula: \"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\"\n          },\n          {\n            name: \"Monthly Personal Debt Payment\",\n            formula: \"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\"\n          },\n          {\n            name: \"Capital Utilization Rate\",\n            formula: \"Capital Utilization Rate = Total Allocated Funding ÷ Available Cash × 100\\n\\nMeasures percentage of available funding deployed in the deal. Lower utilization provides safety margin for unexpected costs.\"\n          },\n          {\n            name: \"Leverage Multiplier\",\n            formula: \"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\\n\\nShows how effectively you're using leverage to amplify investment capacity. Higher multipliers indicate better capital efficiency.\"\n          },\n          {\n            name: \"Price-to-Revenue\",\n            formula: \"Price-to-Revenue = Purchase Price ÷ Target Annual Revenue\\n\\nMeasures deal efficiency relative to business size. Lower ratios indicate better value deals.\"\n          }\n        ]\n      },\n      {\n        section: \"Business Health\",\n        metrics: [\n          {\n            name: \"Business Debt Service\",\n            formula: \"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\nSBA: 11.5% rate, 10-year term\\nSeller: 8% rate, 5-year term\"\n          },\n          {\n            name: \"Economic Value Added\",\n            formula: \"Economic Value Added = NOPAT - Capital Charge\\nNOPAT = EBITDA × (1 - Tax Rate)\\nCapital Charge = Business Capital Invested × WACC\"\n          },\n          {\n            name: \"Business DSCR\",\n            formula: \"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\"\n          },\n          {\n            name: \"Business ROA\",\n            formula: \"Business ROA = (Business Free Cash Flow / Business Capital Invested) × 100\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\"\n          },\n          {\n            name: \"Debt-to-EBITDA Ratio\",\n            formula: \"Debt-to-EBITDA Ratio = Total Business Debt ÷ EBITDA\"\n          },\n          {\n            name: \"Interest Coverage Ratio\",\n            formula: \"Interest Coverage Ratio = EBITDA ÷ Interest Payments\"\n          },\n          {\n            name: \"EBITDA Margin\",\n            formula: \"EBITDA Margin = Business EBITDA ÷ Business Revenue × 100\\n\\nMeasures operational profitability before financing and tax effects. Higher margins indicate more efficient operations and better value creation potential.\"\n          },\n          {\n            name: \"Business Cash Conversion\",\n            formula: \"Business Cash Conversion = Business Free Cash Flow ÷ Business EBITDA × 100\\n\\nShows how efficiently EBITDA converts to actual cash flow. Higher conversion indicates better working capital management.\"\n          },\n          {\n            name: \"Revenue-to-Investment Efficiency\",\n            formula: \"Revenue-to-Investment Efficiency = Target Revenue ÷ Your Total Investment\\n\\nMeasures business scale relative to capital deployed. Higher ratios indicate more efficient capital deployment.\"\n          }\n        ]\n      },\n      {\n        section: \"Personal Returns\",\n        metrics: [\n          {\n            name: \"Your ROI\",\n            formula: \"Your ROI = (Your Net Annual Gain ÷ Your Total Cash Invested) × 100\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\"\n          },\n          {\n            name: \"Cash-on-Cash Return\",\n            formula: \"Cash-on-Cash Return = Annual Cash Flow ÷ Your Cash Invested\"\n          },\n          {\n            name: \"Payback Period\",\n            formula: \"Payback Period = Your Total Investment ÷ Your Net Annual Gain\"\n          },\n          {\n            name: \"Risk-Adjusted Return\",\n            formula: \"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\\n\\nMeasures return per unit of risk taken. Higher ratios indicate better risk-adjusted performance compared to safe investments.\"\n          },\n          {\n            name: \"Income Replacement Ratio\",\n            formula: \"Income Replacement Ratio = Your Net Annual Gain ÷ Current Salary × 100\\n\\nShows percentage of current employment income replaced by business cash flows. Higher ratios indicate faster transition to business ownership.\"\n          },\n          {\n            name: \"Wealth Building Velocity\",\n            formula: \"Wealth Building Velocity = Annual Wealth Creation Rate\\n\\nMeasures how fast your investment builds wealth compared to traditional investments. Based on total return projections including exit value.\"\n          }\n        ]\n      },\n      {\n        section: \"Growth & Risk Projections\",\n        metrics: [\n          {\n            name: \"5-Year Exit Value Scenarios\",\n            formula: \"5-Year Exit Value Range = Year 5 EBITDA × Valuation Multiple × Your Ownership %\\n\\nProjects potential business sale value in 5 years under different market scenarios. Includes cumulative cash flows received during ownership period.\\n\\nAssumptions:\\n• Year 5 EBITDA (5% annual growth)\\n• Your Ownership percentage\\n• Multiple Range: 3.0x (recession) to 4.5x (growth market)\\n\\nTotal Return = Exit Value + 5-Year Cumulative Cash Flows\\n\\nConservative includes potential market downturns\\nExpected assumes current market conditions continue  \\nOptimistic reflects strong business performance and market growth\"\n          },\n          {\n            name: \"Stress Test Results\",\n            formula: \"Stress Test Results = ROI Under Adverse Scenarios\\n\\nTests investment performance under various economic stress conditions to assess downside protection and resilience.\\n\\nTest Scenarios:\\n• Revenue Decline: -20% from base case\\n• Margin Compression: -300 basis points EBITDA margin\\n• Interest Rate Rise: +200 basis points on variable debt\\n\\nMinimum ROI shows worst-case scenario performance\\nTarget: Maintain >7% ROI (market minimum) under stress\\n\\nStrong stress test results indicate robust investment with good downside protection\"\n          },\n          {\n            name: \"Growth Funding Capacity\",\n            formula: \"Growth Funding Capacity = Additional Sustainable Debt Capacity\\n\\nEstimates additional funding available for business growth, acquisitions, or expansion based on improved cash flows and debt capacity.\\n\\nCalculation Based On:\\n• Improved DSCR from business growth\\n• Conservative debt-to-EBITDA limits (<3.0x)\\n• Projected Year 3+ cash flow performance\\n\\nUses Include:\\n• Acquiring competitor businesses\\n• Major expansion projects  \\n• Equipment or technology investments\\n• Working capital for growth\\n\\nHigher capacity indicates strong scalability potential and strategic flexibility\"\n          }\n        ]\n      }\n    ];\n\n  // Auto-focus search input when popup opens\n  useEffect(() => {\n    if (showInfoPopup && searchInputRef.current) {\n      // Small delay to ensure the popup is fully rendered\n      setTimeout(() => {\n        searchInputRef.current?.focus();\n      }, 100);\n    }\n  }, [showInfoPopup]);\n\n\n\n\n\n  // Test calculation to verify formulas\n  const testCalculation = useCallback(() => {\n    const testScenario = {\n      targetRevenue: 2500000,\n      netProfitMargin: 25,\n      valuationMultiple: 4,\n      sbaLoanAmount: 1500000,\n      sellerFinancingAmount: 500000,\n      personalCash: 550000,\n      additionalInvestment: 100000\n    };\n    \n    const result = verifyCalculations(testScenario);\n    \n    // Verify results are in expected ranges\n    const { testScenario: calc, expectedRanges } = result;\n    \n    return result;\n  }, []);\n\n  // Run test calculation on component mount\n  useEffect(() => {\n    testCalculation();\n  }, [testCalculation]);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"w-full px-6\">\n          <div className=\"flex justify-between items-center py-4\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Business Acquisition Calculator</h1>\n              <p className=\"text-sm text-gray-600 mt-1\">Interactive tool for evaluating acquisition scenarios</p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => setShowInfoPopup(true)}\n                className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <Info className=\"w-4 h-4\" />\n                Info\n              </button>\n              <button className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\">\n                <Download className=\"w-4 h-4\" />\n                Export\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Two Panel Layout */}\n      <div className=\"flex h-screen\">\n        {/* Left Panel - Controls */}\n        <div className=\"w-1/3 bg-gray-50 p-6 overflow-y-auto\">\n          {/* Funding Sources Configuration */}\n          <div className=\"mb-8\">\n            <div className=\"mb-4\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Funding Sources Configuration</h2>\n            </div>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {Object.entries(fundingSources).filter(([key, source]) => key !== 'sbaLoan' && key !== 'sellerFinancing').map(([key, source]) => (\n                <div key={key} className=\"card p-3\">\n                  <div className=\"mb-1\">\n                    <div className=\"flex items-center gap-1\">\n                      <h3 className=\"text-sm font-semibold text-gray-900\">\n                        {key === 'houseEquity' ? 'Home Equity' : \n                         key === 'sbaLoan' ? 'SBA Loan' : \n                         key === 'personalCash' ? 'Personal Cash' :\n                         key === 'additionalInvestment' ? 'Additional Investment' :\n                         key === 'taiwaneseLoan' ? 'Taiwanese Loan' :\n                         key.replace(/([A-Z])/g, ' $1').trim()}\n                      </h3>\n                      <InfoTooltip formula={source.description}>\n                        <Info className=\"w-3 h-3 text-gray-400 hover:text-gray-600\" />\n                      </InfoTooltip>\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-1\">\n                    {/* Current Value Display */}\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <span className=\"text-xs font-medium text-gray-700\">Current: </span>\n                        <span className=\"text-sm font-semibold text-gray-900\">\n                          {formatCurrency(source.amount)}\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <CustomSlider\n                        value={source.amount}\n                        onChange={(value) => handleFundingSourceChange(key, 'amount', value)}\n                        min={0}\n                        max={key === 'taiwaneseLoan' || key === 'houseEquity' ? 300000 : \n                             key === 'additionalInvestment' || key === 'personalCash' ? 100000 : 1000000}\n                        step={25000}\n                        unit=\"$\"\n                        color=\"blue\"\n                        showTooltip={false}\n                      />\n                    </div>\n                    \n                    {source.type === 'debt' && (\n                      <div className=\"grid grid-cols-2 gap-1 text-xs\">\n                        <div className=\"text-gray-500\">Rate: {(source.rate * 100).toFixed(1)}% (after tax {key === 'houseEquity' ? (source.rate * 100).toFixed(1) : (source.rate * 0.75 * 100).toFixed(1)}%)</div>\n                        <div className=\"text-gray-500\">Term: {source.term} years</div>\n                      </div>\n                    )}\n                    \n\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n\n          </div>\n\n          {/* Variable Controls */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Variable Controls</h2>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {Object.entries(VARIABLES).map(([key, variable]) => (\n                <VariableCard\n                  key={key}\n                  variableKey={key}\n                  variable={variable}\n                  value={variables[key]}\n                  onValueChange={(value) => handleVariableChange(key, value)}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Results */}\n        <div className=\"w-2/3 bg-white p-6 overflow-y-auto\">\n\n          {/* Scenario Comparison */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Scenario Comparison</h2>\n            <div className=\"grid lg:grid-cols-4 gap-4\">\n              {keyParameters.map((scenario, index) => {\n                return (\n                  <div key={index} className=\"border border-gray-200 rounded p-4\">\n                    <div className=\"text-center mb-3\">\n                      <h3 className=\"text-sm text-gray-600\">\n                        {index === 3 ? \"Custom Target Annual Revenue:\" : \"Target Annual Revenue:\"}\n                      </h3>\n                      {index === 3 ? (\n                        <div className=\"flex items-center justify-center gap-2\">\n                          <span className=\"text-sm text-gray-600\">$</span>\n                          <input\n                            type=\"text\"\n                            value={customTargetRevenue.toLocaleString()}\n                            onChange={(e) => {\n                              const value = parseInt(e.target.value.replace(/[^0-9]/g, '')) || 0;\n                              setCustomTargetRevenue(value);\n                            }}\n                            onBlur={(e) => {\n                              const value = parseInt(e.target.value.replace(/[^0-9]/g, '')) || 0;\n                              setCustomTargetRevenue(value);\n                            }}\n                            className=\"text-lg font-bold text-gray-900 bg-transparent border-none outline-none text-center w-32 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded\"\n                            placeholder=\"3,500,000\"\n                            min=\"100000\"\n                            max=\"10000000\"\n                          />\n                        </div>\n                      ) : (\n                        <p className=\"text-lg font-bold text-gray-900\">{formatCurrency(scenario.targetRevenue)}</p>\n                      )}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <div className=\"p-2 bg-purple-50 rounded-lg border border-purple-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Purchase Price = Target Revenue × Net Profit Margin % × Valuation Multiple\\n\\nExample: $2,000,000 × 20.7% × 4.1x = $1,697,400\">\n                            <span className=\"text-xs font-medium text-purple-800\">Purchase Price</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-purple-900 text-center\">\n                          {formatCurrency(scenario.purchasePrice)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-orange-50 rounded-lg border border-orange-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"SBA Down Payment = (Purchase Price - Seller Financing Amount) × SBA Down Payment %\\n\\nExample: ($1,697,400 - $274,979) × 13% = $184,915\\n\\nThis is the minimum cash required for the SBA loan portion only.\">\n                            <span className=\"text-xs font-medium text-orange-800\">SBA Down Payment</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-orange-900 text-center\">\n                          {formatCurrency(scenario.sbaDownPayment)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-blue-50 rounded-lg border border-blue-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\n\\nIncludes:\\n• SBA Down Payment\\n• Working Capital (7.9% of revenue)\\n• Due Diligence & Professional Fees (2.5% of purchase price)\\n\\nThis is the total cash required for the acquisition.\">\n                            <span className=\"text-xs font-medium text-blue-800\">Down Payment Needed</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-blue-900 text-center\">\n                          {formatCurrency(scenario.downPaymentNeeded)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-yellow-50 rounded-lg border border-yellow-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Available Cash = Sum of all enabled funding sources:\\n\\n• Taiwanese Loan: $725,000 (2.8%)\\n• Personal Cash: $550,000 (8.0%)\\n• Additional Investment: $100,000 (15.0%)\\n• Home Equity: $200,000 (8.0%)\\n\\nThis represents your total accessible capital for the acquisition.\">\n                            <span className=\"text-xs font-medium text-yellow-800\">Available Cash</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-yellow-900 text-center\">\n                          {formatCurrency(scenario.availableCash)}\n                        </p>\n                      </div>\n                      \n                      <div className={`p-2 rounded-lg border ${\n                        scenario.cashSurplusDeficit >= 0 ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'\n                      }`}>\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\n\\nPositive (Green): You have sufficient cash for the acquisition\\nNegative (Red): You need additional funding or must reduce acquisition costs\\n\\nThis determines if the deal is financially feasible with your current resources.\">\n                            <span className={`text-xs font-medium ${scenario.cashSurplusDeficit >= 0 ? 'text-green-800' : 'text-red-800'}`}>\n                              Cash Surplus/Deficit\n                            </span>\n                          </InfoTooltip>\n                        </div>\n                        <p className={`text-sm font-bold text-center ${scenario.cashSurplusDeficit >= 0 ? 'text-green-900' : 'text-red-900'}`}>\n                          {formatCurrency(scenario.cashSurplusDeficit)}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Deal Structure & Financing Display */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Deal Structure & Financing</h2>\n            <div className=\"grid lg:grid-cols-4 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"space-y-3\">\n\n                    \n                    <div>\n                      <h4 className=\"text-xs font-bold text-gray-700 mb-2\">Funding Allocation</h4>\n                      <div className=\"space-y-1 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Taiwanese Loan:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.taiwaneseLoan || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Personal Cash:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.personalCash || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Additional Investment:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.additionalInvestment || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Seller Financing:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.sellerFinancing || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Home Equity:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.houseEquity || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>SBA Loan:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.sbaLoan || 0)}</span>\n                        </div>\n                        <div className=\"border-t pt-1 mt-1\">\n                          <div className=\"flex justify-between\">\n                            <span>Total Allocated:</span>\n                            <span>{formatCurrency(scenario.fundingAllocation?.totalAllocated || 0)}</span>\n                          </div>\n                          {scenario.fundingAllocation?.downPaymentGap > 0 && (\n                            <div className=\"flex justify-between text-red-600\">\n                              <span>Funding Gap:</span>\n                              <span>{formatCurrency(scenario.fundingAllocation.downPaymentGap)}</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"text-xs font-bold text-gray-700 mb-2\">Financing Summary</h4>\n                      <div className=\"space-y-1 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"WACC = Weighted Average Cost of Capital\\nIncludes ALL funding sources with after-tax rates:\\n• Taiwanese Loan: 2.1% after-tax\\n• Personal Cash: 6% after-tax\\n• Additional Investment: 15%\\n• Seller Financing: 6% after-tax\\n• Home Equity: 8%\\n• SBA Loan: 8.6% after-tax\">\n                            <span>WACC:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{(scenario.wacc || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Your Personal Cost of Capital\\nWeighted average of your personal funding sources:\\n• Taiwanese Loan: 2.8%\\n• Personal Cash: 8% (opportunity cost)\\n• Home Equity: 8%\">\n                            <span>Your Personal Cost:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{(scenario.personalCostOfCapital || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\">\n                            <span>Your Ownership:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{((scenario.ownershipPercentage || 0) * 100).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Investor Ownership:</span>\n                          <span className=\"font-medium\">{((scenario.investorOwnership || 0) * 100).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          Based on risk-adjusted contributions (Taiwanese Loan: 80%, Home Equity: 120%, Personal Cash: 100%). Control premium and sweat equity not considered.\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\">\n                            <span>Monthly Business Debt Payment:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{formatCurrency((scenario.businessDebtService.totalBusinessDebtService / 12))}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\">\n                            <span>Monthly Personal Debt Payment:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{formatCurrency((scenario.personalDebtService.totalPersonalDebtService / 12))}</span>\n                        </div>\n                        \n                        {/* NEW METRICS - Section 1 */}\n                        <div className=\"border-t pt-2 mt-2\">\n                          <div className=\"flex justify-between\">\n                            <InfoTooltip formula=\"Capital Utilization Rate = Total Allocated Funding ÷ Available Cash × 100\\n\\nMeasures percentage of available funding deployed in the deal. Lower utilization provides safety margin for unexpected costs.\\n\\nExample: $516K allocated ÷ $750K available = 69%\\n\\nStandards:\\n🔴 Critical: >95% (Minimal safety margin)\\n🟡 Below Target: 85-95% (Limited flexibility)  \\n🟢 Good: 65-85% (Balanced deployment)\\n🔵 Excellent: <65% (High safety margin)\">\n                              <span>Capital Utilization:</span>\n                            </InfoTooltip>\n                            <span className={`font-medium ${getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color === '#E74C3C' ? 'text-red-600' : getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color === '#F1C40F' ? 'text-yellow-500' : getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                              {(scenario.capitalUtilizationRate || 0).toFixed(1)}%\n                            </span>\n                          </div>\n                          <div className=\"text-[10px] text-gray-600 mt-1\">\n                            <span className=\"font-medium\">Standard:</span> Critical &gt;95% | Below Target 85-95% | Good 65-85% | Excellent &lt;65%\n                          </div>\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\\n\\nShows how effectively you're using leverage to amplify investment capacity. Higher multipliers indicate better capital efficiency.\\n\\nExample: $516K total investment ÷ $50K personal cash = 10.3x\\n\\nStandards:\\n🔴 Critical: <3x (Inefficient capital use)\\n🟡 Below Target: 3-5x (Limited leverage)\\n🟢 Good: 5-8x (Balanced leverage)\\n🔵 Excellent: >8x (High capital efficiency)\">\n                            <span>Leverage Multiplier:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getLeverageMultiplierStatus(scenario.leverageMultiplier).color === '#E74C3C' ? 'text-red-600' : getLeverageMultiplierStatus(scenario.leverageMultiplier).color === '#F1C40F' ? 'text-yellow-500' : getLeverageMultiplierStatus(scenario.leverageMultiplier).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.leverageMultiplier || 0).toFixed(1)}x\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;3x | Below Target 3-5x | Good 5-8x | Excellent &gt;8x\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Price-to-Revenue = Purchase Price ÷ Target Annual Revenue\\n\\nMeasures deal efficiency relative to business size. Lower ratios indicate better value deals.\\n\\nExample: $2,147,000 purchase price ÷ $2,500,000 revenue = 0.86x\\n\\nStandards:\\n🔴 Critical: >1.2x (Expensive relative to revenue)\\n🟡 Below Target: 1.0-1.2x (Fair market pricing)\\n🟢 Good: 0.8-1.0x (Good value)\\n🔵 Excellent: <0.8x (Excellent value)\">\n                            <span>Price-to-Revenue:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getPriceToRevenueStatus(scenario.priceToRevenueRatio).color === '#E74C3C' ? 'text-red-600' : getPriceToRevenueStatus(scenario.priceToRevenueRatio).color === '#F1C40F' ? 'text-yellow-500' : getPriceToRevenueStatus(scenario.priceToRevenueRatio).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.priceToRevenueRatio || 0).toFixed(2)}x\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &gt;1.2x | Below Target 1.0-1.2x | Good 0.8-1.0x | Excellent &lt;0.8x\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Business Health Metrics */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Business Health Metrics</h2>\n            <div className=\"grid lg:grid-cols-4 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"space-y-2 text-xs\">\n                    <div className=\"flex justify-between\">\n                      <span>Business Revenue:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.targetRevenue)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Business EBITDA:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.ebitda)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\nSBA: 11.5% rate, 10-year term\\nSeller: 8% rate, 5-year term\">\n                        <span>Business Debt Service:</span>\n                      </InfoTooltip>\n                      <span className=\"font-medium\">{formatCurrency(scenario.businessDebtService.totalBusinessDebtService)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Business Free Cash Flow:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.businessFreeCashFlow)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Economic Value Added = NOPAT - Capital Charge\\nNOPAT = EBITDA × (1 - Tax Rate)\\nCapital Charge = Business Capital Invested × WACC\">\n                        <span>Economic Value Added:</span>\n                      </InfoTooltip>\n                      <span className=\"font-medium\">\n                        {formatCurrency(scenario.businessEVA)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\">\n                        <span>Business DSCR:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${scenario.businessDSCR < 1.25 ? 'text-red-600' : scenario.businessDSCR < 1.5 ? 'text-yellow-500' : scenario.businessDSCR < 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.businessDSCR || 0).toFixed(2)}x\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;1.25x | Below Target 1.25-1.5x | Good 1.5-2.0x | Excellent &gt;2.0x\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business ROA = (Business Free Cash Flow / Business Capital Invested) × 100\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\">\n                        <span>Business ROA:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 3 ? 'text-red-600' : ((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 6 ? 'text-yellow-500' : ((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 10 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;3% | Below Target 3-6% | Good 6-10% | Excellent &gt;10%\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Debt-to-EBITDA Ratio = Total Business Debt ÷ EBITDA\">\n                        <span>Debt-to-EBITDA Ratio:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 4.0 ? 'text-red-600' : ((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 3.0 ? 'text-yellow-500' : ((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(() => {\n                          const sbaLoan = scenario.fundingAllocation.allocation.sbaLoan || 0;\n                          const sellerFinancing = scenario.fundingAllocation.allocation.sellerFinancing || 0;\n                          const totalBusinessDebt = sbaLoan + sellerFinancing;\n                          const debtToEbitdaRatio = totalBusinessDebt / scenario.ebitda;\n                          \n                          return debtToEbitdaRatio.toFixed(1) + 'x';\n                        })()}\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &gt;4.0x | Below Target 3.0-4.0x | Good 2.0-3.0x | Excellent &lt;2.0x\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Interest Coverage Ratio = EBITDA ÷ Interest Payments\">\n                        <span>Interest Coverage Ratio:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${(scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 1.5 ? 'text-red-600' : (scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 2.5 ? 'text-yellow-500' : (scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 3.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(() => {\n                          const sbaLoan = scenario.fundingAllocation.allocation.sbaLoan || 0;\n                          const sellerFinancing = scenario.fundingAllocation.allocation.sellerFinancing || 0;\n                          const sbaInterest = sbaLoan * 0.115;\n                          const sellerInterest = sellerFinancing * 0.08;\n                          const totalInterest = sbaInterest + sellerInterest;\n                          const interestCoverageRatio = totalInterest > 0 ? scenario.ebitda / totalInterest : Infinity;\n                          \n                          return interestCoverageRatio.toFixed(1) + 'x';\n                        })()}\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;1.5x | Below Target 1.5-2.5x | Good 2.5-3.0x | Excellent &gt;3.0x\n                    </div>\n                    \n                    {/* NEW METRICS - Section 2 */}\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"EBITDA Margin = Business EBITDA ÷ Business Revenue × 100\\n\\nMeasures operational profitability before financing and tax effects. Higher margins indicate more efficient operations and pricing power.\\n\\nExample: $565K EBITDA ÷ $2,500K revenue = 22.6%\\n\\nStandards:\\n🔴 Critical: &lt;15% (Poor profitability)\\n🟡 Below Target: 15-18% (Below average)\\n🟢 Good: 18-22% (Solid profitability)\\n🔵 Excellent: &gt;22% (Strong profitability)\">\n                        <span>EBITDA Margin:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${getEBITDAMarginStatus(scenario.ebitdaMargin).color === '#E74C3C' ? 'text-red-600' : getEBITDAMarginStatus(scenario.ebitdaMargin).color === '#F1C40F' ? 'text-yellow-500' : getEBITDAMarginStatus(scenario.ebitdaMargin).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.ebitdaMargin || 0).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;15% | Below Target 15-18% | Good 18-22% | Excellent &gt;22%\n                    </div>\n                    \n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business Cash Conversion = Business Free Cash Flow ÷ Business EBITDA × 100\\n\\nShows how efficiently EBITDA converts to actual cash flow. Higher conversion indicates better working capital management and cash generation.\\n\\nExample: $157K FCF ÷ $565K EBITDA = 28%\\n\\nStandards:\\n🔴 Critical: &lt;15% (Poor cash conversion)\\n🟡 Below Target: 15-20% (Below average)\\n🟢 Good: 20-30% (Solid conversion)\\n🔵 Excellent: &gt;30% (Strong cash generation)\">\n                        <span>Cash Conversion:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${getCashConversionStatus(scenario.businessCashConversion).color === '#E74C3C' ? 'text-red-600' : getCashConversionStatus(scenario.businessCashConversion).color === '#F1C40F' ? 'text-yellow-500' : getCashConversionStatus(scenario.businessCashConversion).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.businessCashConversion || 0).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;15% | Below Target 15-20% | Good 20-30% | Excellent &gt;30%\n                    </div>\n                    \n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Revenue-to-Investment Efficiency = Target Revenue ÷ Your Total Investment\\n\\nMeasures business scale relative to capital deployed. Higher ratios indicate more efficient capital deployment and larger business scale per dollar invested.\\n\\nExample: $2,500K revenue ÷ $516K investment = 4.8x\\n\\nStandards:\\n🔴 Critical: &lt;3x (Inefficient scale)\\n🟡 Below Target: 3-4x (Below average)\\n🟢 Good: 4-6x (Good efficiency)\\n🔵 Excellent: &gt;6x (High efficiency)\">\n                        <span>Revenue Multiple:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color === '#E74C3C' ? 'text-red-600' : getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color === '#F1C40F' ? 'text-yellow-500' : getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.revenueToInvestmentEfficiency || 0).toFixed(1)}x\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;3x | Below Target 3-4x | Good 4-6x | Excellent &gt;6x\n                    </div>\n\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Personal Investment Returns */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">Personal Investment Returns</h2>\n            <div className=\"grid lg:grid-cols-4 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    {/* Business Burden/Gain */}\n                    <div className=\"business-analysis\">\n                      <h3 className=\"text-xs font-bold text-gray-700 mb-2\">Business Level</h3>\n                      <div className=\"space-y-2 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Revenue Burden:</span>\n                          <span>{formatCurrency(scenario.targetRevenue)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Operating Costs:</span>\n                          <span>-{formatCurrency(scenario.targetRevenue - scenario.ebitda)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Business Debt Service:</span>\n                          <span>-{formatCurrency(scenario.businessDebtService.totalBusinessDebtService)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Management Costs:</span>\n                          <span>-{formatCurrency(variables.managementSalary)}</span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-2 font-medium\">\n                          <span>Business Net Gain:</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(scenario.businessFreeCashFlow)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Personal Burden/Gain */}\n                    <div className=\"personal-analysis\">\n                      <h3 className=\"text-xs font-bold text-gray-700 mb-2\">Personal Level</h3>\n                      <div className=\"space-y-2 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Personal Investment:</span>\n                          <span>-{formatCurrency(scenario.personalCashInvested)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Business Distribution:</span>\n                          <span>+{formatCurrency(scenario.ownerDistribution)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Personal Debt Service:</span>\n                          <span>-{formatCurrency(scenario.personalDebtService.totalPersonalDebtService)}</span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-2 font-medium\">\n                          <span>Your Net Annual Gain:</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(scenario.personalCashFlow)}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Your ROI = (Your Net Annual Gain ÷ Your Total Cash Invested) × 100\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\">\n                            <span>Your ROI:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${scenario.personalROI < 7 ? 'text-red-600' : scenario.personalROI < 12 ? 'text-yellow-500' : scenario.personalROI < 20 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {scenario.personalROI.toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;7% | Below Target 7-12% | Good 12-20% | Excellent &gt;20%\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Cash-on-Cash Return = Annual Cash Flow ÷ Your Cash Invested\">\n                            <span>Cash-on-Cash Return:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${(scenario.personalCashFlow / scenario.personalCashInvested * 100) < 8 ? 'text-red-600' : (scenario.personalCashFlow / scenario.personalCashInvested * 100) < 12 ? 'text-yellow-500' : (scenario.personalCashFlow / scenario.personalCashInvested * 100) < 20 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.personalCashFlow / scenario.personalCashInvested * 100).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;8% | Below Target 8-12% | Good 12-20% | Excellent &gt;20%\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Payback Period = Your Total Investment ÷ Your Net Annual Gain\">\n                            <span>Payback Period:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${(scenario.personalCashInvested / scenario.personalCashFlow) > 8 ? 'text-red-600' : (scenario.personalCashInvested / scenario.personalCashFlow) > 5 ? 'text-yellow-500' : (scenario.personalCashInvested / scenario.personalCashFlow) > 3 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.personalCashInvested / scenario.personalCashFlow).toFixed(1)} years\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &gt;8 years | Below Target 5-8 years | Good 3-5 years | Excellent &lt;3 years\n                        </div>\n                        \n                        {/* NEW METRICS - Section 3 */}\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\\n\\nMeasures return per unit of risk taken. Higher ratios indicate better risk-adjusted performance compared to safer alternatives.\\n\\nExample: (14.8% ROI - 4.5% treasury) ÷ 4.9 risk score = 2.1\\n\\nRisk Score Components: Leverage, concentration, industry, execution risk\\n\\nStandards:\\n🔴 Critical: &lt;0.5 (Poor risk compensation)\\n🟡 Below Target: 0.5-1.0 (Fair risk-return)\\n🟢 Good: 1.0-1.5 (Good risk-return)\\n🔵 Excellent: &gt;1.5 (Strong risk-return)\">\n                            <span>Risk-Adjusted Return:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getRiskAdjustedStatus(scenario.riskAdjustedReturn).color === '#E74C3C' ? 'text-red-600' : getRiskAdjustedStatus(scenario.riskAdjustedReturn).color === '#F1C40F' ? 'text-yellow-500' : getRiskAdjustedStatus(scenario.riskAdjustedReturn).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.riskAdjustedReturn || 0).toFixed(1)}\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;0.5 | Below Target 0.5-1.0 | Good 1.0-1.5 | Excellent &gt;1.5\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Income Replacement Ratio = Your Net Annual Gain ÷ Current Salary × 100\\n\\nShows percentage of current employment income replaced by business cash flows. Higher ratios indicate faster path to financial independence.\\n\\nExample: $76K business income ÷ $100K salary = 76%\\n\\nTimeline: Year 1: 76% | Year 3: 132% (full replacement + growth)\\n\\nStandards:\\n🔴 Critical: &lt;40% (Cannot replace income)\\n🟡 Below Target: 40-80% (Partial replacement)\\n🟢 Good: 80-120% (Near full replacement)\\n🔵 Excellent: &gt;120% (Income enhancement)\">\n                            <span>W-2 Replacement:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getIncomeReplacementStatus(scenario.incomeReplacementRatio).color === '#E74C3C' ? 'text-red-600' : getIncomeReplacementStatus(scenario.incomeReplacementRatio).color === '#F1C40F' ? 'text-yellow-500' : getIncomeReplacementStatus(scenario.incomeReplacementRatio).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.incomeReplacementRatio || 0).toFixed(0)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;40% | Below Target 40-80% | Good 80-120% | Excellent &gt;120%\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Wealth Building Velocity = Annual Wealth Creation Rate\\n\\nMeasures how fast your investment builds wealth compared to traditional investments. Based on total return projections including cash flows and equity appreciation.\\n\\nExample: 5.0x total return over 5 years = 100%+ annual wealth creation\\n\\nComparison: S&P 500 ~10% | Real Estate ~15% | This Investment ~100%+\\n\\nStandards:\\n🔴 Critical: &lt;20% (Below market alternatives)\\n🟡 Below Target: 20-40% (Market competitive)\\n🟢 Good: 40-80% (Above market)\\n🔵 Excellent: &gt;80% (Exceptional wealth building)\">\n                            <span>Wealth Velocity:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getWealthVelocityStatus(scenario.wealthBuildingVelocity).color === '#E74C3C' ? 'text-red-600' : getWealthVelocityStatus(scenario.wealthBuildingVelocity).color === '#F1C40F' ? 'text-yellow-500' : getWealthVelocityStatus(scenario.wealthBuildingVelocity).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.wealthBuildingVelocity || 0).toFixed(0)}%+\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;20% | Below Target 20-40% | Good 40-80% | Excellent &gt;80%\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n\n\n          {/* Growth & Risk Projections */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Growth & Risk Projections</h2>\n            <div className=\"grid lg:grid-cols-4 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <table className=\"w-full text-xs\">\n                    <thead>\n                      <tr className=\"border-b\">\n                        <th className=\"text-left py-1\">Year</th>\n                        <th className=\"text-right py-1\">Business FCF</th>\n                        <th className=\"text-right py-1\">Your Distribution</th>\n                        <th className=\"text-right py-1\">Your Net FCF</th>\n                        <th className=\"text-right py-1\">DSCR</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {scenario.projections.map((year, yearIndex) => {\n                        // Calculate business FCF for this year\n                        const yearEBITDA = year.ebitda;\n                        const yearBusinessFCF = yearEBITDA - scenario.businessDebtService.totalBusinessDebtService - variables.managementSalary - (variables.techInvestment / 3);\n                        const yearOwnerDistribution = yearBusinessFCF * scenario.ownership.yourOwnership;\n                        const yearYourFCF = yearOwnerDistribution - scenario.personalDebtService.totalPersonalDebtService;\n                        const yearDSCR = scenario.businessDebtService.totalBusinessDebtService > 0 ? yearEBITDA / scenario.businessDebtService.totalBusinessDebtService : 0;\n                        \n                        return (\n                          <tr key={yearIndex}>\n                            <td className=\"py-1\">{year.year}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearBusinessFCF)}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearOwnerDistribution)}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearYourFCF)}</td>\n                            <td className={`text-right py-1 ${yearDSCR < 1.25 ? 'text-red-600' : yearDSCR < 1.5 ? 'text-yellow-500' : yearDSCR < 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                              {yearDSCR.toFixed(2)}x\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  \n                  {/* NEW METRICS - Section 4 */}\n                  <div className=\"mt-4 space-y-3 text-xs\">\n                    <div>\n                      <h4 className=\"font-bold text-gray-700 mb-2\">5-Year Exit Value Scenarios:</h4>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span>Conservative:</span>\n                          <span>{formatCurrency(scenario.exitValueRange?.conservative || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Expected:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.exitValueRange?.expected || 0)} 🎯</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Optimistic:</span>\n                          <span>{formatCurrency(scenario.exitValueRange?.optimistic || 0)}</span>\n                        </div>\n                      </div>\n                      <div className=\"text-[10px] text-gray-600 mt-1\">\n                        <InfoTooltip formula=\"5-Year Exit Value Range = Year 5 EBITDA × Valuation Multiple × Your Ownership %\\n\\nProjects potential business sale value in 5 years under different market scenarios. Includes cumulative cash flows received during ownership period.\\n\\nAssumptions:\\n• Year 5 EBITDA: $721K (5% annual growth)\\n• Your Ownership: 83%\\n• Multiple Range: 3.0x (recession) to 4.5x (growth market)\\n\\nTotal Return = Exit Value + 5-Year Cumulative Cash Flows\\n\\nConservative includes potential market downturns\\nExpected assumes current market conditions continue  \\nOptimistic reflects strong business performance and market growth\">\n                          <span>Based on Year 5 EBITDA projections and market multiples</span>\n                        </InfoTooltip>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"font-bold text-gray-700 mb-2\">Stress Test Results:</h4>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span>Revenue -20%:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.revenueStressROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.revenueStressROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.revenueStressROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            ROI = {(scenario.stressTestResults?.revenueStressROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Margin -300bp:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.marginStressROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.marginStressROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.marginStressROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            ROI = {(scenario.stressTestResults?.marginStressROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Interest +200bp:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.rateStressROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.rateStressROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.rateStressROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            ROI = {(scenario.stressTestResults?.rateStressROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-1\">\n                          <span>Minimum Scenario:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.minROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.minROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.minROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.stressTestResults?.minROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"text-[10px] text-gray-600 mt-1\">\n                        <InfoTooltip formula=\"Stress Test Results = ROI Under Adverse Scenarios\\n\\nTests investment performance under various economic stress conditions to assess downside protection and resilience.\\n\\nTest Scenarios:\\n• Revenue Decline: -20% from base case\\n• Margin Compression: -300 basis points EBITDA margin\\n• Interest Rate Rise: +200 basis points on variable debt\\n\\nMinimum ROI shows worst-case scenario performance\\nTarget: Maintain &gt;7% ROI (market minimum) under stress\\n\\nStrong stress test results indicate robust investment with good downside protection\">\n                          <span>Target: Maintain &gt;7% ROI under stress</span>\n                        </InfoTooltip>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"font-bold text-gray-700 mb-2\">Growth Funding Capacity:</h4>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span>Available Capacity:</span>\n                          <span className={`font-medium ${getGrowthCapacityStatus(scenario.growthFundingCapacity).color === '#E74C3C' ? 'text-red-600' : getGrowthCapacityStatus(scenario.growthFundingCapacity).color === '#F1C40F' ? 'text-yellow-500' : getGrowthCapacityStatus(scenario.growthFundingCapacity).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {formatCurrency(scenario.growthFundingCapacity || 0)}\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600\">\n                          <InfoTooltip formula=\"Growth Funding Capacity = Additional Sustainable Debt Capacity\\n\\nEstimates additional funding available for business growth, acquisitions, or expansion based on improved cash flows and debt capacity.\\n\\nCalculation Based On:\\n• Improved DSCR from business growth\\n• Conservative debt-to-EBITDA limits (&lt;3.0x)\\n• Projected Year 3+ cash flow performance\\n\\nUses Include:\\n• Acquiring competitor businesses\\n• Major expansion projects  \\n• Equipment or technology investments\\n• Working capital for growth\\n\\nHigher capacity indicates strong scalability potential and strategic flexibility\">\n                          <span>Available for: Acquisition or expansion</span>\n                        </InfoTooltip>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n\n        </div>\n      </div>\n      \n      {/* Info Popup */}\n      {showInfoPopup && (\n        <InfoPopup \n          showInfoPopup={showInfoPopup}\n          setShowInfoPopup={setShowInfoPopup}\n          searchTerm={searchTerm}\n          setSearchTerm={setSearchTerm}\n          searchInputRef={searchInputRef}\n          allMetricsData={allMetricsData}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}