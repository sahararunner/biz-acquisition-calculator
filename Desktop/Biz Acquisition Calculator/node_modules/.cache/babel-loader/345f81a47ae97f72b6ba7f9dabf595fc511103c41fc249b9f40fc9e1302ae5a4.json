{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback}from'react';import{Download,Settings,Info}from'lucide-react';import VariableCard from'./components/VariableCard';import CustomSlider from'./components/CustomSlider';import{VARIABLES,DEFAULT_SCENARIO}from'./utils/variables';import{calculateTotalCashRequired,calculateAnnualCashToPocket,calculateDSCR,calculateCashOnCashReturn,calculateEnhancedRiskScore,calculateIRR,calculateMOIC,calculatePaybackPeriod,calculateFiveYearProjections,calculateRiskAdjustedOwnership,calculateBusinessWACC,calculateBusinessEVA,verifyCalculations,calculateScenariosWithPriority,calculateTotalCashNeeded,allocateFundingByPriority,calculatePurchasePriceFinancing,calculateBusinessDebtService,calculatePersonalDebtService,calculatePriorityBasedWACC,calculatePriorityBasedOwnership,// New metrics calculations\ncalculateCapitalUtilizationRate,getCapitalUtilizationStatus,calculateLeverageMultiplier,getLeverageMultiplierStatus,calculatePriceToRevenueRatio,getPriceToRevenueStatus,calculateEBITDAMargin,getEBITDAMarginStatus,calculateBusinessCashConversion,getCashConversionStatus,calculateRevenueToInvestmentEfficiency,getRevenueEfficiencyStatus,calculateRiskAdjustedReturn,getRiskAdjustedStatus,calculateIncomeReplacementRatio,getIncomeReplacementStatus,calculateWealthBuildingVelocity,getWealthVelocityStatus,calculateExitValueRange,calculateStressTestResults,getStressTestStatus,calculateGrowthFundingCapacity,getGrowthCapacityStatus,// Debug logging functions\nDEBUG_METRICS,logMetricCalculation,logAllMetricsSummary}from'./utils/calculations';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{// NEW FUNDING SOURCES STATE\nconst[fundingSources,setFundingSources]=useState(()=>{const saved=localStorage.getItem('fundingSources');return saved?JSON.parse(saved):{taiwaneseLoan:{amount:300000,rate:0.028,term:10,enabled:true,type:'debt',description:'USD loan from Taiwan'},houseEquity:{amount:98273,rate:0.08,term:15,enabled:true,type:'debt',description:'Home equity loan (tax deductible for business use)'},sbaLoan:{amount:0,rate:0.115,term:10,enabled:false,type:'debt',description:'SBA 7(a) business acquisition loan'},sellerFinancing:{amount:0,rate:0.08,term:5,enabled:false,type:'debt',description:'Seller note (subordinated)'},additionalInvestment:{amount:50000,expectedReturn:0.15,enabled:true,type:'equity',description:'Outside investor equity (dilutes ownership)'},personalCash:{amount:50000,opportunityCost:0.08,enabled:true,type:'equity',description:'Personal cash investment'}};});const[variables,setVariables]=useState(()=>{const saved=localStorage.getItem('variables');const savedVariables=saved?JSON.parse(saved):DEFAULT_SCENARIO.variables;// Ensure new variables are present (for backward compatibility)\nreturn{...DEFAULT_SCENARIO.variables,...savedVariables};});// Save state to localStorage whenever it changes\nuseEffect(()=>{localStorage.setItem('fundingSources',JSON.stringify(fundingSources));},[fundingSources]);useEffect(()=>{localStorage.setItem('variables',JSON.stringify(variables));},[variables]);// Validation function to catch calculation errors - MUST BE DEFINED BEFORE ANY USEMEMO\nconst validateScenario=scenario=>{const errors=[];if(isNaN(scenario.targetRevenue)||scenario.targetRevenue<=0){errors.push('Business revenue is invalid');}if(isNaN(scenario.ebitda)||scenario.ebitda<=0){errors.push('EBITDA calculation is invalid');}if(isNaN(scenario.purchasePrice)||scenario.purchasePrice<=0){errors.push('Purchase price calculation is invalid');}if(scenario.wacc>50){errors.push(`WACC too high: ${scenario.wacc}% (should be 7-12%)`);}if(scenario.downPaymentNeeded<scenario.purchasePrice*0.15){errors.push('Down payment unrealistically low');}if(errors.length>0){console.error('❌ Calculation Errors:',errors);}else{}return errors;};// NEW CALCULATION FUNCTIONS\n// Calculate monthly payment for any loan\nconst calculateLoanPayment=(principal,rate,termYears)=>{if(principal<=0||rate<=0)return 0;const monthlyRate=rate/12;const payments=termYears*12;return principal*monthlyRate*Math.pow(1+monthlyRate,payments)/(Math.pow(1+monthlyRate,payments)-1)*12;// Return annual payment\n};// Fix WACC calculation - use decimal rates, not percentages!\nconst calculateWACC=function(fundingSources){let taxRate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.25;let totalCapital=0;let weightedCost=0;// Include only enabled funding sources with amounts\nObject.entries(fundingSources).forEach(_ref=>{let[key,source]=_ref;if(source.enabled&&source.amount>0){totalCapital+=source.amount;// CRITICAL: Use decimal rates, not percentages!\nlet costRate;if(key==='taiwaneseLoan')costRate=0.028;// 2.8% (personal loan)\nelse if(key==='houseEquity')costRate=0.08;// 8% (personal loan)\nelse if(key==='sbaLoan')costRate=0.115*(1-taxRate);// 11.5% after tax (business deductible)\nelse if(key==='sellerFinancing')costRate=0.08*(1-taxRate*0.5);// 8% after partial tax (less deductible)\nelse if(key==='additionalInvestment')costRate=0.20;// 20% equity cost (investor expected return)\nelse if(key==='personalCash')costRate=0.08;// 8% opportunity cost\nelse costRate=0.08;// Default\nweightedCost+=source.amount*costRate;}});const wacc=totalCapital>0?weightedCost/totalCapital:0;return wacc*100;// Convert to percentage for display\n};// Calculate key parameters for three scenarios\nconst keyParameters=useMemo(()=>{// Fix available cash calculation to only include specific funding sources\nconst totalAvailableCash=(fundingSources.taiwaneseLoan.enabled?fundingSources.taiwaneseLoan.amount:0)+(fundingSources.houseEquity.enabled?fundingSources.houseEquity.amount:0)+(fundingSources.additionalInvestment.enabled?fundingSources.additionalInvestment.amount:0)+(fundingSources.personalCash.enabled?fundingSources.personalCash.amount:0);const scenarios=[{targetRevenue:2000000,name:\"Small Business\"},{targetRevenue:2500000,name:\"Target Business\"},{targetRevenue:3000000,name:\"Large Business\"}];return scenarios.map(scenario=>{var _variables$sellerFina,_variables$revenueGro;// Step 1: Calculate EBITDA using current variable values (not mean)\nconst netMargin=variables.netProfitMargin||25;const valuationMultiple=variables.valuationMultiple||4;const sellerFinancingPercent=(_variables$sellerFina=variables.sellerFinancing)!==null&&_variables$sellerFina!==void 0?_variables$sellerFina:20;const revenueGrowthRate=(_variables$revenueGro=variables.revenueGrowthRate)!==null&&_variables$revenueGro!==void 0?_variables$revenueGro:8;const sbaDownPaymentPercent=Math.max(variables.sbaDownPayment||12,10);const ebitda=scenario.targetRevenue*(netMargin/100);const purchasePrice=ebitda*valuationMultiple;// Step 2: Calculate proper down payment structure\n// CORRECTED LOGIC: Calculate seller financing first, then SBA loan, then down payment\nconst sellerFinancingAmount=purchasePrice*(sellerFinancingPercent/100);const sbaLoanAmount=purchasePrice-sellerFinancingAmount;const sbaDownPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);// Note: Total financing may exceed purchase price if both SBA and seller financing are used\n// This is typical in SBA deals where seller financing is additional to SBA loan\n// Step 3: Add working capital and fees\nconst workingCapitalPercent=variables.workingCapital||10;const workingCapital=scenario.targetRevenue*(workingCapitalPercent/100);const fees=purchasePrice*0.025;// 2.5% total fees\nconst totalDownPaymentNeeded=sbaDownPayment+workingCapital+fees;return{...scenario,ebitda:Math.round(ebitda),purchasePrice:Math.round(purchasePrice),availableCash:totalAvailableCash,downPaymentNeeded:Math.round(totalDownPaymentNeeded),sbaDownPayment:Math.round(sbaDownPayment),sbaLoanAmount:Math.round(sbaLoanAmount),sellerFinancingAmount:Math.round(sellerFinancingAmount),workingCapital:Math.round(workingCapital),fees:Math.round(fees),cashSurplusDeficit:Math.round(totalAvailableCash-totalDownPaymentNeeded)};});},[fundingSources,variables]);// Calculate results for all three scenarios with priority-based funding\nconst allResults=useMemo(()=>{const targetRevenues=[2000000,2500000,3000000];const scenarioNames=[\"Small Business\",\"Target Business\",\"Large Business\"];return calculateScenariosWithPriority(targetRevenues,variables,fundingSources).map((scenario,index)=>{var _scenario$businessDeb,_scenario$personalDeb;// Calculate additional metrics using existing functions\nconst cashRequired=calculateTotalCashRequired({purchasePrice:scenario.purchasePrice,sbaDownPaymentPercent:variables.sbaDownPayment,sellerFinancingPercent:variables.sellerFinancing,workingCapitalPercent:variables.workingCapital,targetRevenue:scenario.targetRevenue,techInvestment:variables.techInvestment});const cashFlow=calculateAnnualCashToPocket({targetRevenue:scenario.targetRevenue,netProfitMarginPercent:variables.netProfitMargin,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,sellerFinancingAmount:scenario.purchaseFinancing.sellerFinancingAmount,managementSalary:variables.managementSalary,techInvestment:variables.techInvestment});// Calculate 5-year projections for advanced metrics\nconst fiveYearProjections=calculateFiveYearProjections({targetRevenue:scenario.targetRevenue,revenueGrowthRatePercent:variables.revenueGrowthRate,netProfitMarginPercent:variables.netProfitMargin,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,sellerFinancingAmount:scenario.purchaseFinancing.sellerFinancingAmount,managementSalary:variables.managementSalary,techInvestment:variables.techInvestment,sbaInterestRate:variables.sbaInterestRate,sellerInterestRate:variables.sellerInterestRate});// Calculate advanced return metrics using personal investment base\nconst personalInvestmentBase=scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity;const irr=calculateIRR(personalInvestmentBase,fiveYearProjections.map(p=>p.cashFlow));const moic=calculateMOIC(personalInvestmentBase,fiveYearProjections);const paybackPeriod=calculatePaybackPeriod(personalInvestmentBase,fiveYearProjections);// Calculate 3-year projections\nconst projections=[];let currentRevenue=scenario.targetRevenue;let cumulativeCashFlow=0;for(let year=1;year<=3;year++){const ebitda=currentRevenue*(variables.netProfitMargin/100);const sbaPayment=calculateLoanPayment(scenario.purchaseFinancing.sbaLoanAmount,variables.sbaInterestRate/100,10);const sellerPayment=calculateLoanPayment(scenario.purchaseFinancing.sellerFinancingAmount,variables.sellerInterestRate/100,5);const techInvestmentAmortized=variables.techInvestment/3;const netCashFlow=ebitda-sbaPayment-sellerPayment-variables.managementSalary-techInvestmentAmortized;cumulativeCashFlow+=netCashFlow;projections.push({year,revenue:currentRevenue,ebitda,netCashFlow,cumulativeCashFlow});currentRevenue*=1+variables.revenueGrowthRate/100;}// Log 3-Year Projections\nif(DEBUG_METRICS){console.group(\"📊 Growth Projections - 3-Year Cash Flow\");for(let year=1;year<=3;year++){const yearData=projections[year-1];console.log(`📅 YEAR ${year}:`);console.log(`  Revenue: ${yearData.revenue}`);console.log(`  EBITDA: ${yearData.ebitda}`);console.log(`  Net Cash Flow: ${yearData.netCashFlow}`);console.log(`  Cumulative Cash Flow: ${yearData.cumulativeCashFlow}`);console.log(`  Growth Rate: Revenue +${variables.revenueGrowthRate}%`);console.log(`---`);}console.log(`📋 ASSUMPTIONS:`);console.log(`  Annual Revenue Growth: ${variables.revenueGrowthRate}%`);console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);console.log(`  Management Salary: ${variables.managementSalary}`);console.log(`  Tech Investment: ${variables.techInvestment} (amortized over 3 years)`);console.groupEnd();}// Calculate ROI\nconst totalInvestment=cashRequired.total;const threeYearCashFlow=projections[2].cumulativeCashFlow;const roi=(threeYearCashFlow-totalInvestment)/totalInvestment*100;// Calculate additional metrics\nconst debtServiceCoverage=scenario.businessDebtService.totalBusinessDebtService>0?scenario.ebitda/scenario.businessDebtService.totalBusinessDebtService:0;const cashOnCashReturn=calculateCashOnCashReturn(cashFlow.netCashFlow,personalInvestmentBase);const riskScore=calculateEnhancedRiskScore(debtServiceCoverage,cashOnCashReturn,variables.sellerFinancing);// Log Business DSCR calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Business Health\",\"Business DSCR\",{businessEBITDA:scenario.ebitda,businessDebtService:scenario.businessDebtService.totalBusinessDebtService},\"Business DSCR = Business EBITDA ÷ Business Debt Service\",debtServiceCoverage,{debtServiceComponents:\"SBA + Seller Financing only (excludes personal debt)\",calculation:`${scenario.ebitda} ÷ ${scenario.businessDebtService.totalBusinessDebtService} = ${debtServiceCoverage}x`});}// Log Cash-on-Cash Return calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"Cash-on-Cash Return\",{yourNetAnnualGain:cashFlow.netCashFlow,yourCashInvested:personalInvestmentBase},\"Cash-on-Cash = Annual Cash Flow ÷ Your Cash Invested\",cashOnCashReturn,{definition:\"Return on actual cash invested (excluding leverage)\",calculation:`${cashFlow.netCashFlow} ÷ ${personalInvestmentBase} = ${cashOnCashReturn}%`});}// Business capital invested\nconst businessCapitalInvested=scenario.purchasePrice+scenario.targetRevenue*variables.workingCapital/100+scenario.purchasePrice*0.015+// Due diligence\nscenario.purchasePrice*0.008;// Professional fees\n// Business EVA\nconst businessEVA=calculateBusinessEVA(scenario.ebitda,businessCapitalInvested,scenario.wacc/100);// Log Business EVA calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Business Health\",\"Economic Value Added\",{businessEBITDA:scenario.ebitda,taxRate:0.25,businessCapitalInvested,wacc:scenario.wacc},\"EVA = NOPAT - Capital Charge = EBITDA × (1 - Tax Rate) - (Capital × WACC)\",businessEVA,{nopat:scenario.ebitda*(1-0.25),capitalCharge:businessCapitalInvested*(scenario.wacc/100),calculation:`${scenario.ebitda} × (1 - 0.25) - (${businessCapitalInvested} × ${scenario.wacc}%) = ${businessEVA}`});}// Deal ROI (business level)\nconst dealROI=scenario.purchasePrice>0?scenario.businessCashFlow/scenario.purchasePrice*100:0;// Personal cash invested\nconst personalCashInvested=scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity;// Validate calculations before returning\nconst validationErrors=validateScenario({targetRevenue:scenario.targetRevenue,ebitda:scenario.ebitda,purchasePrice:scenario.purchasePrice,wacc:scenario.wacc,downPaymentNeeded:scenario.totalCashNeeded});return{scenario:scenarioNames[index],cashRequired,cashFlow,financing:{purchasePrice:scenario.purchasePrice,sellerFinancing:scenario.purchaseFinancing.sellerFinancingAmount,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,downPayment:scenario.purchaseFinancing.sbaDownPayment},projections,roi,// Enhanced metrics\ndebtServiceCoverage,dscr:debtServiceCoverage,cashOnCashReturn,riskScore,sbaLoanPrincipal:scenario.purchaseFinancing.sbaLoanPrincipal,sbaMonthlyPayment:scenario.businessDebtService.sbaAnnualPayment/12,sbaAnnualPayment:scenario.businessDebtService.sbaAnnualPayment,sellerMonthlyPayment:scenario.businessDebtService.sellerAnnualPayment/12,sellerAnnualPayment:scenario.businessDebtService.sellerAnnualPayment,irr,moic,paybackPeriod,fiveYearProjections,// FUNDING STRUCTURE WITH PRIORITY ALLOCATION\nactiveFundingSources:Object.entries(scenario.fundingAllocation.allocation).filter(_ref2=>{let[_,amount]=_ref2;return amount>0;}).reduce((acc,_ref3)=>{let[key,amount]=_ref3;acc[key]={amount,enabled:true,type:key==='additionalInvestment'||key==='personalCash'?'equity':'debt',rate:key==='taiwaneseLoan'?0.028:key==='houseEquity'?0.08:key==='sbaLoan'?0.115:key==='sellerFinancing'?0.08:0,term:key==='taiwaneseLoan'?10:key==='houseEquity'?15:key==='sbaLoan'?10:key==='sellerFinancing'?5:0,annualPayment:key==='taiwaneseLoan'?scenario.personalDebtService.taiwanesePayment:key==='houseEquity'?scenario.personalDebtService.houseEquityPayment:key==='sbaLoan'?scenario.businessDebtService.sbaAnnualPayment:key==='sellerFinancing'?scenario.businessDebtService.sellerAnnualPayment:0};return acc;},{}),totalFunding:scenario.fundingAllocation.totalAllocated,totalDebtService:(((_scenario$businessDeb=scenario.businessDebtService)===null||_scenario$businessDeb===void 0?void 0:_scenario$businessDeb.totalBusinessDebtService)||0)+(((_scenario$personalDeb=scenario.personalDebtService)===null||_scenario$personalDeb===void 0?void 0:_scenario$personalDeb.totalPersonalDebtService)||0),totalPersonalEquity:scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity,totalAdditionalEquity:scenario.fundingAllocation.allocation.additionalInvestment,ownershipPercentage:scenario.ownership.yourOwnership,wacc:scenario.wacc,personalCostOfCapital:scenario.personalCostOfCapital,// BUSINESS-LEVEL METRICS\nbusinessFreeCashFlow:Math.round(scenario.businessCashFlow),businessDebtService:Math.round(scenario.businessDebtService.totalBusinessDebtService),businessDSCR:scenario.businessDebtService.totalBusinessDebtService>0?scenario.ebitda/scenario.businessDebtService.totalBusinessDebtService:0,businessEVA:Math.round(businessEVA),businessWACC:scenario.wacc,businessCapitalInvested:Math.round(businessCapitalInvested),dealROI:dealROI,// PERSONAL-LEVEL METRICS\npersonalCashFlow:Math.round(scenario.personalNetCashFlow),ownerCashFlow:Math.round(scenario.personalNetCashFlow),personalROI:scenario.personalROI,ownerROI:scenario.personalROI,personalDebtService:Math.round(scenario.personalDebtService.totalPersonalDebtService),personalCashInvested:Math.round(personalCashInvested),ownerDistribution:Math.round(scenario.ownerDistribution),ownershipDilution:scenario.ownership.investorOwnership*100,investorOwnership:scenario.ownership.investorOwnership,// OWNERSHIP BREAKDOWN\nownershipBreakdown:scenario.ownership.breakdown,// VALIDATION\nvalidationErrors,// PRIORITY ALLOCATION DATA\nfundingAllocation:scenario.fundingAllocation,purchaseFinancing:scenario.purchaseFinancing,businessDebtService:scenario.businessDebtService,personalDebtService:scenario.personalDebtService,ownership:scenario.ownership,businessCashFlow:scenario.businessCashFlow,ownerDistribution:scenario.ownerDistribution,personalNetCashFlow:scenario.personalNetCashFlow,targetRevenue:scenario.targetRevenue,ebitda:scenario.ebitda,purchasePrice:scenario.purchasePrice,totalCashNeeded:scenario.totalCashNeeded,// NEW METRICS CALCULATIONS\n// Section 1: Deal Structure & Financing\ncapitalUtilizationRate:calculateCapitalUtilizationRate(scenario.fundingAllocation.totalAllocated,variables.availableCash||750000),leverageMultiplier:calculateLeverageMultiplier(personalCashInvested,fundingSources.personalCash.amount),priceToRevenueRatio:calculatePriceToRevenueRatio(scenario.purchasePrice,scenario.targetRevenue),// Section 2: Business Health Metrics\nebitdaMargin:calculateEBITDAMargin(scenario.ebitda,scenario.targetRevenue),businessCashConversion:calculateBusinessCashConversion(scenario.businessCashFlow,scenario.ebitda),revenueToInvestmentEfficiency:calculateRevenueToInvestmentEfficiency(scenario.targetRevenue,personalCashInvested),// Section 3: Personal Investment Returns\nriskAdjustedReturn:calculateRiskAdjustedReturn(scenario.personalROI,4.5,riskScore),incomeReplacementRatio:calculateIncomeReplacementRatio(scenario.personalNetCashFlow,variables.currentSalary||100000),wealthBuildingVelocity:calculateWealthBuildingVelocity(5.0,5),// Assuming 5x total return over 5 years\n// Section 4: Growth & Risk Projections\nexitValueRange:calculateExitValueRange(scenario.ebitda*Math.pow(1+(variables.revenueGrowthRate||5)/100,5),// Year 5 EBITDA\nscenario.ownership.yourOwnership),stressTestResults:calculateStressTestResults(scenario.personalROI),growthFundingCapacity:calculateGrowthFundingCapacity(scenario.ebitda*3,// Max sustainable debt (3x EBITDA)\nscenario.businessDebtService.totalBusinessDebtService+scenario.personalDebtService.totalPersonalDebtService,scenario.businessCashFlow*Math.pow(1+(variables.revenueGrowthRate||5)/100,3),// Year 3 cash flow\ncalculateLeverageMultiplier(personalCashInvested,fundingSources.personalCash.amount))};// Log Leverage Multiplier calculation\nif(DEBUG_METRICS){const leverageMultiplier=calculateLeverageMultiplier(personalCashInvested,fundingSources.personalCash.amount);logMetricCalculation(\"Deal Structure\",\"Leverage Multiplier\",{totalInvestment:personalCashInvested,personalCashInvested:fundingSources.personalCash.amount},\"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\",leverageMultiplier,{interpretation:leverageMultiplier>=8?\"Excellent leverage\":leverageMultiplier>=5?\"Good leverage\":leverageMultiplier>=3?\"Fair leverage\":\"Poor leverage\",calculation:`${personalCashInvested} ÷ ${fundingSources.personalCash.amount} = ${leverageMultiplier}x`});}// Log Risk-Adjusted Return calculation\nif(DEBUG_METRICS){const riskAdjustedReturn=calculateRiskAdjustedReturn(scenario.personalROI,4.5,riskScore);logMetricCalculation(\"Personal Returns\",\"Risk-Adjusted Return\",{yourROI:scenario.personalROI,riskFreeRate:4.5,riskScore},\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\",riskAdjustedReturn,{interpretation:riskAdjustedReturn>=1.5?\"Excellent risk-adjusted return\":riskAdjustedReturn>=1.0?\"Good risk-adjusted return\":riskAdjustedReturn>=0.5?\"Fair risk-adjusted return\":\"Poor risk-adjusted return\",calculation:`(${scenario.personalROI} - 4.5) ÷ ${riskScore} = ${riskAdjustedReturn}`});}// Log W-2 Replacement calculation\nif(DEBUG_METRICS){const incomeReplacementRatio=calculateIncomeReplacementRatio(scenario.personalNetCashFlow,variables.currentSalary||100000);logMetricCalculation(\"Personal Returns\",\"W-2 Replacement\",{yourNetAnnualGain:scenario.personalNetCashFlow,currentSalary:variables.currentSalary||100000},\"W-2 Replacement = (Your Net Annual Gain ÷ Current Salary) × 100\",incomeReplacementRatio,{interpretation:incomeReplacementRatio>=120?\"Excellent replacement\":incomeReplacementRatio>=80?\"Good replacement\":incomeReplacementRatio>=40?\"Fair replacement\":\"Poor replacement\",calculation:`(${scenario.personalNetCashFlow} ÷ ${variables.currentSalary||100000}) × 100 = ${incomeReplacementRatio}%`});}// Log Wealth Velocity calculation\nif(DEBUG_METRICS){const wealthBuildingVelocity=calculateWealthBuildingVelocity(5.0,5);logMetricCalculation(\"Personal Returns\",\"Wealth Velocity\",{totalReturnMultiple:5.0,investmentPeriod:5},\"Wealth Velocity = Annual wealth creation rate from total return multiple\",wealthBuildingVelocity,{interpretation:wealthBuildingVelocity>=80?\"Excellent velocity\":wealthBuildingVelocity>=40?\"Good velocity\":wealthBuildingVelocity>=20?\"Fair velocity\":\"Poor velocity\",calculation:`Annual wealth creation from 5x return over 5 years = ${wealthBuildingVelocity}%`});}});// Log comprehensive summary for all scenarios\nif(DEBUG_METRICS){console.group(\"📊 COMPREHENSIVE DASHBOARD SUMMARY\");console.log(\"🎯 SCENARIOS ANALYZED:\",allResults.length);allResults.forEach((result,index)=>{var _result$wacc,_result$businessDSCR,_result$businessROA,_result$personalROI,_result$cashOnCashRet;console.group(`📋 SCENARIO ${index+1}: ${result.scenario}`);console.log(\"🏢 DEAL STRUCTURE:\");console.log(`  Purchase Price: ${formatCurrency(result.purchasePrice)}`);console.log(`  Available Cash: ${formatCurrency(result.availableCash||750000)}`);console.log(`  Cash Surplus: ${formatCurrency(result.cashSurplus||0)}`);console.log(`  WACC: ${((_result$wacc=result.wacc)===null||_result$wacc===void 0?void 0:_result$wacc.toFixed(2))||0}%`);console.log(\"📈 BUSINESS HEALTH:\");console.log(`  DSCR: ${((_result$businessDSCR=result.businessDSCR)===null||_result$businessDSCR===void 0?void 0:_result$businessDSCR.toFixed(2))||0}x`);console.log(`  ROA: ${((_result$businessROA=result.businessROA)===null||_result$businessROA===void 0?void 0:_result$businessROA.toFixed(2))||0}%`);console.log(`  EVA: ${formatCurrency(result.businessEVA||0)}`);console.log(\"💰 PERSONAL RETURNS:\");console.log(`  Your ROI: ${((_result$personalROI=result.personalROI)===null||_result$personalROI===void 0?void 0:_result$personalROI.toFixed(2))||0}%`);console.log(`  Cash-on-Cash: ${((_result$cashOnCashRet=result.cashOnCashReturn)===null||_result$cashOnCashRet===void 0?void 0:_result$cashOnCashRet.toFixed(2))||0}%`);console.log(`  Payback: ${result.paybackPeriod||'>5 years'}`);console.log(\"📊 KEY ASSUMPTIONS:\");console.log(`  Target Revenue: ${formatCurrency(result.targetRevenue)}`);console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);console.log(`  Valuation Multiple: ${variables.valuationMultiple}x`);console.log(`  Revenue Growth: ${variables.revenueGrowthRate}%`);console.log(`  Working Capital %: ${variables.workingCapital}%`);console.log(`  Management Salary: ${formatCurrency(variables.managementSalary)}`);console.groupEnd();});console.groupEnd();}},[variables,fundingSources]);const handleFundingSourceChange=useCallback((sourceKey,field,value)=>{setFundingSources(prev=>({...prev,[sourceKey]:{...prev[sourceKey],[field]:value}}));},[]);const handleVariableChange=useCallback((variableKey,value)=>{setVariables(prev=>({...prev,[variableKey]:value}));},[]);const resetToDefaults=useCallback(()=>{setFundingSources({taiwaneseLoan:{amount:300000,rate:0.028,term:10,enabled:true,type:'debt',description:'USD loan from Taiwan'},houseEquity:{amount:98273,rate:0.08,term:15,enabled:true,type:'debt',description:'Home equity loan (tax deductible for business use)'},sbaLoan:{amount:0,rate:0.115,term:10,enabled:false,type:'debt',description:'SBA 7(a) business acquisition loan'},sellerFinancing:{amount:0,rate:0.08,term:5,enabled:false,type:'debt',description:'Seller note (subordinated)'},additionalInvestment:{amount:50000,expectedReturn:0.15,enabled:true,type:'equity',description:'Outside investor equity (dilutes ownership)'},personalCash:{amount:50000,opportunityCost:0.08,enabled:true,type:'equity',description:'Personal cash investment'}});setVariables(DEFAULT_SCENARIO.variables);},[]);// Info Tooltip Component\nconst InfoTooltip=_ref4=>{let{formula,children}=_ref4;const[showTooltip,setShowTooltip]=useState(false);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center gap-1 cursor-help\",onMouseEnter:()=>setShowTooltip(true),onMouseLeave:()=>setShowTooltip(false),children:[children,!children&&/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 text-gray-400 hover:text-gray-600\"})]}),showTooltip&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-50 top-full left-1/2 transform -translate-x-1/2 mt-2 px-4 py-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium mb-2\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap leading-relaxed\",children:formula}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900\"})]})]});};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(amount);};// Test calculation to verify formulas\nconst testCalculation=useCallback(()=>{const testScenario={targetRevenue:2500000,netProfitMargin:25,valuationMultiple:4,sbaLoanAmount:1500000,sellerFinancingAmount:500000,personalCash:550000,additionalInvestment:100000};const result=verifyCalculations(testScenario);// Verify results are in expected ranges\nconst{testScenario:calc,expectedRanges}=result;return result;},[]);// Run test calculation on component mount\nuseEffect(()=>{testCalculation();},[testCalculation]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-background\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Business Acquisition Calculator\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Interactive tool for evaluating acquisition scenarios\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:resetToDefaults,className:\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4\"}),\"Reset\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"Export\"]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-2/5 bg-gray-50 p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Funding Sources Configuration\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:Object.entries(fundingSources).filter(_ref5=>{let[key,source]=_ref5;return key!=='sbaLoan'&&key!=='sellerFinancing';}).map(_ref6=>{let[key,source]=_ref6;return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-900\",children:key==='houseEquity'?'Home Equity':key==='sbaLoan'?'SBA Loan':key==='personalCash'?'Personal Cash':key==='additionalInvestment'?'Additional Investment':key==='taiwaneseLoan'?'Taiwanese Loan':key.replace(/([A-Z])/g,' $1').trim()}),/*#__PURE__*/_jsx(InfoTooltip,{formula:source.description,children:/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 text-gray-400 hover:text-gray-600\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-gray-700\",children:\"Current: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900\",children:formatCurrency(source.amount)})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CustomSlider,{value:source.amount,onChange:value=>handleFundingSourceChange(key,'amount',value),min:0,max:key==='taiwaneseLoan'||key==='houseEquity'?300000:key==='additionalInvestment'||key==='personalCash'?100000:1000000,step:25000,unit:\"$\",color:\"blue\",showTooltip:false})}),source.type==='debt'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Rate: \",(source.rate*100).toFixed(1),\"% (after tax \",key==='houseEquity'?(source.rate*100).toFixed(1):(source.rate*0.75*100).toFixed(1),\"%)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Term: \",source.term,\" years\"]})]})]})]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"Variable Controls\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:Object.entries(VARIABLES).map(_ref7=>{let[key,variable]=_ref7;return/*#__PURE__*/_jsx(VariableCard,{variableKey:key,variable:variable,value:variables[key],onValueChange:value=>handleVariableChange(key,value)},key);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-3/5 bg-white p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Scenario Comparison\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:keyParameters.map((scenario,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm text-gray-600\",children:\"Target Annual Revenue:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-gray-900\",children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-purple-50 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Purchase Price = Target Revenue \\xD7 Net Profit Margin % \\xD7 Valuation Multiple\\\\n\\\\nExample: $2,000,000 \\xD7 20.7% \\xD7 4.1x = $1,697,400\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-purple-800\",children:\"Purchase Price\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-purple-900 text-center\",children:formatCurrency(scenario.purchasePrice)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-orange-50 rounded-lg border border-orange-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"SBA Down Payment = (Purchase Price - Seller Financing Amount) \\xD7 SBA Down Payment %\\\\n\\\\nExample: ($1,697,400 - $274,979) \\xD7 13% = $184,915\\\\n\\\\nThis is the minimum cash required for the SBA loan portion only.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-orange-800\",children:\"SBA Down Payment\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-orange-900 text-center\",children:formatCurrency(scenario.sbaDownPayment)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\\\n\\\\nIncludes:\\\\n\\u2022 SBA Down Payment\\\\n\\u2022 Working Capital (7.9% of revenue)\\\\n\\u2022 Due Diligence & Professional Fees (2.5% of purchase price)\\\\n\\\\nThis is the total cash required for the acquisition.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-blue-800\",children:\"Down Payment Needed\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-blue-900 text-center\",children:formatCurrency(scenario.downPaymentNeeded)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-yellow-50 rounded-lg border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Available Cash = Sum of all enabled funding sources:\\\\n\\\\n\\u2022 Taiwanese Loan: $725,000 (2.8%)\\\\n\\u2022 Personal Cash: $550,000 (8.0%)\\\\n\\u2022 Additional Investment: $100,000 (15.0%)\\\\n\\u2022 Home Equity: $200,000 (8.0%)\\\\n\\\\nThis represents your total accessible capital for the acquisition.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-yellow-800\",children:\"Available Cash\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-yellow-900 text-center\",children:formatCurrency(scenario.availableCash)})]}),/*#__PURE__*/_jsxs(\"div\",{className:`p-2 rounded-lg border ${scenario.cashSurplusDeficit>=0?'bg-green-50 border-green-200':'bg-red-50 border-red-200'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\\\n\\\\nPositive (Green): You have sufficient cash for the acquisition\\\\nNegative (Red): You need additional funding or must reduce acquisition costs\\\\n\\\\nThis determines if the deal is financially feasible with your current resources.\",children:/*#__PURE__*/_jsx(\"span\",{className:`text-xs font-medium ${scenario.cashSurplusDeficit>=0?'text-green-800':'text-red-800'}`,children:\"Cash Surplus/Deficit\"})})}),/*#__PURE__*/_jsx(\"p\",{className:`text-sm font-bold text-center ${scenario.cashSurplusDeficit>=0?'text-green-900':'text-red-900'}`,children:formatCurrency(scenario.cashSurplusDeficit)})]})]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Deal Structure & Financing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>{var _scenario$fundingAllo,_scenario$fundingAllo2,_scenario$fundingAllo3,_scenario$fundingAllo4,_scenario$fundingAllo5,_scenario$fundingAllo6,_scenario$fundingAllo7,_scenario$fundingAllo8,_scenario$fundingAllo9,_scenario$fundingAllo0,_scenario$fundingAllo1,_scenario$fundingAllo10,_scenario$fundingAllo11,_scenario$fundingAllo12;return/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Funding Allocation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Taiwanese Loan:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo=scenario.fundingAllocation)===null||_scenario$fundingAllo===void 0?void 0:(_scenario$fundingAllo2=_scenario$fundingAllo.allocation)===null||_scenario$fundingAllo2===void 0?void 0:_scenario$fundingAllo2.taiwaneseLoan)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Cash:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo3=scenario.fundingAllocation)===null||_scenario$fundingAllo3===void 0?void 0:(_scenario$fundingAllo4=_scenario$fundingAllo3.allocation)===null||_scenario$fundingAllo4===void 0?void 0:_scenario$fundingAllo4.personalCash)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Additional Investment:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo5=scenario.fundingAllocation)===null||_scenario$fundingAllo5===void 0?void 0:(_scenario$fundingAllo6=_scenario$fundingAllo5.allocation)===null||_scenario$fundingAllo6===void 0?void 0:_scenario$fundingAllo6.additionalInvestment)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Seller Financing:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo7=scenario.fundingAllocation)===null||_scenario$fundingAllo7===void 0?void 0:(_scenario$fundingAllo8=_scenario$fundingAllo7.allocation)===null||_scenario$fundingAllo8===void 0?void 0:_scenario$fundingAllo8.sellerFinancing)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Home Equity:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo9=scenario.fundingAllocation)===null||_scenario$fundingAllo9===void 0?void 0:(_scenario$fundingAllo0=_scenario$fundingAllo9.allocation)===null||_scenario$fundingAllo0===void 0?void 0:_scenario$fundingAllo0.houseEquity)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"SBA Loan:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo1=scenario.fundingAllocation)===null||_scenario$fundingAllo1===void 0?void 0:(_scenario$fundingAllo10=_scenario$fundingAllo1.allocation)===null||_scenario$fundingAllo10===void 0?void 0:_scenario$fundingAllo10.sbaLoan)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-1 mt-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Down Payment Needed:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.downPaymentNeeded||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Allocated:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(((_scenario$fundingAllo11=scenario.fundingAllocation)===null||_scenario$fundingAllo11===void 0?void 0:_scenario$fundingAllo11.totalAllocated)||0)})]}),((_scenario$fundingAllo12=scenario.fundingAllocation)===null||_scenario$fundingAllo12===void 0?void 0:_scenario$fundingAllo12.downPaymentGap)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-red-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Funding Gap:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(scenario.fundingAllocation.downPaymentGap)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Financing Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"WACC = Weighted Average Cost of Capital\\\\nIncludes ALL funding sources with after-tax rates:\\\\n\\u2022 Taiwanese Loan: 2.1% after-tax\\\\n\\u2022 Personal Cash: 6% after-tax\\\\n\\u2022 Additional Investment: 15%\\\\n\\u2022 Seller Financing: 6% after-tax\\\\n\\u2022 Home Equity: 8%\\\\n\\u2022 SBA Loan: 8.6% after-tax\",children:/*#__PURE__*/_jsx(\"span\",{children:\"WACC:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[(scenario.wacc||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Your Personal Cost of Capital\\\\nWeighted average of your personal funding sources:\\\\n\\u2022 Taiwanese Loan: 2.8%\\\\n\\u2022 Personal Cash: 8% (opportunity cost)\\\\n\\u2022 Home Equity: 8%\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your Personal Cost:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[(scenario.personalCostOfCapital||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your Ownership:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[((scenario.ownershipPercentage||0)*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Investor Ownership:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[((scenario.investorOwnership||0)*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:\"Based on risk-adjusted contributions (Taiwanese Loan: 80%, Home Equity: 120%, Personal Cash: 100%). Control premium and sweat equity not considered.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Monthly Business Debt Payment:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessDebtService.totalBusinessDebtService/12)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Monthly Personal Debt Payment:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.personalDebtService.totalPersonalDebtService/12)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-2 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Capital Utilization Rate = Total Allocated Funding \\xF7 Available Cash \\xD7 100\\\\n\\\\nMeasures percentage of available funding deployed in the deal. Lower utilization provides safety margin for unexpected costs.\\\\n\\\\nExample: $516K allocated \\xF7 $750K available = 69%\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: >95% (Minimal safety margin)\\\\n\\uD83D\\uDFE1 Below Target: 85-95% (Limited flexibility)  \\\\n\\uD83D\\uDFE2 Good: 65-85% (Balanced deployment)\\\\n\\uD83D\\uDD35 Excellent: <65% (High safety margin)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Capital Utilization:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color==='#E74C3C'?'text-red-600':getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color==='#F1C40F'?'text-yellow-500':getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.capitalUtilizationRate||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >95% | Below Target 85-95% | Good 65-85% | Excellent <65%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Leverage Multiplier = Total Investment \\xF7 Personal Cash Invested\\\\n\\\\nShows how effectively you're using leverage to amplify investment capacity. Higher multipliers indicate better capital efficiency.\\\\n\\\\nExample: $516K total investment \\xF7 $50K personal cash = 10.3x\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <3x (Inefficient capital use)\\\\n\\uD83D\\uDFE1 Below Target: 3-5x (Limited leverage)\\\\n\\uD83D\\uDFE2 Good: 5-8x (Balanced leverage)\\\\n\\uD83D\\uDD35 Excellent: >8x (High capital efficiency)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Leverage Multiplier:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getLeverageMultiplierStatus(scenario.leverageMultiplier).color==='#E74C3C'?'text-red-600':getLeverageMultiplierStatus(scenario.leverageMultiplier).color==='#F1C40F'?'text-yellow-500':getLeverageMultiplierStatus(scenario.leverageMultiplier).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.leverageMultiplier||0).toFixed(1),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <3x | Below Target 3-5x | Good 5-8x | Excellent >8x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Price-to-Revenue = Purchase Price \\xF7 Target Annual Revenue\\\\n\\\\nMeasures deal efficiency relative to business size. Lower ratios indicate better value deals.\\\\n\\\\nExample: $2,147,000 purchase price \\xF7 $2,500,000 revenue = 0.86x\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: >1.2x (Expensive relative to revenue)\\\\n\\uD83D\\uDFE1 Below Target: 1.0-1.2x (Fair market pricing)\\\\n\\uD83D\\uDFE2 Good: 0.8-1.0x (Good value)\\\\n\\uD83D\\uDD35 Excellent: <0.8x (Excellent value)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Price-to-Revenue:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getPriceToRevenueStatus(scenario.priceToRevenueRatio).color==='#E74C3C'?'text-red-600':getPriceToRevenueStatus(scenario.priceToRevenueRatio).color==='#F1C40F'?'text-yellow-500':getPriceToRevenueStatus(scenario.priceToRevenueRatio).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.priceToRevenueRatio||0).toFixed(2),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >1.2x | Below Target 1.0-1.2x | Good 0.8-1.0x | Excellent <0.8x\"]})]})]})]})},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Business Health Metrics\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Revenue:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business EBITDA:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.ebitda)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\\\nSBA: 11.5% rate, 10-year term\\\\nSeller: 8% rate, 5-year term\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business Debt Service:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessDebtService.totalBusinessDebtService)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Free Cash Flow:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessFreeCashFlow)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Economic Value Added = NOPAT - Capital Charge\\\\nNOPAT = EBITDA \\xD7 (1 - Tax Rate)\\\\nCapital Charge = Business Capital Invested \\xD7 WACC\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Economic Value Added:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessEVA)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business DSCR:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.businessDSCR<1.25?'text-red-600':scenario.businessDSCR<1.5?'text-yellow-500':scenario.businessDSCR<2.0?'text-green-600':'text-blue-600'}`,children:[(scenario.businessDSCR||0).toFixed(2),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <1.25x | Below Target 1.25-1.5x | Good 1.5-2.0x | Excellent >2.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business ROA = (Business Free Cash Flow / Business Capital Invested) \\xD7 100\\\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business ROA:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<3?'text-red-600':scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<6?'text-yellow-500':scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<10?'text-green-600':'text-blue-600'}`,children:[(scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <3% | Below Target 3-6% | Good 6-10% | Excellent >10%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Debt-to-EBITDA Ratio = Total Business Debt \\xF7 EBITDA\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Debt-to-EBITDA Ratio:\"})}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>4.0?'text-red-600':(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>3.0?'text-yellow-500':(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>2.0?'text-green-600':'text-blue-600'}`,children:(()=>{const sbaLoan=scenario.fundingAllocation.allocation.sbaLoan||0;const sellerFinancing=scenario.fundingAllocation.allocation.sellerFinancing||0;const totalBusinessDebt=sbaLoan+sellerFinancing;const debtToEbitdaRatio=totalBusinessDebt/scenario.ebitda;return debtToEbitdaRatio.toFixed(1)+'x';})()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >4.0x | Below Target 3.0-4.0x | Good 2.0-3.0x | Excellent <2.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Interest Coverage Ratio = EBITDA \\xF7 Interest Payments\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Interest Coverage Ratio:\"})}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<1.5?'text-red-600':scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<2.5?'text-yellow-500':scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<3.0?'text-green-600':'text-blue-600'}`,children:(()=>{const sbaLoan=scenario.fundingAllocation.allocation.sbaLoan||0;const sellerFinancing=scenario.fundingAllocation.allocation.sellerFinancing||0;const sbaInterest=sbaLoan*0.115;const sellerInterest=sellerFinancing*0.08;const totalInterest=sbaInterest+sellerInterest;const interestCoverageRatio=totalInterest>0?scenario.ebitda/totalInterest:Infinity;return interestCoverageRatio.toFixed(1)+'x';})()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <1.5x | Below Target 1.5-2.5x | Good 2.5-3.0x | Excellent >3.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"EBITDA Margin = Business EBITDA \\xF7 Business Revenue \\xD7 100\\\\n\\\\nMeasures operational profitability before financing and tax effects. Higher margins indicate more efficient operations and pricing power.\\\\n\\\\nExample: $565K EBITDA \\xF7 $2,500K revenue = 22.6%\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <15% (Poor profitability)\\\\n\\uD83D\\uDFE1 Below Target: 15-18% (Below average)\\\\n\\uD83D\\uDFE2 Good: 18-22% (Solid profitability)\\\\n\\uD83D\\uDD35 Excellent: >22% (Strong profitability)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"EBITDA Margin:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getEBITDAMarginStatus(scenario.ebitdaMargin).color==='#E74C3C'?'text-red-600':getEBITDAMarginStatus(scenario.ebitdaMargin).color==='#F1C40F'?'text-yellow-500':getEBITDAMarginStatus(scenario.ebitdaMargin).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.ebitdaMargin||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <15% | Below Target 15-18% | Good 18-22% | Excellent >22%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business Cash Conversion = Business Free Cash Flow \\xF7 Business EBITDA \\xD7 100\\\\n\\\\nShows how efficiently EBITDA converts to actual cash flow. Higher conversion indicates better working capital management and cash generation.\\\\n\\\\nExample: $157K FCF \\xF7 $565K EBITDA = 28%\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <15% (Poor cash conversion)\\\\n\\uD83D\\uDFE1 Below Target: 15-20% (Below average)\\\\n\\uD83D\\uDFE2 Good: 20-30% (Solid conversion)\\\\n\\uD83D\\uDD35 Excellent: >30% (Strong cash generation)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Cash Conversion:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getCashConversionStatus(scenario.businessCashConversion).color==='#E74C3C'?'text-red-600':getCashConversionStatus(scenario.businessCashConversion).color==='#F1C40F'?'text-yellow-500':getCashConversionStatus(scenario.businessCashConversion).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.businessCashConversion||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <15% | Below Target 15-20% | Good 20-30% | Excellent >30%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Revenue-to-Investment Efficiency = Target Revenue \\xF7 Your Total Investment\\\\n\\\\nMeasures business scale relative to capital deployed. Higher ratios indicate more efficient capital deployment and larger business scale per dollar invested.\\\\n\\\\nExample: $2,500K revenue \\xF7 $516K investment = 4.8x\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <3x (Inefficient scale)\\\\n\\uD83D\\uDFE1 Below Target: 3-4x (Below average)\\\\n\\uD83D\\uDFE2 Good: 4-6x (Good efficiency)\\\\n\\uD83D\\uDD35 Excellent: >6x (High efficiency)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Revenue Multiple:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color==='#E74C3C'?'text-red-600':getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color==='#F1C40F'?'text-yellow-500':getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.revenueToInvestmentEfficiency||0).toFixed(1),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <3x | Below Target 3-4x | Good 4-6x | Excellent >6x\"]})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Personal Investment Returns\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"business-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Business Level\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Revenue Burden:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Operating Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.targetRevenue-scenario.ebitda)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Debt Service:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.businessDebtService.totalBusinessDebtService)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Management Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(variables.managementSalary)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-2 font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Net Gain:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessFreeCashFlow)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personal-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Personal Level\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Investment:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.personalCashInvested)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Distribution:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"+\",formatCurrency(scenario.ownerDistribution)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Debt Service:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.personalDebtService.totalPersonalDebtService)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-2 font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Your Net Annual Gain:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.personalCashFlow)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Your ROI = (Your Net Annual Gain \\xF7 Your Total Cash Invested) \\xD7 100\\\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your ROI:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalROI<7?'text-red-600':scenario.personalROI<12?'text-yellow-500':scenario.personalROI<20?'text-green-600':'text-blue-600'}`,children:[scenario.personalROI.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <7% | Below Target 7-12% | Good 12-20% | Excellent >20%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Cash-on-Cash Return = Annual Cash Flow \\xF7 Your Cash Invested\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Cash-on-Cash Return:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalCashFlow/scenario.personalCashInvested*100<8?'text-red-600':scenario.personalCashFlow/scenario.personalCashInvested*100<12?'text-yellow-500':scenario.personalCashFlow/scenario.personalCashInvested*100<20?'text-green-600':'text-blue-600'}`,children:[(scenario.personalCashFlow/scenario.personalCashInvested*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <8% | Below Target 8-12% | Good 12-20% | Excellent >20%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Payback Period = Your Total Investment \\xF7 Your Net Annual Gain\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Payback Period:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalCashInvested/scenario.personalCashFlow>8?'text-red-600':scenario.personalCashInvested/scenario.personalCashFlow>5?'text-yellow-500':scenario.personalCashInvested/scenario.personalCashFlow>3?'text-green-600':'text-blue-600'}`,children:[(scenario.personalCashInvested/scenario.personalCashFlow).toFixed(1),\" years\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >8 years | Below Target 5-8 years | Good 3-5 years | Excellent <3 years\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) \\xF7 Risk Score\\\\n\\\\nMeasures return per unit of risk taken. Higher ratios indicate better risk-adjusted performance compared to safer alternatives.\\\\n\\\\nExample: (14.8% ROI - 4.5% treasury) \\xF7 4.9 risk score = 2.1\\\\n\\\\nRisk Score Components: Leverage, concentration, industry, execution risk\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <0.5 (Poor risk compensation)\\\\n\\uD83D\\uDFE1 Below Target: 0.5-1.0 (Fair risk-return)\\\\n\\uD83D\\uDFE2 Good: 1.0-1.5 (Good risk-return)\\\\n\\uD83D\\uDD35 Excellent: >1.5 (Strong risk-return)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Risk-Adjusted Return:\"})}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${getRiskAdjustedStatus(scenario.riskAdjustedReturn).color==='#E74C3C'?'text-red-600':getRiskAdjustedStatus(scenario.riskAdjustedReturn).color==='#F1C40F'?'text-yellow-500':getRiskAdjustedStatus(scenario.riskAdjustedReturn).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:(scenario.riskAdjustedReturn||0).toFixed(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <0.5 | Below Target 0.5-1.0 | Good 1.0-1.5 | Excellent >1.5\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Income Replacement Ratio = Your Net Annual Gain \\xF7 Current Salary \\xD7 100\\\\n\\\\nShows percentage of current employment income replaced by business cash flows. Higher ratios indicate faster path to financial independence.\\\\n\\\\nExample: $76K business income \\xF7 $100K salary = 76%\\\\n\\\\nTimeline: Year 1: 76% | Year 3: 132% (full replacement + growth)\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <40% (Cannot replace income)\\\\n\\uD83D\\uDFE1 Below Target: 40-80% (Partial replacement)\\\\n\\uD83D\\uDFE2 Good: 80-120% (Near full replacement)\\\\n\\uD83D\\uDD35 Excellent: >120% (Income enhancement)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"W-2 Replacement:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getIncomeReplacementStatus(scenario.incomeReplacementRatio).color==='#E74C3C'?'text-red-600':getIncomeReplacementStatus(scenario.incomeReplacementRatio).color==='#F1C40F'?'text-yellow-500':getIncomeReplacementStatus(scenario.incomeReplacementRatio).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.incomeReplacementRatio||0).toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <40% | Below Target 40-80% | Good 80-120% | Excellent >120%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Wealth Building Velocity = Annual Wealth Creation Rate\\\\n\\\\nMeasures how fast your investment builds wealth compared to traditional investments. Based on total return projections including cash flows and equity appreciation.\\\\n\\\\nExample: 5.0x total return over 5 years = 100%+ annual wealth creation\\\\n\\\\nComparison: S&P 500 ~10% | Real Estate ~15% | This Investment ~100%+\\\\n\\\\nStandards:\\\\n\\uD83D\\uDD34 Critical: <20% (Below market alternatives)\\\\n\\uD83D\\uDFE1 Below Target: 20-40% (Market competitive)\\\\n\\uD83D\\uDFE2 Good: 40-80% (Above market)\\\\n\\uD83D\\uDD35 Excellent: >80% (Exceptional wealth building)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Wealth Velocity:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getWealthVelocityStatus(scenario.wealthBuildingVelocity).color==='#E74C3C'?'text-red-600':getWealthVelocityStatus(scenario.wealthBuildingVelocity).color==='#F1C40F'?'text-yellow-500':getWealthVelocityStatus(scenario.wealthBuildingVelocity).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(scenario.wealthBuildingVelocity||0).toFixed(0),\"%+\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <20% | Below Target 20-40% | Good 40-80% | Excellent >80%\"]})]})]})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Growth & Risk Projections\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>{var _scenario$exitValueRa,_scenario$exitValueRa2,_scenario$exitValueRa3,_scenario$stressTestR,_scenario$stressTestR2,_scenario$stressTestR3,_scenario$stressTestR4,_scenario$stressTestR5,_scenario$stressTestR6,_scenario$stressTestR7,_scenario$stressTestR8,_scenario$stressTestR9,_scenario$stressTestR0,_scenario$stressTestR1,_scenario$stressTestR10,_scenario$stressTestR11,_scenario$stressTestR12,_scenario$stressTestR13,_scenario$stressTestR14;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded p-4\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-1\",children:\"Year\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Business FCF\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Your Distribution\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Your Net FCF\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"DSCR\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:scenario.projections.map((year,yearIndex)=>{// Calculate business FCF for this year\nconst yearEBITDA=year.ebitda;const yearBusinessFCF=yearEBITDA-scenario.businessDebtService.totalBusinessDebtService-variables.managementSalary-variables.techInvestment/3;const yearOwnerDistribution=yearBusinessFCF*scenario.ownership.yourOwnership;const yearYourFCF=yearOwnerDistribution-scenario.personalDebtService.totalPersonalDebtService;const yearDSCR=scenario.businessDebtService.totalBusinessDebtService>0?yearEBITDA/scenario.businessDebtService.totalBusinessDebtService:0;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-1\",children:year.year}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearBusinessFCF)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearOwnerDistribution)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearYourFCF)}),/*#__PURE__*/_jsxs(\"td\",{className:`text-right py-1 ${yearDSCR<1.25?'text-red-600':yearDSCR<1.5?'text-yellow-500':yearDSCR<2.0?'text-green-600':'text-blue-600'}`,children:[yearDSCR.toFixed(2),\"x\"]})]},yearIndex);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-3 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-700 mb-2\",children:\"5-Year Exit Value Scenarios:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Conservative:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(((_scenario$exitValueRa=scenario.exitValueRange)===null||_scenario$exitValueRa===void 0?void 0:_scenario$exitValueRa.conservative)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Expected:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[formatCurrency(((_scenario$exitValueRa2=scenario.exitValueRange)===null||_scenario$exitValueRa2===void 0?void 0:_scenario$exitValueRa2.expected)||0),\" \\uD83C\\uDFAF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Optimistic:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(((_scenario$exitValueRa3=scenario.exitValueRange)===null||_scenario$exitValueRa3===void 0?void 0:_scenario$exitValueRa3.optimistic)||0)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"5-Year Exit Value Range = Year 5 EBITDA \\xD7 Valuation Multiple \\xD7 Your Ownership %\\\\n\\\\nProjects potential business sale value in 5 years under different market scenarios. Includes cumulative cash flows received during ownership period.\\\\n\\\\nAssumptions:\\\\n\\u2022 Year 5 EBITDA: $721K (5% annual growth)\\\\n\\u2022 Your Ownership: 83%\\\\n\\u2022 Multiple Range: 3.0x (recession) to 4.5x (growth market)\\\\n\\\\nTotal Return = Exit Value + 5-Year Cumulative Cash Flows ($440K)\\\\n\\\\nConservative includes potential market downturns\\\\nExpected assumes current market conditions continue  \\\\nOptimistic reflects strong business performance and market growth\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Based on Year 5 EBITDA projections and market multiples\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-700 mb-2\",children:\"Stress Test Results:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Revenue -20%:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR=scenario.stressTestResults)===null||_scenario$stressTestR===void 0?void 0:_scenario$stressTestR.revenueStressROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR2=scenario.stressTestResults)===null||_scenario$stressTestR2===void 0?void 0:_scenario$stressTestR2.revenueStressROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR3=scenario.stressTestResults)===null||_scenario$stressTestR3===void 0?void 0:_scenario$stressTestR3.revenueStressROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[\"ROI = \",(((_scenario$stressTestR4=scenario.stressTestResults)===null||_scenario$stressTestR4===void 0?void 0:_scenario$stressTestR4.revenueStressROI)||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Margin -300bp:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR5=scenario.stressTestResults)===null||_scenario$stressTestR5===void 0?void 0:_scenario$stressTestR5.marginStressROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR6=scenario.stressTestResults)===null||_scenario$stressTestR6===void 0?void 0:_scenario$stressTestR6.marginStressROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR7=scenario.stressTestResults)===null||_scenario$stressTestR7===void 0?void 0:_scenario$stressTestR7.marginStressROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[\"ROI = \",(((_scenario$stressTestR8=scenario.stressTestResults)===null||_scenario$stressTestR8===void 0?void 0:_scenario$stressTestR8.marginStressROI)||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Interest +200bp:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR9=scenario.stressTestResults)===null||_scenario$stressTestR9===void 0?void 0:_scenario$stressTestR9.rateStressROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR0=scenario.stressTestResults)===null||_scenario$stressTestR0===void 0?void 0:_scenario$stressTestR0.rateStressROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR1=scenario.stressTestResults)===null||_scenario$stressTestR1===void 0?void 0:_scenario$stressTestR1.rateStressROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[\"ROI = \",(((_scenario$stressTestR10=scenario.stressTestResults)===null||_scenario$stressTestR10===void 0?void 0:_scenario$stressTestR10.rateStressROI)||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Minimum Scenario:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${getStressTestStatus((_scenario$stressTestR11=scenario.stressTestResults)===null||_scenario$stressTestR11===void 0?void 0:_scenario$stressTestR11.minROI).color==='#E74C3C'?'text-red-600':getStressTestStatus((_scenario$stressTestR12=scenario.stressTestResults)===null||_scenario$stressTestR12===void 0?void 0:_scenario$stressTestR12.minROI).color==='#F1C40F'?'text-yellow-500':getStressTestStatus((_scenario$stressTestR13=scenario.stressTestResults)===null||_scenario$stressTestR13===void 0?void 0:_scenario$stressTestR13.minROI).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:[(((_scenario$stressTestR14=scenario.stressTestResults)===null||_scenario$stressTestR14===void 0?void 0:_scenario$stressTestR14.minROI)||0).toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Stress Test Results = ROI Under Adverse Scenarios\\\\n\\\\nTests investment performance under various economic stress conditions to assess downside protection and resilience.\\\\n\\\\nTest Scenarios:\\\\n\\u2022 Revenue Decline: -20% from base case\\\\n\\u2022 Margin Compression: -300 basis points EBITDA margin\\\\n\\u2022 Interest Rate Rise: +200 basis points on variable debt\\\\n\\\\nMinimum ROI shows worst-case scenario performance\\\\nTarget: Maintain >7% ROI (market minimum) under stress\\\\n\\\\nStrong stress test results indicate robust investment with good downside protection\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Target: Maintain >7% ROI under stress\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-700 mb-2\",children:\"Growth Funding Capacity:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Available Capacity:\"}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ${getGrowthCapacityStatus(scenario.growthFundingCapacity).color==='#E74C3C'?'text-red-600':getGrowthCapacityStatus(scenario.growthFundingCapacity).color==='#F1C40F'?'text-yellow-500':getGrowthCapacityStatus(scenario.growthFundingCapacity).color==='#27AE60'?'text-green-600':'text-blue-600'}`,children:formatCurrency(scenario.growthFundingCapacity||0)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Growth Funding Capacity = Additional Sustainable Debt Capacity\\\\n\\\\nEstimates additional funding available for business growth, acquisitions, or expansion based on improved cash flows and debt capacity.\\\\n\\\\nCalculation Based On:\\\\n\\u2022 Improved DSCR from business growth\\\\n\\u2022 Conservative debt-to-EBITDA limits (<3.0x)\\\\n\\u2022 Projected Year 3+ cash flow performance\\\\n\\\\nUses Include:\\\\n\\u2022 Acquiring competitor businesses\\\\n\\u2022 Major expansion projects  \\\\n\\u2022 Equipment or technology investments\\\\n\\u2022 Working capital for growth\\\\n\\\\nHigher capacity indicates strong scalability potential and strategic flexibility\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Available for: Acquisition or expansion\"})})})]})]})]})]},index);})})]})]})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","Download","Settings","Info","VariableCard","CustomSlider","VARIABLES","DEFAULT_SCENARIO","calculateTotalCashRequired","calculateAnnualCashToPocket","calculateDSCR","calculateCashOnCashReturn","calculateEnhancedRiskScore","calculateIRR","calculateMOIC","calculatePaybackPeriod","calculateFiveYearProjections","calculateRiskAdjustedOwnership","calculateBusinessWACC","calculateBusinessEVA","verifyCalculations","calculateScenariosWithPriority","calculateTotalCashNeeded","allocateFundingByPriority","calculatePurchasePriceFinancing","calculateBusinessDebtService","calculatePersonalDebtService","calculatePriorityBasedWACC","calculatePriorityBasedOwnership","calculateCapitalUtilizationRate","getCapitalUtilizationStatus","calculateLeverageMultiplier","getLeverageMultiplierStatus","calculatePriceToRevenueRatio","getPriceToRevenueStatus","calculateEBITDAMargin","getEBITDAMarginStatus","calculateBusinessCashConversion","getCashConversionStatus","calculateRevenueToInvestmentEfficiency","getRevenueEfficiencyStatus","calculateRiskAdjustedReturn","getRiskAdjustedStatus","calculateIncomeReplacementRatio","getIncomeReplacementStatus","calculateWealthBuildingVelocity","getWealthVelocityStatus","calculateExitValueRange","calculateStressTestResults","getStressTestStatus","calculateGrowthFundingCapacity","getGrowthCapacityStatus","DEBUG_METRICS","logMetricCalculation","logAllMetricsSummary","jsx","_jsx","jsxs","_jsxs","App","fundingSources","setFundingSources","saved","localStorage","getItem","JSON","parse","taiwaneseLoan","amount","rate","term","enabled","type","description","houseEquity","sbaLoan","sellerFinancing","additionalInvestment","expectedReturn","personalCash","opportunityCost","variables","setVariables","savedVariables","setItem","stringify","validateScenario","scenario","errors","isNaN","targetRevenue","push","ebitda","purchasePrice","wacc","downPaymentNeeded","length","console","error","calculateLoanPayment","principal","termYears","monthlyRate","payments","Math","pow","calculateWACC","taxRate","arguments","undefined","totalCapital","weightedCost","Object","entries","forEach","_ref","key","source","costRate","keyParameters","totalAvailableCash","scenarios","name","map","_variables$sellerFina","_variables$revenueGro","netMargin","netProfitMargin","valuationMultiple","sellerFinancingPercent","revenueGrowthRate","sbaDownPaymentPercent","max","sbaDownPayment","sellerFinancingAmount","sbaLoanAmount","workingCapitalPercent","workingCapital","fees","totalDownPaymentNeeded","round","availableCash","cashSurplusDeficit","allResults","targetRevenues","scenarioNames","index","_scenario$businessDeb","_scenario$personalDeb","cashRequired","techInvestment","cashFlow","netProfitMarginPercent","purchaseFinancing","managementSalary","fiveYearProjections","revenueGrowthRatePercent","sbaInterestRate","sellerInterestRate","personalInvestmentBase","fundingAllocation","allocation","irr","p","moic","paybackPeriod","projections","currentRevenue","cumulativeCashFlow","year","sbaPayment","sellerPayment","techInvestmentAmortized","netCashFlow","revenue","group","yearData","log","groupEnd","totalInvestment","total","threeYearCashFlow","roi","debtServiceCoverage","businessDebtService","totalBusinessDebtService","cashOnCashReturn","riskScore","businessEBITDA","debtServiceComponents","calculation","yourNetAnnualGain","yourCashInvested","definition","businessCapitalInvested","businessEVA","nopat","capitalCharge","dealROI","businessCashFlow","personalCashInvested","validationErrors","totalCashNeeded","financing","downPayment","dscr","sbaLoanPrincipal","sbaMonthlyPayment","sbaAnnualPayment","sellerMonthlyPayment","sellerAnnualPayment","activeFundingSources","filter","_ref2","_","reduce","acc","_ref3","annualPayment","personalDebtService","taiwanesePayment","houseEquityPayment","totalFunding","totalAllocated","totalDebtService","totalPersonalDebtService","totalPersonalEquity","totalAdditionalEquity","ownershipPercentage","ownership","yourOwnership","personalCostOfCapital","businessFreeCashFlow","businessDSCR","businessWACC","personalCashFlow","personalNetCashFlow","ownerCashFlow","personalROI","ownerROI","ownerDistribution","ownershipDilution","investorOwnership","ownershipBreakdown","breakdown","capitalUtilizationRate","leverageMultiplier","priceToRevenueRatio","ebitdaMargin","businessCashConversion","revenueToInvestmentEfficiency","riskAdjustedReturn","incomeReplacementRatio","currentSalary","wealthBuildingVelocity","exitValueRange","stressTestResults","growthFundingCapacity","interpretation","yourROI","riskFreeRate","totalReturnMultiple","investmentPeriod","result","_result$wacc","_result$businessDSCR","_result$businessROA","_result$personalROI","_result$cashOnCashRet","formatCurrency","cashSurplus","toFixed","businessROA","handleFundingSourceChange","sourceKey","field","value","prev","handleVariableChange","variableKey","resetToDefaults","InfoTooltip","_ref4","formula","children","showTooltip","setShowTooltip","className","onMouseEnter","onMouseLeave","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","testCalculation","testScenario","calc","expectedRanges","onClick","_ref5","_ref6","replace","trim","onChange","min","step","unit","color","_ref7","variable","onValueChange","_scenario$fundingAllo","_scenario$fundingAllo2","_scenario$fundingAllo3","_scenario$fundingAllo4","_scenario$fundingAllo5","_scenario$fundingAllo6","_scenario$fundingAllo7","_scenario$fundingAllo8","_scenario$fundingAllo9","_scenario$fundingAllo0","_scenario$fundingAllo1","_scenario$fundingAllo10","_scenario$fundingAllo11","_scenario$fundingAllo12","downPaymentGap","totalBusinessDebt","debtToEbitdaRatio","sbaInterest","sellerInterest","totalInterest","interestCoverageRatio","Infinity","_scenario$exitValueRa","_scenario$exitValueRa2","_scenario$exitValueRa3","_scenario$stressTestR","_scenario$stressTestR2","_scenario$stressTestR3","_scenario$stressTestR4","_scenario$stressTestR5","_scenario$stressTestR6","_scenario$stressTestR7","_scenario$stressTestR8","_scenario$stressTestR9","_scenario$stressTestR0","_scenario$stressTestR1","_scenario$stressTestR10","_scenario$stressTestR11","_scenario$stressTestR12","_scenario$stressTestR13","_scenario$stressTestR14","yearIndex","yearEBITDA","yearBusinessFCF","yearOwnerDistribution","yearYourFCF","yearDSCR","conservative","expected","optimistic","revenueStressROI","marginStressROI","rateStressROI","minROI"],"sources":["/Users/juihanlin/Desktop/Biz Acquisition Calculator/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { Download, Settings, Info } from 'lucide-react';\nimport VariableCard from './components/VariableCard';\nimport CustomSlider from './components/CustomSlider';\nimport { VARIABLES, DEFAULT_SCENARIO } from './utils/variables';\nimport { \n  calculateTotalCashRequired, \n  calculateAnnualCashToPocket, \n  calculateDSCR,\n  calculateCashOnCashReturn,\n  calculateEnhancedRiskScore,\n  calculateIRR,\n  calculateMOIC,\n  calculatePaybackPeriod,\n  calculateFiveYearProjections,\n  calculateRiskAdjustedOwnership,\n  calculateBusinessWACC,\n  calculateBusinessEVA,\n  verifyCalculations,\n  calculateScenariosWithPriority,\n  calculateTotalCashNeeded,\n  allocateFundingByPriority,\n  calculatePurchasePriceFinancing,\n  calculateBusinessDebtService,\n  calculatePersonalDebtService,\n  calculatePriorityBasedWACC,\n  calculatePriorityBasedOwnership,\n  // New metrics calculations\n  calculateCapitalUtilizationRate,\n  getCapitalUtilizationStatus,\n  calculateLeverageMultiplier,\n  getLeverageMultiplierStatus,\n  calculatePriceToRevenueRatio,\n  getPriceToRevenueStatus,\n  calculateEBITDAMargin,\n  getEBITDAMarginStatus,\n  calculateBusinessCashConversion,\n  getCashConversionStatus,\n  calculateRevenueToInvestmentEfficiency,\n  getRevenueEfficiencyStatus,\n  calculateRiskAdjustedReturn,\n  getRiskAdjustedStatus,\n  calculateIncomeReplacementRatio,\n  getIncomeReplacementStatus,\n  calculateWealthBuildingVelocity,\n  getWealthVelocityStatus,\n  calculateExitValueRange,\n  calculateStressTestResults,\n  getStressTestStatus,\n  calculateGrowthFundingCapacity,\n  getGrowthCapacityStatus,\n  // Debug logging functions\n  DEBUG_METRICS,\n  logMetricCalculation,\n  logAllMetricsSummary\n} from './utils/calculations';\n\nconst App = () => {\n  // NEW FUNDING SOURCES STATE\n  const [fundingSources, setFundingSources] = useState(() => {\n    const saved = localStorage.getItem('fundingSources');\n    return saved ? JSON.parse(saved) : {\n      taiwaneseLoan: { \n        amount: 300000, \n        rate: 0.028, \n        term: 10, \n        enabled: true,\n        type: 'debt',\n        description: 'USD loan from Taiwan'\n      },\n      houseEquity: { \n        amount: 98273, \n        rate: 0.08, \n        term: 15, \n        enabled: true,\n        type: 'debt',\n        description: 'Home equity loan (tax deductible for business use)'\n      },\n      sbaLoan: { \n        amount: 0, \n        rate: 0.115, \n        term: 10, \n        enabled: false,\n        type: 'debt',\n        description: 'SBA 7(a) business acquisition loan'\n      },\n      sellerFinancing: { \n        amount: 0, \n        rate: 0.08, \n        term: 5, \n        enabled: false,\n        type: 'debt',\n        description: 'Seller note (subordinated)'\n      },\n      additionalInvestment: { \n        amount: 50000, \n        expectedReturn: 0.15, \n        enabled: true,\n        type: 'equity',\n        description: 'Outside investor equity (dilutes ownership)'\n      },\n      personalCash: { \n        amount: 50000, \n        opportunityCost: 0.08, \n        enabled: true,\n        type: 'equity',\n        description: 'Personal cash investment'\n      }\n    };\n  });\n\n  const [variables, setVariables] = useState(() => {\n    const saved = localStorage.getItem('variables');\n    const savedVariables = saved ? JSON.parse(saved) : DEFAULT_SCENARIO.variables;\n    \n    // Ensure new variables are present (for backward compatibility)\n    return {\n      ...DEFAULT_SCENARIO.variables,\n      ...savedVariables\n    };\n  });\n\n  // Save state to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('fundingSources', JSON.stringify(fundingSources));\n  }, [fundingSources]);\n\n  useEffect(() => {\n    localStorage.setItem('variables', JSON.stringify(variables));\n  }, [variables]);\n\n  // Validation function to catch calculation errors - MUST BE DEFINED BEFORE ANY USEMEMO\n  const validateScenario = (scenario) => {\n    const errors = [];\n    \n    if (isNaN(scenario.targetRevenue) || scenario.targetRevenue <= 0) {\n      errors.push('Business revenue is invalid');\n    }\n    \n    if (isNaN(scenario.ebitda) || scenario.ebitda <= 0) {\n      errors.push('EBITDA calculation is invalid');\n    }\n    \n    if (isNaN(scenario.purchasePrice) || scenario.purchasePrice <= 0) {\n      errors.push('Purchase price calculation is invalid');\n    }\n    \n    if (scenario.wacc > 50) {\n      errors.push(`WACC too high: ${scenario.wacc}% (should be 7-12%)`);\n    }\n    \n    if (scenario.downPaymentNeeded < scenario.purchasePrice * 0.15) {\n      errors.push('Down payment unrealistically low');\n    }\n    \n    if (errors.length > 0) {\n      console.error('❌ Calculation Errors:', errors);\n    } else {\n  \n    }\n    \n    return errors;\n  };\n\n  // NEW CALCULATION FUNCTIONS\n  // Calculate monthly payment for any loan\n  const calculateLoanPayment = (principal, rate, termYears) => {\n    if (principal <= 0 || rate <= 0) return 0;\n    const monthlyRate = rate / 12;\n    const payments = termYears * 12;\n    return (principal * monthlyRate * Math.pow(1 + monthlyRate, payments)) / \n           (Math.pow(1 + monthlyRate, payments) - 1) * 12; // Return annual payment\n  };\n\n  // Fix WACC calculation - use decimal rates, not percentages!\n  const calculateWACC = (fundingSources, taxRate = 0.25) => {\n    let totalCapital = 0;\n    let weightedCost = 0;\n    \n    // Include only enabled funding sources with amounts\n    Object.entries(fundingSources).forEach(([key, source]) => {\n      if (source.enabled && source.amount > 0) {\n        totalCapital += source.amount;\n        \n        // CRITICAL: Use decimal rates, not percentages!\n        let costRate;\n        if (key === 'taiwaneseLoan') costRate = 0.028; // 2.8% (personal loan)\n        else if (key === 'houseEquity') costRate = 0.08; // 8% (personal loan)\n        else if (key === 'sbaLoan') costRate = 0.115 * (1 - taxRate); // 11.5% after tax (business deductible)\n        else if (key === 'sellerFinancing') costRate = 0.08 * (1 - taxRate * 0.5); // 8% after partial tax (less deductible)\n        else if (key === 'additionalInvestment') costRate = 0.20; // 20% equity cost (investor expected return)\n        else if (key === 'personalCash') costRate = 0.08; // 8% opportunity cost\n        else costRate = 0.08; // Default\n        \n        weightedCost += source.amount * costRate;\n      }\n    });\n    \n    const wacc = totalCapital > 0 ? (weightedCost / totalCapital) : 0;\n    return wacc * 100; // Convert to percentage for display\n  };\n\n\n\n\n\n\n\n  // Calculate key parameters for three scenarios\n  const keyParameters = useMemo(() => {\n    // Fix available cash calculation to only include specific funding sources\n    const totalAvailableCash = (\n      (fundingSources.taiwaneseLoan.enabled ? fundingSources.taiwaneseLoan.amount : 0) +\n      (fundingSources.houseEquity.enabled ? fundingSources.houseEquity.amount : 0) +\n      (fundingSources.additionalInvestment.enabled ? fundingSources.additionalInvestment.amount : 0) +\n      (fundingSources.personalCash.enabled ? fundingSources.personalCash.amount : 0)\n    );\n    \n    const scenarios = [\n      { targetRevenue: 2000000, name: \"Small Business\" },\n      { targetRevenue: 2500000, name: \"Target Business\" },\n      { targetRevenue: 3000000, name: \"Large Business\" }\n    ];\n\n    return scenarios.map(scenario => {\n      // Step 1: Calculate EBITDA using current variable values (not mean)\n      const netMargin = variables.netProfitMargin || 25;\n      const valuationMultiple = variables.valuationMultiple || 4;\n      const sellerFinancingPercent = variables.sellerFinancing ?? 20;\n      const revenueGrowthRate = variables.revenueGrowthRate ?? 8;\n      const sbaDownPaymentPercent = Math.max(variables.sbaDownPayment || 12, 10);\n      \n      const ebitda = scenario.targetRevenue * (netMargin / 100);\n      const purchasePrice = ebitda * valuationMultiple;\n      \n      // Step 2: Calculate proper down payment structure\n      // CORRECTED LOGIC: Calculate seller financing first, then SBA loan, then down payment\n      const sellerFinancingAmount = purchasePrice * (sellerFinancingPercent / 100);\n      const sbaLoanAmount = purchasePrice - sellerFinancingAmount;\n      const sbaDownPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n      \n      // Note: Total financing may exceed purchase price if both SBA and seller financing are used\n      // This is typical in SBA deals where seller financing is additional to SBA loan\n      \n      // Step 3: Add working capital and fees\n      const workingCapitalPercent = variables.workingCapital || 10;\n      const workingCapital = scenario.targetRevenue * (workingCapitalPercent / 100);\n      const fees = purchasePrice * 0.025; // 2.5% total fees\n      \n      const totalDownPaymentNeeded = sbaDownPayment + workingCapital + fees;\n      \n\n      \n      return {\n        ...scenario,\n        ebitda: Math.round(ebitda),\n        purchasePrice: Math.round(purchasePrice),\n        availableCash: totalAvailableCash,\n        downPaymentNeeded: Math.round(totalDownPaymentNeeded),\n        sbaDownPayment: Math.round(sbaDownPayment),\n        sbaLoanAmount: Math.round(sbaLoanAmount),\n        sellerFinancingAmount: Math.round(sellerFinancingAmount),\n        workingCapital: Math.round(workingCapital),\n        fees: Math.round(fees),\n        cashSurplusDeficit: Math.round(totalAvailableCash - totalDownPaymentNeeded)\n      };\n    });\n  }, [fundingSources, variables]);\n\n  // Calculate results for all three scenarios with priority-based funding\n  const allResults = useMemo(() => {\n    const targetRevenues = [2000000, 2500000, 3000000];\n    const scenarioNames = [\"Small Business\", \"Target Business\", \"Large Business\"];\n    \n    return calculateScenariosWithPriority(targetRevenues, variables, fundingSources).map((scenario, index) => {\n      // Calculate additional metrics using existing functions\n      const cashRequired = calculateTotalCashRequired({\n        purchasePrice: scenario.purchasePrice,\n        sbaDownPaymentPercent: variables.sbaDownPayment,\n        sellerFinancingPercent: variables.sellerFinancing,\n        workingCapitalPercent: variables.workingCapital,\n        targetRevenue: scenario.targetRevenue,\n        techInvestment: variables.techInvestment\n      });\n\n      const cashFlow = calculateAnnualCashToPocket({\n        targetRevenue: scenario.targetRevenue,\n        netProfitMarginPercent: variables.netProfitMargin,\n        sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n        sellerFinancingAmount: scenario.purchaseFinancing.sellerFinancingAmount,\n        managementSalary: variables.managementSalary,\n        techInvestment: variables.techInvestment\n      });\n\n      // Calculate 5-year projections for advanced metrics\n      const fiveYearProjections = calculateFiveYearProjections({\n        targetRevenue: scenario.targetRevenue,\n        revenueGrowthRatePercent: variables.revenueGrowthRate,\n        netProfitMarginPercent: variables.netProfitMargin,\n        sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n        sellerFinancingAmount: scenario.purchaseFinancing.sellerFinancingAmount,\n        managementSalary: variables.managementSalary,\n        techInvestment: variables.techInvestment,\n        sbaInterestRate: variables.sbaInterestRate,\n        sellerInterestRate: variables.sellerInterestRate\n      });\n\n      // Calculate advanced return metrics using personal investment base\n      const personalInvestmentBase = \n        scenario.fundingAllocation.allocation.personalCash + \n        scenario.fundingAllocation.allocation.taiwaneseLoan + \n        scenario.fundingAllocation.allocation.houseEquity;\n      const irr = calculateIRR(personalInvestmentBase, fiveYearProjections.map(p => p.cashFlow));\n      const moic = calculateMOIC(personalInvestmentBase, fiveYearProjections);\n      const paybackPeriod = calculatePaybackPeriod(personalInvestmentBase, fiveYearProjections);\n\n      // Calculate 3-year projections\n      const projections = [];\n      let currentRevenue = scenario.targetRevenue;\n      let cumulativeCashFlow = 0;\n\n      for (let year = 1; year <= 3; year++) {\n        const ebitda = currentRevenue * (variables.netProfitMargin / 100);\n        const sbaPayment = calculateLoanPayment(scenario.purchaseFinancing.sbaLoanAmount, variables.sbaInterestRate / 100, 10);\n        const sellerPayment = calculateLoanPayment(scenario.purchaseFinancing.sellerFinancingAmount, variables.sellerInterestRate / 100, 5);\n        const techInvestmentAmortized = variables.techInvestment / 3;\n\n        const netCashFlow = ebitda - sbaPayment - sellerPayment - variables.managementSalary - techInvestmentAmortized;\n        cumulativeCashFlow += netCashFlow;\n\n        projections.push({\n          year,\n          revenue: currentRevenue,\n          ebitda,\n          netCashFlow,\n          cumulativeCashFlow\n        });\n\n        currentRevenue *= (1 + variables.revenueGrowthRate / 100);\n      }\n      \n      // Log 3-Year Projections\n      if (DEBUG_METRICS) {\n        console.group(\"📊 Growth Projections - 3-Year Cash Flow\");\n        \n        for (let year = 1; year <= 3; year++) {\n          const yearData = projections[year - 1];\n          console.log(`📅 YEAR ${year}:`);\n          console.log(`  Revenue: ${yearData.revenue}`);\n          console.log(`  EBITDA: ${yearData.ebitda}`);\n          console.log(`  Net Cash Flow: ${yearData.netCashFlow}`);\n          console.log(`  Cumulative Cash Flow: ${yearData.cumulativeCashFlow}`);\n          console.log(`  Growth Rate: Revenue +${variables.revenueGrowthRate}%`);\n          console.log(`---`);\n        }\n        \n        console.log(`📋 ASSUMPTIONS:`);\n        console.log(`  Annual Revenue Growth: ${variables.revenueGrowthRate}%`);\n        console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);\n        console.log(`  Management Salary: ${variables.managementSalary}`);\n        console.log(`  Tech Investment: ${variables.techInvestment} (amortized over 3 years)`);\n        \n        console.groupEnd();\n      }\n\n      // Calculate ROI\n      const totalInvestment = cashRequired.total;\n      const threeYearCashFlow = projections[2].cumulativeCashFlow;\n      const roi = ((threeYearCashFlow - totalInvestment) / totalInvestment) * 100;\n\n      // Calculate additional metrics\n      const debtServiceCoverage = scenario.businessDebtService.totalBusinessDebtService > 0 ? \n        scenario.ebitda / scenario.businessDebtService.totalBusinessDebtService : 0;\n      const cashOnCashReturn = calculateCashOnCashReturn(cashFlow.netCashFlow, personalInvestmentBase);\n      const riskScore = calculateEnhancedRiskScore(debtServiceCoverage, cashOnCashReturn, variables.sellerFinancing);\n      \n      // Log Business DSCR calculation\n      if (DEBUG_METRICS) {\n        logMetricCalculation(\n          \"Business Health\",\n          \"Business DSCR\",\n          {\n            businessEBITDA: scenario.ebitda,\n            businessDebtService: scenario.businessDebtService.totalBusinessDebtService\n          },\n          \"Business DSCR = Business EBITDA ÷ Business Debt Service\",\n          debtServiceCoverage,\n          {\n            debtServiceComponents: \"SBA + Seller Financing only (excludes personal debt)\",\n            calculation: `${scenario.ebitda} ÷ ${scenario.businessDebtService.totalBusinessDebtService} = ${debtServiceCoverage}x`\n          }\n        );\n      }\n      \n      // Log Cash-on-Cash Return calculation\n      if (DEBUG_METRICS) {\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"Cash-on-Cash Return\",\n          {\n            yourNetAnnualGain: cashFlow.netCashFlow,\n            yourCashInvested: personalInvestmentBase\n          },\n          \"Cash-on-Cash = Annual Cash Flow ÷ Your Cash Invested\",\n          cashOnCashReturn,\n          {\n            definition: \"Return on actual cash invested (excluding leverage)\",\n            calculation: `${cashFlow.netCashFlow} ÷ ${personalInvestmentBase} = ${cashOnCashReturn}%`\n          }\n        );\n      }\n\n      // Business capital invested\n      const businessCapitalInvested = scenario.purchasePrice + \n        (scenario.targetRevenue * variables.workingCapital / 100) + \n        (scenario.purchasePrice * 0.015) + // Due diligence\n        (scenario.purchasePrice * 0.008); // Professional fees\n\n      // Business EVA\n      const businessEVA = calculateBusinessEVA(scenario.ebitda, businessCapitalInvested, scenario.wacc / 100);\n      \n      // Log Business EVA calculation\n      if (DEBUG_METRICS) {\n        logMetricCalculation(\n          \"Business Health\",\n          \"Economic Value Added\",\n          {\n            businessEBITDA: scenario.ebitda,\n            taxRate: 0.25,\n            businessCapitalInvested,\n            wacc: scenario.wacc\n          },\n          \"EVA = NOPAT - Capital Charge = EBITDA × (1 - Tax Rate) - (Capital × WACC)\",\n          businessEVA,\n          {\n            nopat: scenario.ebitda * (1 - 0.25),\n            capitalCharge: businessCapitalInvested * (scenario.wacc / 100),\n            calculation: `${scenario.ebitda} × (1 - 0.25) - (${businessCapitalInvested} × ${scenario.wacc}%) = ${businessEVA}`\n          }\n        );\n      }\n\n      // Deal ROI (business level)\n      const dealROI = scenario.purchasePrice > 0 ? (scenario.businessCashFlow / scenario.purchasePrice) * 100 : 0;\n\n      // Personal cash invested\n      const personalCashInvested = \n        scenario.fundingAllocation.allocation.personalCash + \n        scenario.fundingAllocation.allocation.taiwaneseLoan + \n        scenario.fundingAllocation.allocation.houseEquity;\n\n      // Validate calculations before returning\n      const validationErrors = validateScenario({\n        targetRevenue: scenario.targetRevenue,\n        ebitda: scenario.ebitda,\n        purchasePrice: scenario.purchasePrice,\n        wacc: scenario.wacc,\n        downPaymentNeeded: scenario.totalCashNeeded\n      });\n\n      return {\n        scenario: scenarioNames[index],\n        cashRequired,\n        cashFlow,\n        financing: {\n          purchasePrice: scenario.purchasePrice,\n          sellerFinancing: scenario.purchaseFinancing.sellerFinancingAmount,\n          sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n          downPayment: scenario.purchaseFinancing.sbaDownPayment\n        },\n        projections,\n        roi,\n        // Enhanced metrics\n        debtServiceCoverage,\n        dscr: debtServiceCoverage,\n        cashOnCashReturn,\n        riskScore,\n        sbaLoanPrincipal: scenario.purchaseFinancing.sbaLoanPrincipal,\n        sbaMonthlyPayment: scenario.businessDebtService.sbaAnnualPayment / 12,\n        sbaAnnualPayment: scenario.businessDebtService.sbaAnnualPayment,\n        sellerMonthlyPayment: scenario.businessDebtService.sellerAnnualPayment / 12,\n        sellerAnnualPayment: scenario.businessDebtService.sellerAnnualPayment,\n        irr,\n        moic,\n        paybackPeriod,\n        fiveYearProjections,\n        \n        // FUNDING STRUCTURE WITH PRIORITY ALLOCATION\n        activeFundingSources: Object.entries(scenario.fundingAllocation.allocation)\n          .filter(([_, amount]) => amount > 0)\n          .reduce((acc, [key, amount]) => {\n            acc[key] = {\n              amount,\n              enabled: true,\n              type: key === 'additionalInvestment' || key === 'personalCash' ? 'equity' : 'debt',\n              rate: key === 'taiwaneseLoan' ? 0.028 : \n                    key === 'houseEquity' ? 0.08 : \n                    key === 'sbaLoan' ? 0.115 : \n                    key === 'sellerFinancing' ? 0.08 : 0,\n              term: key === 'taiwaneseLoan' ? 10 : \n                     key === 'houseEquity' ? 15 : \n                     key === 'sbaLoan' ? 10 : \n                     key === 'sellerFinancing' ? 5 : 0,\n              annualPayment: key === 'taiwaneseLoan' ? scenario.personalDebtService.taiwanesePayment :\n                            key === 'houseEquity' ? scenario.personalDebtService.houseEquityPayment :\n                            key === 'sbaLoan' ? scenario.businessDebtService.sbaAnnualPayment :\n                            key === 'sellerFinancing' ? scenario.businessDebtService.sellerAnnualPayment : 0\n            };\n            return acc;\n          }, {}),\n        totalFunding: scenario.fundingAllocation.totalAllocated,\n        totalDebtService: (scenario.businessDebtService?.totalBusinessDebtService || 0) + (scenario.personalDebtService?.totalPersonalDebtService || 0),\n        totalPersonalEquity: scenario.fundingAllocation.allocation.personalCash + scenario.fundingAllocation.allocation.taiwaneseLoan + scenario.fundingAllocation.allocation.houseEquity,\n        totalAdditionalEquity: scenario.fundingAllocation.allocation.additionalInvestment,\n        ownershipPercentage: scenario.ownership.yourOwnership,\n        wacc: scenario.wacc,\n        personalCostOfCapital: scenario.personalCostOfCapital,\n        \n        // BUSINESS-LEVEL METRICS\n        businessFreeCashFlow: Math.round(scenario.businessCashFlow),\n        businessDebtService: Math.round(scenario.businessDebtService.totalBusinessDebtService),\n        businessDSCR: scenario.businessDebtService.totalBusinessDebtService > 0 ? scenario.ebitda / scenario.businessDebtService.totalBusinessDebtService : 0,\n        businessEVA: Math.round(businessEVA),\n        businessWACC: scenario.wacc,\n        businessCapitalInvested: Math.round(businessCapitalInvested),\n        dealROI: dealROI,\n        \n        // PERSONAL-LEVEL METRICS\n        personalCashFlow: Math.round(scenario.personalNetCashFlow),\n        ownerCashFlow: Math.round(scenario.personalNetCashFlow),\n        personalROI: scenario.personalROI,\n        ownerROI: scenario.personalROI,\n        personalDebtService: Math.round(scenario.personalDebtService.totalPersonalDebtService),\n        personalCashInvested: Math.round(personalCashInvested),\n        ownerDistribution: Math.round(scenario.ownerDistribution),\n        ownershipDilution: scenario.ownership.investorOwnership * 100,\n        investorOwnership: scenario.ownership.investorOwnership,\n        \n        // OWNERSHIP BREAKDOWN\n        ownershipBreakdown: scenario.ownership.breakdown,\n        \n        // VALIDATION\n        validationErrors,\n        \n        // PRIORITY ALLOCATION DATA\n        fundingAllocation: scenario.fundingAllocation,\n        purchaseFinancing: scenario.purchaseFinancing,\n        businessDebtService: scenario.businessDebtService,\n        personalDebtService: scenario.personalDebtService,\n        ownership: scenario.ownership,\n        businessCashFlow: scenario.businessCashFlow,\n        ownerDistribution: scenario.ownerDistribution,\n        personalNetCashFlow: scenario.personalNetCashFlow,\n        targetRevenue: scenario.targetRevenue,\n        ebitda: scenario.ebitda,\n        purchasePrice: scenario.purchasePrice,\n        totalCashNeeded: scenario.totalCashNeeded,\n        \n        // NEW METRICS CALCULATIONS\n        // Section 1: Deal Structure & Financing\n        capitalUtilizationRate: calculateCapitalUtilizationRate(scenario.fundingAllocation.totalAllocated, variables.availableCash || 750000),\n        leverageMultiplier: calculateLeverageMultiplier(personalCashInvested, fundingSources.personalCash.amount),\n        priceToRevenueRatio: calculatePriceToRevenueRatio(scenario.purchasePrice, scenario.targetRevenue),\n        \n        // Section 2: Business Health Metrics\n        ebitdaMargin: calculateEBITDAMargin(scenario.ebitda, scenario.targetRevenue),\n        businessCashConversion: calculateBusinessCashConversion(scenario.businessCashFlow, scenario.ebitda),\n        revenueToInvestmentEfficiency: calculateRevenueToInvestmentEfficiency(scenario.targetRevenue, personalCashInvested),\n        \n        // Section 3: Personal Investment Returns\n        riskAdjustedReturn: calculateRiskAdjustedReturn(scenario.personalROI, 4.5, riskScore),\n        incomeReplacementRatio: calculateIncomeReplacementRatio(scenario.personalNetCashFlow, variables.currentSalary || 100000),\n        wealthBuildingVelocity: calculateWealthBuildingVelocity(5.0, 5), // Assuming 5x total return over 5 years\n        \n        // Section 4: Growth & Risk Projections\n        exitValueRange: calculateExitValueRange(\n          scenario.ebitda * Math.pow(1 + (variables.revenueGrowthRate || 5) / 100, 5), // Year 5 EBITDA\n          scenario.ownership.yourOwnership\n        ),\n        stressTestResults: calculateStressTestResults(scenario.personalROI),\n        growthFundingCapacity: calculateGrowthFundingCapacity(\n          scenario.ebitda * 3, // Max sustainable debt (3x EBITDA)\n          scenario.businessDebtService.totalBusinessDebtService + scenario.personalDebtService.totalPersonalDebtService,\n          scenario.businessCashFlow * Math.pow(1 + (variables.revenueGrowthRate || 5) / 100, 3), // Year 3 cash flow\n          calculateLeverageMultiplier(personalCashInvested, fundingSources.personalCash.amount)\n        )\n      };\n      \n      // Log Leverage Multiplier calculation\n      if (DEBUG_METRICS) {\n        const leverageMultiplier = calculateLeverageMultiplier(personalCashInvested, fundingSources.personalCash.amount);\n        logMetricCalculation(\n          \"Deal Structure\",\n          \"Leverage Multiplier\",\n          {\n            totalInvestment: personalCashInvested,\n            personalCashInvested: fundingSources.personalCash.amount\n          },\n          \"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\",\n          leverageMultiplier,\n          {\n            interpretation: leverageMultiplier >= 8 ? \"Excellent leverage\" : leverageMultiplier >= 5 ? \"Good leverage\" : leverageMultiplier >= 3 ? \"Fair leverage\" : \"Poor leverage\",\n            calculation: `${personalCashInvested} ÷ ${fundingSources.personalCash.amount} = ${leverageMultiplier}x`\n          }\n        );\n      }\n      \n      // Log Risk-Adjusted Return calculation\n      if (DEBUG_METRICS) {\n        const riskAdjustedReturn = calculateRiskAdjustedReturn(scenario.personalROI, 4.5, riskScore);\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"Risk-Adjusted Return\",\n          {\n            yourROI: scenario.personalROI,\n            riskFreeRate: 4.5,\n            riskScore\n          },\n          \"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\",\n          riskAdjustedReturn,\n          {\n            interpretation: riskAdjustedReturn >= 1.5 ? \"Excellent risk-adjusted return\" : riskAdjustedReturn >= 1.0 ? \"Good risk-adjusted return\" : riskAdjustedReturn >= 0.5 ? \"Fair risk-adjusted return\" : \"Poor risk-adjusted return\",\n            calculation: `(${scenario.personalROI} - 4.5) ÷ ${riskScore} = ${riskAdjustedReturn}`\n          }\n        );\n      }\n      \n      // Log W-2 Replacement calculation\n      if (DEBUG_METRICS) {\n        const incomeReplacementRatio = calculateIncomeReplacementRatio(scenario.personalNetCashFlow, variables.currentSalary || 100000);\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"W-2 Replacement\",\n          {\n            yourNetAnnualGain: scenario.personalNetCashFlow,\n            currentSalary: variables.currentSalary || 100000\n          },\n          \"W-2 Replacement = (Your Net Annual Gain ÷ Current Salary) × 100\",\n          incomeReplacementRatio,\n          {\n            interpretation: incomeReplacementRatio >= 120 ? \"Excellent replacement\" : incomeReplacementRatio >= 80 ? \"Good replacement\" : incomeReplacementRatio >= 40 ? \"Fair replacement\" : \"Poor replacement\",\n            calculation: `(${scenario.personalNetCashFlow} ÷ ${variables.currentSalary || 100000}) × 100 = ${incomeReplacementRatio}%`\n          }\n        );\n      }\n      \n      // Log Wealth Velocity calculation\n      if (DEBUG_METRICS) {\n        const wealthBuildingVelocity = calculateWealthBuildingVelocity(5.0, 5);\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"Wealth Velocity\",\n          {\n            totalReturnMultiple: 5.0,\n            investmentPeriod: 5\n          },\n          \"Wealth Velocity = Annual wealth creation rate from total return multiple\",\n          wealthBuildingVelocity,\n          {\n            interpretation: wealthBuildingVelocity >= 80 ? \"Excellent velocity\" : wealthBuildingVelocity >= 40 ? \"Good velocity\" : wealthBuildingVelocity >= 20 ? \"Fair velocity\" : \"Poor velocity\",\n            calculation: `Annual wealth creation from 5x return over 5 years = ${wealthBuildingVelocity}%`\n          }\n        );\n      }\n    });\n    \n    // Log comprehensive summary for all scenarios\n    if (DEBUG_METRICS) {\n      console.group(\"📊 COMPREHENSIVE DASHBOARD SUMMARY\");\n      console.log(\"🎯 SCENARIOS ANALYZED:\", allResults.length);\n      \n      allResults.forEach((result, index) => {\n        console.group(`📋 SCENARIO ${index + 1}: ${result.scenario}`);\n        console.log(\"🏢 DEAL STRUCTURE:\");\n        console.log(`  Purchase Price: ${formatCurrency(result.purchasePrice)}`);\n        console.log(`  Available Cash: ${formatCurrency(result.availableCash || 750000)}`);\n        console.log(`  Cash Surplus: ${formatCurrency(result.cashSurplus || 0)}`);\n        console.log(`  WACC: ${result.wacc?.toFixed(2) || 0}%`);\n        \n        console.log(\"📈 BUSINESS HEALTH:\");\n        console.log(`  DSCR: ${result.businessDSCR?.toFixed(2) || 0}x`);\n        console.log(`  ROA: ${result.businessROA?.toFixed(2) || 0}%`);\n        console.log(`  EVA: ${formatCurrency(result.businessEVA || 0)}`);\n        \n        console.log(\"💰 PERSONAL RETURNS:\");\n        console.log(`  Your ROI: ${result.personalROI?.toFixed(2) || 0}%`);\n        console.log(`  Cash-on-Cash: ${result.cashOnCashReturn?.toFixed(2) || 0}%`);\n        console.log(`  Payback: ${result.paybackPeriod || '>5 years'}`);\n        \n        console.log(\"📊 KEY ASSUMPTIONS:\");\n        console.log(`  Target Revenue: ${formatCurrency(result.targetRevenue)}`);\n        console.log(`  Net Profit Margin: ${variables.netProfitMargin}%`);\n        console.log(`  Valuation Multiple: ${variables.valuationMultiple}x`);\n        console.log(`  Revenue Growth: ${variables.revenueGrowthRate}%`);\n        console.log(`  Working Capital %: ${variables.workingCapital}%`);\n        console.log(`  Management Salary: ${formatCurrency(variables.managementSalary)}`);\n        console.groupEnd();\n      });\n      \n      console.groupEnd();\n    }\n  }, [variables, fundingSources]);\n\n  const handleFundingSourceChange = useCallback((sourceKey, field, value) => {\n    setFundingSources(prev => ({\n      ...prev,\n      [sourceKey]: { ...prev[sourceKey], [field]: value }\n    }));\n  }, []);\n\n  const handleVariableChange = useCallback((variableKey, value) => {\n    setVariables(prev => ({ ...prev, [variableKey]: value }));\n  }, []);\n\n  const resetToDefaults = useCallback(() => {\n    setFundingSources({\n      taiwaneseLoan: { \n        amount: 300000, \n        rate: 0.028, \n        term: 10, \n        enabled: true,\n        type: 'debt',\n        description: 'USD loan from Taiwan'\n      },\n      houseEquity: { \n        amount: 98273, \n        rate: 0.08, \n        term: 15, \n        enabled: true,\n        type: 'debt',\n        description: 'Home equity loan (tax deductible for business use)'\n      },\n      sbaLoan: { \n        amount: 0, \n        rate: 0.115, \n        term: 10, \n        enabled: false,\n        type: 'debt',\n        description: 'SBA 7(a) business acquisition loan'\n      },\n      sellerFinancing: { \n        amount: 0, \n        rate: 0.08, \n        term: 5, \n        enabled: false,\n        type: 'debt',\n        description: 'Seller note (subordinated)'\n      },\n      additionalInvestment: { \n        amount: 50000, \n        expectedReturn: 0.15, \n        enabled: true,\n        type: 'equity',\n        description: 'Outside investor equity (dilutes ownership)'\n      },\n      personalCash: { \n        amount: 50000, \n        opportunityCost: 0.08, \n        enabled: true,\n        type: 'equity',\n        description: 'Personal cash investment'\n      }\n    });\n    setVariables(DEFAULT_SCENARIO.variables);\n  }, []);\n\n  // Info Tooltip Component\n  const InfoTooltip = ({ formula, children }) => {\n    const [showTooltip, setShowTooltip] = useState(false);\n    \n    return (\n      <div className=\"relative inline-block\">\n        <div \n          className=\"inline-flex items-center gap-1 cursor-help\"\n          onMouseEnter={() => setShowTooltip(true)}\n          onMouseLeave={() => setShowTooltip(false)}\n        >\n          {children}\n          {!children && <Info className=\"w-3 h-3 text-gray-400 hover:text-gray-600\" />}\n        </div>\n        {showTooltip && (\n          <div className=\"absolute z-50 top-full left-1/2 transform -translate-x-1/2 mt-2 px-4 py-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg max-w-md\">\n            <div className=\"font-medium mb-2\">Description:</div>\n            <div className=\"whitespace-pre-wrap leading-relaxed\">{formula}</div>\n            <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900\"></div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n\n\n  // Test calculation to verify formulas\n  const testCalculation = useCallback(() => {\n    const testScenario = {\n      targetRevenue: 2500000,\n      netProfitMargin: 25,\n      valuationMultiple: 4,\n      sbaLoanAmount: 1500000,\n      sellerFinancingAmount: 500000,\n      personalCash: 550000,\n      additionalInvestment: 100000\n    };\n    \n    const result = verifyCalculations(testScenario);\n    \n    // Verify results are in expected ranges\n    const { testScenario: calc, expectedRanges } = result;\n    \n    return result;\n  }, []);\n\n  // Run test calculation on component mount\n  useEffect(() => {\n    testCalculation();\n  }, [testCalculation]);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"w-full px-6\">\n          <div className=\"flex justify-between items-center py-4\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Business Acquisition Calculator</h1>\n              <p className=\"text-sm text-gray-600 mt-1\">Interactive tool for evaluating acquisition scenarios</p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={resetToDefaults}\n                className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <Settings className=\"w-4 h-4\" />\n                Reset\n              </button>\n              <button className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\">\n                <Download className=\"w-4 h-4\" />\n                Export\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Two Panel Layout */}\n      <div className=\"flex h-screen\">\n        {/* Left Panel - Controls */}\n        <div className=\"w-2/5 bg-gray-50 p-6 overflow-y-auto\">\n          {/* Funding Sources Configuration */}\n          <div className=\"mb-8\">\n            <div className=\"mb-4\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Funding Sources Configuration</h2>\n            </div>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {Object.entries(fundingSources).filter(([key, source]) => key !== 'sbaLoan' && key !== 'sellerFinancing').map(([key, source]) => (\n                <div key={key} className=\"card p-3\">\n                  <div className=\"mb-1\">\n                    <div className=\"flex items-center gap-1\">\n                      <h3 className=\"text-sm font-semibold text-gray-900\">\n                        {key === 'houseEquity' ? 'Home Equity' : \n                         key === 'sbaLoan' ? 'SBA Loan' : \n                         key === 'personalCash' ? 'Personal Cash' :\n                         key === 'additionalInvestment' ? 'Additional Investment' :\n                         key === 'taiwaneseLoan' ? 'Taiwanese Loan' :\n                         key.replace(/([A-Z])/g, ' $1').trim()}\n                      </h3>\n                      <InfoTooltip formula={source.description}>\n                        <Info className=\"w-3 h-3 text-gray-400 hover:text-gray-600\" />\n                      </InfoTooltip>\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-1\">\n                    {/* Current Value Display */}\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <span className=\"text-xs font-medium text-gray-700\">Current: </span>\n                        <span className=\"text-sm font-semibold text-gray-900\">\n                          {formatCurrency(source.amount)}\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <CustomSlider\n                        value={source.amount}\n                        onChange={(value) => handleFundingSourceChange(key, 'amount', value)}\n                        min={0}\n                        max={key === 'taiwaneseLoan' || key === 'houseEquity' ? 300000 : \n                             key === 'additionalInvestment' || key === 'personalCash' ? 100000 : 1000000}\n                        step={25000}\n                        unit=\"$\"\n                        color=\"blue\"\n                        showTooltip={false}\n                      />\n                    </div>\n                    \n                    {source.type === 'debt' && (\n                      <div className=\"grid grid-cols-2 gap-1 text-xs\">\n                        <div className=\"text-gray-500\">Rate: {(source.rate * 100).toFixed(1)}% (after tax {key === 'houseEquity' ? (source.rate * 100).toFixed(1) : (source.rate * 0.75 * 100).toFixed(1)}%)</div>\n                        <div className=\"text-gray-500\">Term: {source.term} years</div>\n                      </div>\n                    )}\n                    \n\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n\n          </div>\n\n          {/* Variable Controls */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Variable Controls</h2>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {Object.entries(VARIABLES).map(([key, variable]) => (\n                <VariableCard\n                  key={key}\n                  variableKey={key}\n                  variable={variable}\n                  value={variables[key]}\n                  onValueChange={(value) => handleVariableChange(key, value)}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Results */}\n        <div className=\"w-3/5 bg-white p-6 overflow-y-auto\">\n\n          {/* Scenario Comparison */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Scenario Comparison</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {keyParameters.map((scenario, index) => {\n                return (\n                  <div key={index} className=\"border border-gray-200 rounded p-4\">\n                    <div className=\"text-center mb-3\">\n                      <h3 className=\"text-sm text-gray-600\">Target Annual Revenue:</h3>\n                      <p className=\"text-lg font-bold text-gray-900\">{formatCurrency(scenario.targetRevenue)}</p>\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <div className=\"p-2 bg-purple-50 rounded-lg border border-purple-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Purchase Price = Target Revenue × Net Profit Margin % × Valuation Multiple\\n\\nExample: $2,000,000 × 20.7% × 4.1x = $1,697,400\">\n                            <span className=\"text-xs font-medium text-purple-800\">Purchase Price</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-purple-900 text-center\">\n                          {formatCurrency(scenario.purchasePrice)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-orange-50 rounded-lg border border-orange-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"SBA Down Payment = (Purchase Price - Seller Financing Amount) × SBA Down Payment %\\n\\nExample: ($1,697,400 - $274,979) × 13% = $184,915\\n\\nThis is the minimum cash required for the SBA loan portion only.\">\n                            <span className=\"text-xs font-medium text-orange-800\">SBA Down Payment</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-orange-900 text-center\">\n                          {formatCurrency(scenario.sbaDownPayment)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-blue-50 rounded-lg border border-blue-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\n\\nIncludes:\\n• SBA Down Payment\\n• Working Capital (7.9% of revenue)\\n• Due Diligence & Professional Fees (2.5% of purchase price)\\n\\nThis is the total cash required for the acquisition.\">\n                            <span className=\"text-xs font-medium text-blue-800\">Down Payment Needed</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-blue-900 text-center\">\n                          {formatCurrency(scenario.downPaymentNeeded)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-yellow-50 rounded-lg border border-yellow-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Available Cash = Sum of all enabled funding sources:\\n\\n• Taiwanese Loan: $725,000 (2.8%)\\n• Personal Cash: $550,000 (8.0%)\\n• Additional Investment: $100,000 (15.0%)\\n• Home Equity: $200,000 (8.0%)\\n\\nThis represents your total accessible capital for the acquisition.\">\n                            <span className=\"text-xs font-medium text-yellow-800\">Available Cash</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-yellow-900 text-center\">\n                          {formatCurrency(scenario.availableCash)}\n                        </p>\n                      </div>\n                      \n                      <div className={`p-2 rounded-lg border ${\n                        scenario.cashSurplusDeficit >= 0 ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'\n                      }`}>\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\n\\nPositive (Green): You have sufficient cash for the acquisition\\nNegative (Red): You need additional funding or must reduce acquisition costs\\n\\nThis determines if the deal is financially feasible with your current resources.\">\n                            <span className={`text-xs font-medium ${scenario.cashSurplusDeficit >= 0 ? 'text-green-800' : 'text-red-800'}`}>\n                              Cash Surplus/Deficit\n                            </span>\n                          </InfoTooltip>\n                        </div>\n                        <p className={`text-sm font-bold text-center ${scenario.cashSurplusDeficit >= 0 ? 'text-green-900' : 'text-red-900'}`}>\n                          {formatCurrency(scenario.cashSurplusDeficit)}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Deal Structure & Financing Display */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Deal Structure & Financing</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"space-y-3\">\n\n                    \n                    <div>\n                      <h4 className=\"text-xs font-bold text-gray-700 mb-2\">Funding Allocation</h4>\n                      <div className=\"space-y-1 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Taiwanese Loan:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.taiwaneseLoan || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Personal Cash:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.personalCash || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Additional Investment:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.additionalInvestment || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Seller Financing:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.sellerFinancing || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Home Equity:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.houseEquity || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>SBA Loan:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.sbaLoan || 0)}</span>\n                        </div>\n                        <div className=\"border-t pt-1 mt-1\">\n                          <div className=\"flex justify-between\">\n                            <span>Down Payment Needed:</span>\n                            <span className=\"font-medium\">{formatCurrency(scenario.downPaymentNeeded || 0)}</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span>Total Allocated:</span>\n                            <span>{formatCurrency(scenario.fundingAllocation?.totalAllocated || 0)}</span>\n                          </div>\n                          {scenario.fundingAllocation?.downPaymentGap > 0 && (\n                            <div className=\"flex justify-between text-red-600\">\n                              <span>Funding Gap:</span>\n                              <span>{formatCurrency(scenario.fundingAllocation.downPaymentGap)}</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"text-xs font-bold text-gray-700 mb-2\">Financing Summary</h4>\n                      <div className=\"space-y-1 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"WACC = Weighted Average Cost of Capital\\nIncludes ALL funding sources with after-tax rates:\\n• Taiwanese Loan: 2.1% after-tax\\n• Personal Cash: 6% after-tax\\n• Additional Investment: 15%\\n• Seller Financing: 6% after-tax\\n• Home Equity: 8%\\n• SBA Loan: 8.6% after-tax\">\n                            <span>WACC:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{(scenario.wacc || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Your Personal Cost of Capital\\nWeighted average of your personal funding sources:\\n• Taiwanese Loan: 2.8%\\n• Personal Cash: 8% (opportunity cost)\\n• Home Equity: 8%\">\n                            <span>Your Personal Cost:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{(scenario.personalCostOfCapital || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\">\n                            <span>Your Ownership:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{((scenario.ownershipPercentage || 0) * 100).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Investor Ownership:</span>\n                          <span className=\"font-medium\">{((scenario.investorOwnership || 0) * 100).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          Based on risk-adjusted contributions (Taiwanese Loan: 80%, Home Equity: 120%, Personal Cash: 100%). Control premium and sweat equity not considered.\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\">\n                            <span>Monthly Business Debt Payment:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{formatCurrency((scenario.businessDebtService.totalBusinessDebtService / 12))}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\">\n                            <span>Monthly Personal Debt Payment:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{formatCurrency((scenario.personalDebtService.totalPersonalDebtService / 12))}</span>\n                        </div>\n                        \n                        {/* NEW METRICS - Section 1 */}\n                        <div className=\"border-t pt-2 mt-2\">\n                          <div className=\"flex justify-between\">\n                            <InfoTooltip formula=\"Capital Utilization Rate = Total Allocated Funding ÷ Available Cash × 100\\n\\nMeasures percentage of available funding deployed in the deal. Lower utilization provides safety margin for unexpected costs.\\n\\nExample: $516K allocated ÷ $750K available = 69%\\n\\nStandards:\\n🔴 Critical: >95% (Minimal safety margin)\\n🟡 Below Target: 85-95% (Limited flexibility)  \\n🟢 Good: 65-85% (Balanced deployment)\\n🔵 Excellent: <65% (High safety margin)\">\n                              <span>Capital Utilization:</span>\n                            </InfoTooltip>\n                            <span className={`font-medium ${getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color === '#E74C3C' ? 'text-red-600' : getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color === '#F1C40F' ? 'text-yellow-500' : getCapitalUtilizationStatus(scenario.capitalUtilizationRate).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                              {(scenario.capitalUtilizationRate || 0).toFixed(1)}%\n                            </span>\n                          </div>\n                          <div className=\"text-[10px] text-gray-600 mt-1\">\n                            <span className=\"font-medium\">Standard:</span> Critical &gt;95% | Below Target 85-95% | Good 65-85% | Excellent &lt;65%\n                          </div>\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Leverage Multiplier = Total Investment ÷ Personal Cash Invested\\n\\nShows how effectively you're using leverage to amplify investment capacity. Higher multipliers indicate better capital efficiency.\\n\\nExample: $516K total investment ÷ $50K personal cash = 10.3x\\n\\nStandards:\\n🔴 Critical: <3x (Inefficient capital use)\\n🟡 Below Target: 3-5x (Limited leverage)\\n🟢 Good: 5-8x (Balanced leverage)\\n🔵 Excellent: >8x (High capital efficiency)\">\n                            <span>Leverage Multiplier:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getLeverageMultiplierStatus(scenario.leverageMultiplier).color === '#E74C3C' ? 'text-red-600' : getLeverageMultiplierStatus(scenario.leverageMultiplier).color === '#F1C40F' ? 'text-yellow-500' : getLeverageMultiplierStatus(scenario.leverageMultiplier).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.leverageMultiplier || 0).toFixed(1)}x\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;3x | Below Target 3-5x | Good 5-8x | Excellent &gt;8x\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Price-to-Revenue = Purchase Price ÷ Target Annual Revenue\\n\\nMeasures deal efficiency relative to business size. Lower ratios indicate better value deals.\\n\\nExample: $2,147,000 purchase price ÷ $2,500,000 revenue = 0.86x\\n\\nStandards:\\n🔴 Critical: >1.2x (Expensive relative to revenue)\\n🟡 Below Target: 1.0-1.2x (Fair market pricing)\\n🟢 Good: 0.8-1.0x (Good value)\\n🔵 Excellent: <0.8x (Excellent value)\">\n                            <span>Price-to-Revenue:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getPriceToRevenueStatus(scenario.priceToRevenueRatio).color === '#E74C3C' ? 'text-red-600' : getPriceToRevenueStatus(scenario.priceToRevenueRatio).color === '#F1C40F' ? 'text-yellow-500' : getPriceToRevenueStatus(scenario.priceToRevenueRatio).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.priceToRevenueRatio || 0).toFixed(2)}x\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &gt;1.2x | Below Target 1.0-1.2x | Good 0.8-1.0x | Excellent &lt;0.8x\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Business Health Metrics */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Business Health Metrics</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"space-y-2 text-xs\">\n                    <div className=\"flex justify-between\">\n                      <span>Business Revenue:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.targetRevenue)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Business EBITDA:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.ebitda)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\nSBA: 11.5% rate, 10-year term\\nSeller: 8% rate, 5-year term\">\n                        <span>Business Debt Service:</span>\n                      </InfoTooltip>\n                      <span className=\"font-medium\">{formatCurrency(scenario.businessDebtService.totalBusinessDebtService)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Business Free Cash Flow:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.businessFreeCashFlow)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Economic Value Added = NOPAT - Capital Charge\\nNOPAT = EBITDA × (1 - Tax Rate)\\nCapital Charge = Business Capital Invested × WACC\">\n                        <span>Economic Value Added:</span>\n                      </InfoTooltip>\n                      <span className=\"font-medium\">\n                        {formatCurrency(scenario.businessEVA)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\">\n                        <span>Business DSCR:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${scenario.businessDSCR < 1.25 ? 'text-red-600' : scenario.businessDSCR < 1.5 ? 'text-yellow-500' : scenario.businessDSCR < 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.businessDSCR || 0).toFixed(2)}x\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;1.25x | Below Target 1.25-1.5x | Good 1.5-2.0x | Excellent &gt;2.0x\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business ROA = (Business Free Cash Flow / Business Capital Invested) × 100\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\">\n                        <span>Business ROA:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 3 ? 'text-red-600' : ((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 6 ? 'text-yellow-500' : ((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 10 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;3% | Below Target 3-6% | Good 6-10% | Excellent &gt;10%\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Debt-to-EBITDA Ratio = Total Business Debt ÷ EBITDA\">\n                        <span>Debt-to-EBITDA Ratio:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 4.0 ? 'text-red-600' : ((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 3.0 ? 'text-yellow-500' : ((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(() => {\n                          const sbaLoan = scenario.fundingAllocation.allocation.sbaLoan || 0;\n                          const sellerFinancing = scenario.fundingAllocation.allocation.sellerFinancing || 0;\n                          const totalBusinessDebt = sbaLoan + sellerFinancing;\n                          const debtToEbitdaRatio = totalBusinessDebt / scenario.ebitda;\n                          \n                          return debtToEbitdaRatio.toFixed(1) + 'x';\n                        })()}\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &gt;4.0x | Below Target 3.0-4.0x | Good 2.0-3.0x | Excellent &lt;2.0x\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Interest Coverage Ratio = EBITDA ÷ Interest Payments\">\n                        <span>Interest Coverage Ratio:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${(scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 1.5 ? 'text-red-600' : (scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 2.5 ? 'text-yellow-500' : (scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 3.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(() => {\n                          const sbaLoan = scenario.fundingAllocation.allocation.sbaLoan || 0;\n                          const sellerFinancing = scenario.fundingAllocation.allocation.sellerFinancing || 0;\n                          const sbaInterest = sbaLoan * 0.115;\n                          const sellerInterest = sellerFinancing * 0.08;\n                          const totalInterest = sbaInterest + sellerInterest;\n                          const interestCoverageRatio = totalInterest > 0 ? scenario.ebitda / totalInterest : Infinity;\n                          \n                          return interestCoverageRatio.toFixed(1) + 'x';\n                        })()}\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;1.5x | Below Target 1.5-2.5x | Good 2.5-3.0x | Excellent &gt;3.0x\n                    </div>\n                    \n                    {/* NEW METRICS - Section 2 */}\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"EBITDA Margin = Business EBITDA ÷ Business Revenue × 100\\n\\nMeasures operational profitability before financing and tax effects. Higher margins indicate more efficient operations and pricing power.\\n\\nExample: $565K EBITDA ÷ $2,500K revenue = 22.6%\\n\\nStandards:\\n🔴 Critical: &lt;15% (Poor profitability)\\n🟡 Below Target: 15-18% (Below average)\\n🟢 Good: 18-22% (Solid profitability)\\n🔵 Excellent: &gt;22% (Strong profitability)\">\n                        <span>EBITDA Margin:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${getEBITDAMarginStatus(scenario.ebitdaMargin).color === '#E74C3C' ? 'text-red-600' : getEBITDAMarginStatus(scenario.ebitdaMargin).color === '#F1C40F' ? 'text-yellow-500' : getEBITDAMarginStatus(scenario.ebitdaMargin).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.ebitdaMargin || 0).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;15% | Below Target 15-18% | Good 18-22% | Excellent &gt;22%\n                    </div>\n                    \n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business Cash Conversion = Business Free Cash Flow ÷ Business EBITDA × 100\\n\\nShows how efficiently EBITDA converts to actual cash flow. Higher conversion indicates better working capital management and cash generation.\\n\\nExample: $157K FCF ÷ $565K EBITDA = 28%\\n\\nStandards:\\n🔴 Critical: &lt;15% (Poor cash conversion)\\n🟡 Below Target: 15-20% (Below average)\\n🟢 Good: 20-30% (Solid conversion)\\n🔵 Excellent: &gt;30% (Strong cash generation)\">\n                        <span>Cash Conversion:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${getCashConversionStatus(scenario.businessCashConversion).color === '#E74C3C' ? 'text-red-600' : getCashConversionStatus(scenario.businessCashConversion).color === '#F1C40F' ? 'text-yellow-500' : getCashConversionStatus(scenario.businessCashConversion).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.businessCashConversion || 0).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;15% | Below Target 15-20% | Good 20-30% | Excellent &gt;30%\n                    </div>\n                    \n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Revenue-to-Investment Efficiency = Target Revenue ÷ Your Total Investment\\n\\nMeasures business scale relative to capital deployed. Higher ratios indicate more efficient capital deployment and larger business scale per dollar invested.\\n\\nExample: $2,500K revenue ÷ $516K investment = 4.8x\\n\\nStandards:\\n🔴 Critical: &lt;3x (Inefficient scale)\\n🟡 Below Target: 3-4x (Below average)\\n🟢 Good: 4-6x (Good efficiency)\\n🔵 Excellent: &gt;6x (High efficiency)\">\n                        <span>Revenue Multiple:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color === '#E74C3C' ? 'text-red-600' : getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color === '#F1C40F' ? 'text-yellow-500' : getRevenueEfficiencyStatus(scenario.revenueToInvestmentEfficiency).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.revenueToInvestmentEfficiency || 0).toFixed(1)}x\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;3x | Below Target 3-4x | Good 4-6x | Excellent &gt;6x\n                    </div>\n\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Personal Investment Returns */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">Personal Investment Returns</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    {/* Business Burden/Gain */}\n                    <div className=\"business-analysis\">\n                      <h3 className=\"text-xs font-bold text-gray-700 mb-2\">Business Level</h3>\n                      <div className=\"space-y-2 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Revenue Burden:</span>\n                          <span>{formatCurrency(scenario.targetRevenue)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Operating Costs:</span>\n                          <span>-{formatCurrency(scenario.targetRevenue - scenario.ebitda)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Business Debt Service:</span>\n                          <span>-{formatCurrency(scenario.businessDebtService.totalBusinessDebtService)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Management Costs:</span>\n                          <span>-{formatCurrency(variables.managementSalary)}</span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-2 font-medium\">\n                          <span>Business Net Gain:</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(scenario.businessFreeCashFlow)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Personal Burden/Gain */}\n                    <div className=\"personal-analysis\">\n                      <h3 className=\"text-xs font-bold text-gray-700 mb-2\">Personal Level</h3>\n                      <div className=\"space-y-2 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Personal Investment:</span>\n                          <span>-{formatCurrency(scenario.personalCashInvested)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Business Distribution:</span>\n                          <span>+{formatCurrency(scenario.ownerDistribution)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Personal Debt Service:</span>\n                          <span>-{formatCurrency(scenario.personalDebtService.totalPersonalDebtService)}</span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-2 font-medium\">\n                          <span>Your Net Annual Gain:</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(scenario.personalCashFlow)}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Your ROI = (Your Net Annual Gain ÷ Your Total Cash Invested) × 100\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\">\n                            <span>Your ROI:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${scenario.personalROI < 7 ? 'text-red-600' : scenario.personalROI < 12 ? 'text-yellow-500' : scenario.personalROI < 20 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {scenario.personalROI.toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;7% | Below Target 7-12% | Good 12-20% | Excellent &gt;20%\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Cash-on-Cash Return = Annual Cash Flow ÷ Your Cash Invested\">\n                            <span>Cash-on-Cash Return:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${(scenario.personalCashFlow / scenario.personalCashInvested * 100) < 8 ? 'text-red-600' : (scenario.personalCashFlow / scenario.personalCashInvested * 100) < 12 ? 'text-yellow-500' : (scenario.personalCashFlow / scenario.personalCashInvested * 100) < 20 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.personalCashFlow / scenario.personalCashInvested * 100).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;8% | Below Target 8-12% | Good 12-20% | Excellent &gt;20%\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Payback Period = Your Total Investment ÷ Your Net Annual Gain\">\n                            <span>Payback Period:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${(scenario.personalCashInvested / scenario.personalCashFlow) > 8 ? 'text-red-600' : (scenario.personalCashInvested / scenario.personalCashFlow) > 5 ? 'text-yellow-500' : (scenario.personalCashInvested / scenario.personalCashFlow) > 3 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.personalCashInvested / scenario.personalCashFlow).toFixed(1)} years\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &gt;8 years | Below Target 5-8 years | Good 3-5 years | Excellent &lt;3 years\n                        </div>\n                        \n                        {/* NEW METRICS - Section 3 */}\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) ÷ Risk Score\\n\\nMeasures return per unit of risk taken. Higher ratios indicate better risk-adjusted performance compared to safer alternatives.\\n\\nExample: (14.8% ROI - 4.5% treasury) ÷ 4.9 risk score = 2.1\\n\\nRisk Score Components: Leverage, concentration, industry, execution risk\\n\\nStandards:\\n🔴 Critical: &lt;0.5 (Poor risk compensation)\\n🟡 Below Target: 0.5-1.0 (Fair risk-return)\\n🟢 Good: 1.0-1.5 (Good risk-return)\\n🔵 Excellent: &gt;1.5 (Strong risk-return)\">\n                            <span>Risk-Adjusted Return:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getRiskAdjustedStatus(scenario.riskAdjustedReturn).color === '#E74C3C' ? 'text-red-600' : getRiskAdjustedStatus(scenario.riskAdjustedReturn).color === '#F1C40F' ? 'text-yellow-500' : getRiskAdjustedStatus(scenario.riskAdjustedReturn).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.riskAdjustedReturn || 0).toFixed(1)}\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;0.5 | Below Target 0.5-1.0 | Good 1.0-1.5 | Excellent &gt;1.5\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Income Replacement Ratio = Your Net Annual Gain ÷ Current Salary × 100\\n\\nShows percentage of current employment income replaced by business cash flows. Higher ratios indicate faster path to financial independence.\\n\\nExample: $76K business income ÷ $100K salary = 76%\\n\\nTimeline: Year 1: 76% | Year 3: 132% (full replacement + growth)\\n\\nStandards:\\n🔴 Critical: &lt;40% (Cannot replace income)\\n🟡 Below Target: 40-80% (Partial replacement)\\n🟢 Good: 80-120% (Near full replacement)\\n🔵 Excellent: &gt;120% (Income enhancement)\">\n                            <span>W-2 Replacement:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getIncomeReplacementStatus(scenario.incomeReplacementRatio).color === '#E74C3C' ? 'text-red-600' : getIncomeReplacementStatus(scenario.incomeReplacementRatio).color === '#F1C40F' ? 'text-yellow-500' : getIncomeReplacementStatus(scenario.incomeReplacementRatio).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.incomeReplacementRatio || 0).toFixed(0)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;40% | Below Target 40-80% | Good 80-120% | Excellent &gt;120%\n                        </div>\n                        \n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Wealth Building Velocity = Annual Wealth Creation Rate\\n\\nMeasures how fast your investment builds wealth compared to traditional investments. Based on total return projections including cash flows and equity appreciation.\\n\\nExample: 5.0x total return over 5 years = 100%+ annual wealth creation\\n\\nComparison: S&P 500 ~10% | Real Estate ~15% | This Investment ~100%+\\n\\nStandards:\\n🔴 Critical: &lt;20% (Below market alternatives)\\n🟡 Below Target: 20-40% (Market competitive)\\n🟢 Good: 40-80% (Above market)\\n🔵 Excellent: &gt;80% (Exceptional wealth building)\">\n                            <span>Wealth Velocity:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${getWealthVelocityStatus(scenario.wealthBuildingVelocity).color === '#E74C3C' ? 'text-red-600' : getWealthVelocityStatus(scenario.wealthBuildingVelocity).color === '#F1C40F' ? 'text-yellow-500' : getWealthVelocityStatus(scenario.wealthBuildingVelocity).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.wealthBuildingVelocity || 0).toFixed(0)}%+\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;20% | Below Target 20-40% | Good 40-80% | Excellent &gt;80%\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n\n\n          {/* Growth & Risk Projections */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Growth & Risk Projections</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <table className=\"w-full text-xs\">\n                    <thead>\n                      <tr className=\"border-b\">\n                        <th className=\"text-left py-1\">Year</th>\n                        <th className=\"text-right py-1\">Business FCF</th>\n                        <th className=\"text-right py-1\">Your Distribution</th>\n                        <th className=\"text-right py-1\">Your Net FCF</th>\n                        <th className=\"text-right py-1\">DSCR</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {scenario.projections.map((year, yearIndex) => {\n                        // Calculate business FCF for this year\n                        const yearEBITDA = year.ebitda;\n                        const yearBusinessFCF = yearEBITDA - scenario.businessDebtService.totalBusinessDebtService - variables.managementSalary - (variables.techInvestment / 3);\n                        const yearOwnerDistribution = yearBusinessFCF * scenario.ownership.yourOwnership;\n                        const yearYourFCF = yearOwnerDistribution - scenario.personalDebtService.totalPersonalDebtService;\n                        const yearDSCR = scenario.businessDebtService.totalBusinessDebtService > 0 ? yearEBITDA / scenario.businessDebtService.totalBusinessDebtService : 0;\n                        \n                        return (\n                          <tr key={yearIndex}>\n                            <td className=\"py-1\">{year.year}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearBusinessFCF)}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearOwnerDistribution)}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearYourFCF)}</td>\n                            <td className={`text-right py-1 ${yearDSCR < 1.25 ? 'text-red-600' : yearDSCR < 1.5 ? 'text-yellow-500' : yearDSCR < 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                              {yearDSCR.toFixed(2)}x\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  \n                  {/* NEW METRICS - Section 4 */}\n                  <div className=\"mt-4 space-y-3 text-xs\">\n                    <div>\n                      <h4 className=\"font-bold text-gray-700 mb-2\">5-Year Exit Value Scenarios:</h4>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span>Conservative:</span>\n                          <span>{formatCurrency(scenario.exitValueRange?.conservative || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Expected:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.exitValueRange?.expected || 0)} 🎯</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Optimistic:</span>\n                          <span>{formatCurrency(scenario.exitValueRange?.optimistic || 0)}</span>\n                        </div>\n                      </div>\n                      <div className=\"text-[10px] text-gray-600 mt-1\">\n                        <InfoTooltip formula=\"5-Year Exit Value Range = Year 5 EBITDA × Valuation Multiple × Your Ownership %\\n\\nProjects potential business sale value in 5 years under different market scenarios. Includes cumulative cash flows received during ownership period.\\n\\nAssumptions:\\n• Year 5 EBITDA: $721K (5% annual growth)\\n• Your Ownership: 83%\\n• Multiple Range: 3.0x (recession) to 4.5x (growth market)\\n\\nTotal Return = Exit Value + 5-Year Cumulative Cash Flows ($440K)\\n\\nConservative includes potential market downturns\\nExpected assumes current market conditions continue  \\nOptimistic reflects strong business performance and market growth\">\n                          <span>Based on Year 5 EBITDA projections and market multiples</span>\n                        </InfoTooltip>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"font-bold text-gray-700 mb-2\">Stress Test Results:</h4>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span>Revenue -20%:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.revenueStressROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.revenueStressROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.revenueStressROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            ROI = {(scenario.stressTestResults?.revenueStressROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Margin -300bp:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.marginStressROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.marginStressROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.marginStressROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            ROI = {(scenario.stressTestResults?.marginStressROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Interest +200bp:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.rateStressROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.rateStressROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.rateStressROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            ROI = {(scenario.stressTestResults?.rateStressROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-1\">\n                          <span>Minimum Scenario:</span>\n                          <span className={`font-medium ${getStressTestStatus(scenario.stressTestResults?.minROI).color === '#E74C3C' ? 'text-red-600' : getStressTestStatus(scenario.stressTestResults?.minROI).color === '#F1C40F' ? 'text-yellow-500' : getStressTestStatus(scenario.stressTestResults?.minROI).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.stressTestResults?.minROI || 0).toFixed(1)}%\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"text-[10px] text-gray-600 mt-1\">\n                        <InfoTooltip formula=\"Stress Test Results = ROI Under Adverse Scenarios\\n\\nTests investment performance under various economic stress conditions to assess downside protection and resilience.\\n\\nTest Scenarios:\\n• Revenue Decline: -20% from base case\\n• Margin Compression: -300 basis points EBITDA margin\\n• Interest Rate Rise: +200 basis points on variable debt\\n\\nMinimum ROI shows worst-case scenario performance\\nTarget: Maintain &gt;7% ROI (market minimum) under stress\\n\\nStrong stress test results indicate robust investment with good downside protection\">\n                          <span>Target: Maintain &gt;7% ROI under stress</span>\n                        </InfoTooltip>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"font-bold text-gray-700 mb-2\">Growth Funding Capacity:</h4>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span>Available Capacity:</span>\n                          <span className={`font-medium ${getGrowthCapacityStatus(scenario.growthFundingCapacity).color === '#E74C3C' ? 'text-red-600' : getGrowthCapacityStatus(scenario.growthFundingCapacity).color === '#F1C40F' ? 'text-yellow-500' : getGrowthCapacityStatus(scenario.growthFundingCapacity).color === '#27AE60' ? 'text-green-600' : 'text-blue-600'}`}>\n                            {formatCurrency(scenario.growthFundingCapacity || 0)}\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600\">\n                          <InfoTooltip formula=\"Growth Funding Capacity = Additional Sustainable Debt Capacity\\n\\nEstimates additional funding available for business growth, acquisitions, or expansion based on improved cash flows and debt capacity.\\n\\nCalculation Based On:\\n• Improved DSCR from business growth\\n• Conservative debt-to-EBITDA limits (&lt;3.0x)\\n• Projected Year 3+ cash flow performance\\n\\nUses Include:\\n• Acquiring competitor businesses\\n• Major expansion projects  \\n• Equipment or technology investments\\n• Working capital for growth\\n\\nHigher capacity indicates strong scalability potential and strategic flexibility\">\n                          <span>Available for: Acquisition or expansion</span>\n                        </InfoTooltip>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}