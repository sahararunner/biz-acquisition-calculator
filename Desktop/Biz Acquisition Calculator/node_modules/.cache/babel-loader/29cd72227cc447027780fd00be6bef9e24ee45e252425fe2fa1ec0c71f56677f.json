{"ast":null,"code":"// Debug logging functions for comprehensive metric tracking\nexport const DEBUG_METRICS=true;export function logMetricCalculation(sectionName,metricName,inputs,formula,result){let assumptions=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};if(!DEBUG_METRICS)return;console.group(`üìä ${sectionName} - ${metricName}`);console.log(`üî¢ INPUTS:`,inputs);console.log(`üìê FORMULA: ${formula}`);console.log(`üìã ASSUMPTIONS:`,assumptions);console.log(`‚úÖ RESULT: ${result}`);console.log(`---`);console.groupEnd();}export function logAllMetricsSummary(scenario,metrics){if(!DEBUG_METRICS)return;console.group(\"üìä DASHBOARD METRICS SUMMARY\");console.log(\"üè¢ DEAL STRUCTURE:\");console.log(`  Purchase Price: ${metrics.purchasePrice}`);console.log(`  Available Cash: ${metrics.availableCash}`);console.log(`  Cash Surplus: ${metrics.cashSurplus}`);console.log(`  WACC: ${metrics.wacc}%`);console.log(\"üìà BUSINESS HEALTH:\");console.log(`  DSCR: ${metrics.businessDSCR}x`);console.log(`  ROA: ${metrics.businessROA}%`);console.log(`  Debt/EBITDA: ${metrics.debtToEBITDA}x`);console.log(`  Interest Coverage: ${metrics.interestCoverage}x`);console.log(\"üí∞ PERSONAL RETURNS:\");console.log(`  Your ROI: ${metrics.yourROI}%`);console.log(`  Cash-on-Cash: ${metrics.cashOnCashReturn}%`);console.log(`  Payback: ${metrics.paybackPeriod} years`);console.log(\"üìä KEY ASSUMPTIONS:\");console.log(`  Target Revenue: ${scenario.targetRevenue}`);console.log(`  Net Profit Margin: ${scenario.netProfitMargin}%`);console.log(`  Valuation Multiple: ${scenario.valuationMultiple}x`);console.log(`  Revenue Growth: ${scenario.revenueGrowthRate}%`);console.log(`  Working Capital %: ${scenario.workingCapitalPercent}%`);console.log(`  Management Salary: ${scenario.managementSalary}`);console.groupEnd();}// SBA loan payment calculation\nexport const calculateSBAPayment=function(principal){let rate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.115;let years=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;const monthlyRate=rate/12;const payments=years*12;return principal*monthlyRate*Math.pow(1+monthlyRate,payments)/(Math.pow(1+monthlyRate,payments)-1)*12;};// Seller note payment calculation  \nexport const calculateSellerPayment=function(principal){let rate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.08;let years=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;const monthlyRate=rate/12;const payments=years*12;return principal*monthlyRate*Math.pow(1+monthlyRate,payments)/(Math.pow(1+monthlyRate,payments)-1)*12;};// Expected value calculation\nexport const calculateExpectedValue=(scenarios,probabilities)=>{return scenarios.bestCase*probabilities.bestCase/100+scenarios.mostLikely*probabilities.mostLikely/100+scenarios.worstCase*probabilities.worstCase/100;};// Auto-normalize probabilities\nexport const normalizeProbabilities=(best,likely,worst)=>{const total=best+likely+worst;if(total!==100){const factor=100/total;return{best:Math.round(best*factor),likely:Math.round(likely*factor),worst:Math.round(worst*factor)};}return{best,likely,worst};};// SBA minimum constraint\nexport const validateSBADownPayment=value=>Math.max(value,10);// Debt service coverage validation\nexport const validateDebtCoverage=(ebitda,debtService)=>debtService/ebitda<=0.8;// Generate bell curve data\nexport const generateBellCurve=(mean,min,max)=>{const stdDev=(max-min)/6;const points=[];for(let x=min;x<=max;x+=(max-min)/100){const y=Math.exp(-0.5*Math.pow((x-mean)/stdDev,2));points.push({x,y});}return points;};// Calculate total cash required\nexport const calculateTotalCashRequired=params=>{const{purchasePrice,sbaDownPaymentPercent,workingCapitalPercent,targetRevenue,techInvestment,sellerFinancingPercent=20,// Default seller financing percentage\ndueDiligencePercent=1.5,professionalFeesPercent=0.8,contingencyPercent=2.5}=params;// Calculate financing structure correctly\nconst sellerFinancingAmount=purchasePrice*(sellerFinancingPercent/100);const sbaLoanAmount=purchasePrice-sellerFinancingAmount;const sbaDownPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);// Note: Total financing may exceed purchase price if both SBA and seller financing are used\n// This is typical in SBA deals where seller financing is additional to SBA loan\nconst workingCapital=targetRevenue*(workingCapitalPercent/100);const dueDiligence=purchasePrice*(dueDiligencePercent/100);const professionalFees=purchasePrice*(professionalFeesPercent/100);const contingency=purchasePrice*(contingencyPercent/100);return{downPayment:sbaDownPayment,workingCapital,dueDiligence,professionalFees,techInvestment,contingency,total:sbaDownPayment+workingCapital+dueDiligence+professionalFees+techInvestment+contingency};};// Calculate annual cash to pocket\nexport const calculateAnnualCashToPocket=params=>{const{targetRevenue,netProfitMarginPercent,sbaLoanAmount,sellerFinancingAmount,managementSalary,techInvestment}=params;const ebitda=targetRevenue*(netProfitMarginPercent/100);const sbaPayment=calculateSBAPayment(sbaLoanAmount);const sellerPayment=calculateSellerPayment(sellerFinancingAmount);const techInvestmentAmortized=techInvestment/3;// Amortized over 3 years\nreturn{ebitda,sbaPayment,sellerPayment,managementSalary,techInvestmentAmortized,netCashFlow:ebitda-sbaPayment-sellerPayment-managementSalary-techInvestmentAmortized};};// Calculate Debt Service Coverage Ratio (DSCR)\nexport const calculateDSCR=(annualEBITDA,totalAnnualDebtService)=>{const result=totalAnnualDebtService>0?annualEBITDA/totalAnnualDebtService:0;if(DEBUG_METRICS){logMetricCalculation(\"Business Health\",\"DSCR (Debt Service Coverage Ratio)\",{annualEBITDA,totalAnnualDebtService},\"DSCR = Annual EBITDA √∑ Total Annual Debt Service\",result,{interpretation:result>=1.25?\"Strong coverage\":result>=1.0?\"Adequate coverage\":\"Weak coverage\",calculation:`${annualEBITDA} √∑ ${totalAnnualDebtService} = ${result}x`});}return result;};// Calculate Cash-on-Cash Return\nexport const calculateCashOnCashReturn=(annualCashToPocket,personalCashInvested)=>{const result=personalCashInvested>0?annualCashToPocket/personalCashInvested*100:0;if(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"Cash-on-Cash Return\",{annualCashToPocket,personalCashInvested},\"Cash-on-Cash Return = (Annual Cash to Pocket √∑ Personal Cash Invested) √ó 100\",result,{interpretation:result>=20?\"Excellent return\":result>=15?\"Good return\":result>=10?\"Fair return\":\"Poor return\",calculation:`(${annualCashToPocket} √∑ ${personalCashInvested}) √ó 100 = ${result}%`});}return result;};// Calculate IRR using Newton-Raphson method\nexport const calculateIRR=(personalInvestment,cashFlows)=>{const tolerance=0.0001;const maxIterations=100;let guess=0.1;// Start with 10%\nfor(let i=0;i<maxIterations;i++){let npv=-personalInvestment;let derivative=0;for(let j=0;j<cashFlows.length;j++){const discountFactor=Math.pow(1+guess,j+1);npv+=cashFlows[j]/discountFactor;derivative-=(j+1)*cashFlows[j]/(discountFactor*(1+guess));}const newGuess=guess-npv/derivative;if(Math.abs(newGuess-guess)<tolerance){const result=newGuess*100;// Return as percentage\nif(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"IRR (Internal Rate of Return)\",{personalInvestment,cashFlows,iterations:i+1},\"IRR = Rate where NPV = 0 (calculated using Newton-Raphson method)\",result,{method:\"Newton-Raphson iteration\",tolerance:tolerance,maxIterations:maxIterations,interpretation:result>=15?\"Excellent return\":result>=10?\"Good return\":result>=5?\"Fair return\":\"Poor return\"});}return result;}guess=newGuess;}if(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"IRR (Internal Rate of Return)\",{personalInvestment,cashFlows},\"IRR = Rate where NPV = 0 (calculated using Newton-Raphson method)\",null,{method:\"Newton-Raphson iteration\",tolerance:tolerance,maxIterations:maxIterations,error:\"No convergence - IRR calculation failed\"});}return null;// No convergence\n};// Calculate Multiple on Invested Capital (MOIC)\nexport const calculateMOIC=(personalCashInvested,fiveYearProjections)=>{const totalCashReturned=fiveYearProjections.reduce((sum,year)=>sum+year.cashFlow,0);const businessValueAtExit=fiveYearProjections[4].ebitda*4.2;// Assume same multiple\nconst result=(totalCashReturned+businessValueAtExit)/personalCashInvested;if(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"MOIC (Multiple on Invested Capital)\",{personalCashInvested,totalCashReturned,businessValueAtExit,year5EBITDA:fiveYearProjections[4].ebitda,exitMultiple:4.2},\"MOIC = (Total Cash Returned + Business Value at Exit) √∑ Personal Cash Invested\",result,{exitMultipleSource:\"Assumed 4.2x EBITDA exit multiple\",calculation:`(${totalCashReturned} + ${businessValueAtExit}) √∑ ${personalCashInvested} = ${result}x`});}return result;};// Calculate Payback Period\nexport const calculatePaybackPeriod=(personalCashInvested,fiveYearProjections)=>{let cumulativeCashFlow=0;let result='>5 years';for(let i=0;i<fiveYearProjections.length;i++){cumulativeCashFlow+=fiveYearProjections[i].cashFlow;if(cumulativeCashFlow>=personalCashInvested){result=i+1+(personalCashInvested-(cumulativeCashFlow-fiveYearProjections[i].cashFlow))/fiveYearProjections[i].cashFlow;break;}}if(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"Payback Period\",{personalCashInvested,cumulativeCashFlow,fiveYearProjections:fiveYearProjections.map(p=>({year:p.year,cashFlow:p.cashFlow}))},\"Payback Period = Years until cumulative cash flow exceeds personal investment\",result,{interpretation:typeof result==='number'?`${result} years to recover investment`:\"Investment not recovered within 5 years\",calculation:`Cumulative cash flow: ${cumulativeCashFlow} vs Personal Investment: ${personalCashInvested}`});}return result;};// Enhanced Risk Score Calculation\nexport const calculateEnhancedRiskScore=(dscr,cashOnCash,sellerFinancingPercent)=>{let score=5;// Base score\n// DSCR scoring\nif(dscr>=1.5)score+=2;else if(dscr>=1.25)score+=1;else score-=2;// Cash-on-Cash scoring\nif(cashOnCash>=20)score+=2;else if(cashOnCash>=15)score+=1;else if(cashOnCash<10)score-=1;// Seller financing scoring\nif(sellerFinancingPercent>=20)score+=1;// Seller has skin in game\nconst result=Math.max(1,Math.min(10,score));if(DEBUG_METRICS){logMetricCalculation(\"Risk Assessment\",\"Enhanced Risk Score\",{dscr,cashOnCash,sellerFinancingPercent},\"Risk Score = Base(5) + DSCR Bonus + Cash-on-Cash Bonus + Seller Financing Bonus\",result,{baseScore:5,dscrContribution:dscr>=1.5?2:dscr>=1.25?1:-2,cashOnCashContribution:cashOnCash>=20?2:cashOnCash>=15?1:cashOnCash<10?-1:0,sellerFinancingContribution:sellerFinancingPercent>=20?1:0,interpretation:result<=3?\"High Risk\":result<=6?\"Medium Risk\":\"Low Risk\"});}return result;};// Calculate financing structure\nexport const calculateFinancingStructure=params=>{const{purchasePrice,sellerFinancingPercent,sbaDownPaymentPercent}=params;const sellerFinancing=purchasePrice*(sellerFinancingPercent/100);const sbaLoanAmount=purchasePrice-sellerFinancing;const downPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);return{purchasePrice,sellerFinancing,sbaLoanAmount,downPayment};};// Calculate 5-year projections for advanced metrics\nexport const calculateFiveYearProjections=params=>{const{targetRevenue,revenueGrowthRatePercent,netProfitMarginPercent,sbaLoanAmount,sellerFinancingAmount,managementSalary,techInvestment,sbaInterestRate=11.5,sellerInterestRate=8}=params;const projections=[];let currentRevenue=targetRevenue;for(let year=1;year<=5;year++){const ebitda=currentRevenue*(netProfitMarginPercent/100);const sbaPayment=calculateSBAPayment(sbaLoanAmount,sbaInterestRate/100,10);const sellerPayment=calculateSellerPayment(sellerFinancingAmount,sellerInterestRate/100,5);const techInvestmentAmortized=year<=3?techInvestment/3:0;const netCashFlow=ebitda-sbaPayment-sellerPayment-managementSalary-techInvestmentAmortized;projections.push({year,revenue:currentRevenue,ebitda,cashFlow:netCashFlow});currentRevenue*=1+revenueGrowthRatePercent/100;}return projections;};// Calculate business targeting metrics\nexport const calculateBusinessTargetingMetrics=(availableCash,targetRevenue)=>{return{maxSafePurchasePrice:availableCash*4,// Assuming 25% total cash requirement\nminRequiredEBITDA:availableCash*4*0.12/1.25,// 12% debt service / 1.25x coverage\ntargetRevenueRange:{min:targetRevenue*0.8,max:targetRevenue*1.2},recommendedMultipleRange:{min:3.5,max:5.0}};};// Calculate risk score (1-10)\nexport const calculateRiskScore=params=>{let riskScore=5;// Base score\n// Debt service coverage ratio\nconst ebitda=params.targetRevenue*(params.netProfitMarginPercent/100);const sbaPayment=calculateSBAPayment(params.sbaLoanAmount);const sellerPayment=calculateSellerPayment(params.sellerFinancingAmount);const totalDebtService=sbaPayment+sellerPayment;const debtCoverageRatio=ebitda/totalDebtService;if(debtCoverageRatio<1.25)riskScore+=3;else if(debtCoverageRatio<1.5)riskScore+=1;else if(debtCoverageRatio>2.0)riskScore-=1;// Working capital ratio\nconst workingCapitalRatio=params.workingCapitalPercent/100/(params.netProfitMarginPercent/100);if(workingCapitalRatio>0.8)riskScore+=2;else if(workingCapitalRatio<0.3)riskScore-=1;// SBA down payment\nif(params.sbaDownPaymentPercent<12)riskScore+=1;else if(params.sbaDownPaymentPercent>15)riskScore-=1;return Math.max(1,Math.min(10,riskScore));};// Calculate business-only WACC (excluding personal loans)\nexport const calculateBusinessWACC=(sbaLoan,sellerFinancing,purchasePrice)=>{const totalBusinessDebt=sbaLoan.amount+sellerFinancing.amount;const businessEquity=purchasePrice-totalBusinessDebt;const totalBusinessCapital=purchasePrice;if(totalBusinessCapital<=0)return 0;const debtWeight=totalBusinessDebt/totalBusinessCapital;const equityWeight=businessEquity/totalBusinessCapital;// Different tax treatment for different debt types\nconst sbaAfterTaxCost=0.115*0.75;// 25% tax benefit for business-deductible SBA\nconst sellerAfterTaxCost=0.08*0.9;// 10% tax benefit for seller financing (less deductible)\nconst afterTaxDebtCost=totalBusinessDebt>0?(sbaLoan.amount*sbaAfterTaxCost+sellerFinancing.amount*sellerAfterTaxCost)/totalBusinessDebt:0;const equityCost=0.15;// Business equity cost\nreturn debtWeight*afterTaxDebtCost+equityWeight*equityCost;};// Calculate business-level EVA (excluding personal loans)\nexport const calculateBusinessEVA=(businessEBITDA,businessCapitalInvested,businessWACC)=>{const taxRate=0.25;const nopat=businessEBITDA*(1-taxRate);// Net Operating Profit After Tax\nconst capitalCharge=businessCapitalInvested*businessWACC;return nopat-capitalCharge;};// Calculate business cash flow (company level only)\nexport const calculateBusinessCashFlow=(scenario,loanStructure,businessCapitalInvested)=>{const businessDebtService=loanStructure.sbaLoan.annualPayment+loanStructure.sellerFinancing.annualPayment;const businessFreeCashFlow=scenario.ebitda-businessDebtService-scenario.managementSalary-scenario.techInvestmentAnnual;const businessDSCR=businessDebtService>0?scenario.ebitda/businessDebtService:0;return{businessRevenue:scenario.targetRevenue,businessEBITDA:scenario.ebitda,businessDebtService:businessDebtService,businessFreeCashFlow:businessFreeCashFlow,businessDSCR:businessDSCR,businessROA:businessCapitalInvested>0?businessFreeCashFlow/businessCapitalInvested*100:0};};// Calculate personal cash flow (owner level only)\nexport const calculatePersonalCashFlow=(businessCashFlow,personalLoans,ownershipData,fundingSources)=>{const ownerDistribution=businessCashFlow.businessFreeCashFlow*ownershipData.yourOwnership;const personalDebtService=personalLoans.houseEquity.annualPayment+personalLoans.taiwaneseLoan.annualPayment;const personalNetCashFlow=ownerDistribution-personalDebtService;const personalCashInvested=(fundingSources.personalCash.enabled?fundingSources.personalCash.amount:0)+(fundingSources.houseEquity.enabled?fundingSources.houseEquity.amount:0)+(fundingSources.taiwaneseLoan.enabled?fundingSources.taiwaneseLoan.amount:0);const personalROI=personalCashInvested>0?personalNetCashFlow/personalCashInvested*100:0;return{ownerDistribution:ownerDistribution,personalDebtService:personalDebtService,personalNetCashFlow:personalNetCashFlow,personalCashInvested:personalCashInvested,personalROI:personalROI};};// Calculate personal projections\nexport const calculatePersonalProjections=(businessProjections,personalLoans,ownershipData)=>{return businessProjections.map((year,index)=>{const businessFCF=year.businessFreeCashFlow;const ownerDistribution=businessFCF*ownershipData.yourOwnership;const personalDebtService=personalLoans.total;const yourFCF=ownerDistribution-personalDebtService;return{year:index+1,businessFCF:businessFCF,ownerDistribution:ownerDistribution,yourFCF:yourFCF,DSCR:year.businessDSCR,cumulative:index===0?yourFCF:(index>0?businessProjections[index-1].cumulative:0)+yourFCF};});};// Calculate risk-adjusted ownership with fair methodology\nexport const calculateRiskAdjustedOwnership=function(fundingSources){let managementValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:150000;// Calculate risk-weighted contributions\nconst personalCashRisk=fundingSources.personalCash.enabled?fundingSources.personalCash.amount:0;// Taiwanese loan: Personal guarantee = 80% risk weight\nconst taiwaneseLoanRisk=fundingSources.taiwaneseLoan.enabled?fundingSources.taiwaneseLoan.amount*0.8:0;// Home equity: Personal asset at risk = 120% risk weight (higher risk premium)\nconst homeEquityRisk=fundingSources.houseEquity.enabled?fundingSources.houseEquity.amount*1.2:0;// SBA loan: Personal guarantee but asset-backed = 30% risk weight\n// const sbaRisk = 0; // SBA loan is debt, not equity contribution\n// Management/operational value (sweat equity)\nconst sweatEquityValue=managementValue;// Total personal risk-adjusted contribution\nconst personalRiskAdjusted=personalCashRisk+taiwaneseLoanRisk+homeEquityRisk+sweatEquityValue;// Outside investor contribution (100% risk weight)\nconst investorContribution=fundingSources.additionalInvestment.enabled?fundingSources.additionalInvestment.amount:0;// Total risk-adjusted equity\nconst totalRiskAdjustedEquity=personalRiskAdjusted+investorContribution;// Base ownership calculation\nconst baseOwnership=totalRiskAdjustedEquity>0?personalRiskAdjusted/totalRiskAdjustedEquity:1;// Dynamic control premium based on investor amount\nconst controlPremium=investorContribution>0?Math.min(0.05,investorContribution/1000000):0;// Max 5%, scales with investment size\n// Final ownership (capped at 95% to be fair to investors)\nconst finalOwnership=Math.min(0.95,baseOwnership+controlPremium);return{yourOwnership:finalOwnership,investorOwnership:1-finalOwnership,breakdown:{personalCashRisk,taiwaneseLoanRisk,homeEquityRisk,sweatEquityValue,investorContribution,controlPremium:controlPremium*100}};};// Calculate ownership cash flows with preferred return structure\nexport const calculateOwnershipCashFlows=(totalBusinessCashFlow,ownershipData,fundingSources)=>{const investorAmount=fundingSources.additionalInvestment.enabled?fundingSources.additionalInvestment.amount:0;const personalCashAmount=fundingSources.personalCash.enabled?fundingSources.personalCash.amount:0;// Investor preferred return (8% on their investment)\nconst investorPreferredReturn=investorAmount*0.08;// Your preferred return (6% on personal cash)\nconst yourPreferredReturn=personalCashAmount*0.06;// Total preferred returns\nconst totalPreferredReturns=investorPreferredReturn+yourPreferredReturn;// Remaining cash flow after preferred returns\nconst remainingCashFlow=Math.max(0,totalBusinessCashFlow-totalPreferredReturns);// Split remaining cash flow based on ownership percentages\nconst yourRemainingShare=remainingCashFlow*ownershipData.yourOwnership;const investorRemainingShare=remainingCashFlow*ownershipData.investorOwnership;// Total distributions\nconst yourTotalCashFlow=yourPreferredReturn+yourRemainingShare;const investorTotalCashFlow=investorPreferredReturn+investorRemainingShare;// Calculate ROI on actual cash invested (not risk-adjusted amounts)\nconst yourCashInvested=personalCashAmount;const yourROI=yourCashInvested>0?yourTotalCashFlow/yourCashInvested*100:0;const investorROI=investorAmount>0?investorTotalCashFlow/investorAmount*100:0;return{yourTotalCashFlow,investorTotalCashFlow,yourROI,investorROI,preferredReturns:{yours:yourPreferredReturn,investor:investorPreferredReturn},remainingCashFlowSplit:{yours:yourRemainingShare,investor:investorRemainingShare}};};// Validate ownership for reasonableness\nexport const validateOwnership=(ownershipData,fundingSources,businessMetrics)=>{const warnings=[];// Check if investor is getting fair deal\nif(ownershipData.investorOwnership<0.05&&fundingSources.additionalInvestment.amount>50000){warnings.push(\"‚ö†Ô∏è Investor ownership very low - may not be attractive\");}// Check if you're giving up too much\nif(ownershipData.yourOwnership<0.6&&fundingSources.personalCash.amount>fundingSources.additionalInvestment.amount){warnings.push(\"‚ö†Ô∏è Your ownership low despite majority funding\");}// Check for reasonable investor return (simplified calculation)\nconst investorAmount=fundingSources.additionalInvestment.enabled?fundingSources.additionalInvestment.amount:0;const expectedInvestorReturn=investorAmount>0?businessMetrics.totalCashFlow*ownershipData.investorOwnership/investorAmount*100:0;if(expectedInvestorReturn<15&&investorAmount>0){warnings.push(\"‚ö†Ô∏è Investor expected return below market (15%+)\");}return warnings;};// Verification function to test calculations with known values\nexport const verifyCalculations=testScenario=>{const{targetRevenue=2500000,netProfitMargin=25,valuationMultiple=4,sbaLoanAmount=1500000,sellerFinancingAmount=500000,personalCash=550000,additionalInvestment=100000}=testScenario;// Test business calculations\nconst ebitda=targetRevenue*(netProfitMargin/100);const purchasePrice=ebitda*valuationMultiple;const businessCapitalInvested=purchasePrice+targetRevenue*0.1+purchasePrice*0.015+purchasePrice*0.008;// Test WACC\nconst businessWACC=calculateBusinessWACC({amount:sbaLoanAmount,rate:0.115},{amount:sellerFinancingAmount,rate:0.08},purchasePrice);// Test EVA\nconst businessEVA=calculateBusinessEVA(ebitda,businessCapitalInvested,businessWACC);// Test ownership\nconst fundingSources={personalCash:{enabled:true,amount:personalCash},taiwaneseLoan:{enabled:true,amount:725000},houseEquity:{enabled:false,amount:200000},additionalInvestment:{enabled:true,amount:additionalInvestment}};const ownershipData=calculateRiskAdjustedOwnership(fundingSources);return{testScenario:{targetRevenue,ebitda,purchasePrice,businessCapitalInvested,businessWACC:businessWACC*100,businessEVA,ownershipData},expectedRanges:{businessWACC:{min:7,max:12},businessEVA:{min:0,max:200000},ownership:{min:0.6,max:0.95}}};};// Format currency\nexport const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(amount);};// Format percentage\nexport const formatPercentage=value=>{return`${value.toFixed(1)}%`;};// FUNDING PRIORITY ALLOCATION FUNCTIONS\n// Calculate total cash needed for acquisition\nexport const calculateTotalCashNeeded=(scenario,variables)=>{const purchasePrice=scenario.purchasePrice;const workingCapitalPercent=variables.workingCapital||14.6;const workingCapital=scenario.targetRevenue*(workingCapitalPercent/100);const dueDiligence=purchasePrice*0.015;const professionalFees=purchasePrice*0.008;const contingency=purchasePrice*0.025;const techInvestment=variables.techInvestment||100000;// Calculate SBA down payment correctly\nconst sellerFinancingPercent=variables.sellerFinancing||20;const sellerFinancingAmount=purchasePrice*(sellerFinancingPercent/100);const sbaLoanAmount=purchasePrice-sellerFinancingAmount;const sbaDownPaymentPercent=variables.sbaDownPayment||12;const sbaDownPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);const totalCashNeeded=sbaDownPayment+workingCapital+dueDiligence+professionalFees+contingency+techInvestment;return{purchasePrice,workingCapital,dueDiligence,professionalFees,contingency,techInvestment,sbaDownPayment,totalCashNeeded};};// Allocate funding by priority order (lowest to highest cost) - FOCUSED ON DOWN PAYMENT\nexport const allocateFundingByPriority=(downPaymentNeeded,fundingSources)=>{const allocation={taiwaneseLoan:0,personalCash:0,additionalInvestment:0,sellerFinancing:0,houseEquity:0,sbaLoan:0};let remainingDownPayment=downPaymentNeeded;// Priority 1: Taiwanese Loan (cheapest - 2.8%) - $300,000 available\nif(fundingSources.taiwaneseLoan.enabled&&remainingDownPayment>0){const used=Math.min(remainingDownPayment,fundingSources.taiwaneseLoan.amount);allocation.taiwaneseLoan=used;remainingDownPayment-=used;}// Priority 2: Personal Cash (8% opportunity cost) - $50,000 available\nif(fundingSources.personalCash.enabled&&remainingDownPayment>0){const used=Math.min(remainingDownPayment,fundingSources.personalCash.amount);allocation.personalCash=used;remainingDownPayment-=used;}// Priority 3: Additional Investment (15% expected return) - $50,000 available\nif(fundingSources.additionalInvestment.enabled&&remainingDownPayment>0){const used=Math.min(remainingDownPayment,fundingSources.additionalInvestment.amount);allocation.additionalInvestment=used;remainingDownPayment-=used;}// Priority 4: Seller Financing (8%) - $0 available (disabled)\nif(fundingSources.sellerFinancing.enabled&&remainingDownPayment>0){const used=Math.min(remainingDownPayment,fundingSources.sellerFinancing.amount);allocation.sellerFinancing=used;remainingDownPayment-=used;}// Priority 5: Home Equity Loan (8% but personal asset at risk) - $98,273 available\nif(fundingSources.houseEquity.enabled&&remainingDownPayment>0){const used=Math.min(remainingDownPayment,fundingSources.houseEquity.amount);allocation.houseEquity=used;remainingDownPayment-=used;}// Priority 6: SBA Loan (11.5% - highest cost, use as last resort) - $0 available (disabled)\nif(remainingDownPayment>0){allocation.sbaLoan=remainingDownPayment;// Whatever is left\n}return{allocation,downPaymentGap:remainingDownPayment<0?0:remainingDownPayment,totalAllocated:downPaymentNeeded-Math.max(0,remainingDownPayment),downPaymentNeeded:downPaymentNeeded,remainingDownPayment:Math.max(0,remainingDownPayment)};};// Determine purchase price financing structure\nexport const calculatePurchasePriceFinancing=(purchasePrice,fundingAllocation,variables)=>{// Seller financing reduces the amount that needs bank financing\nconst sellerFinancingAmount=fundingAllocation.allocation.sellerFinancing||0;const amountNeedingBankFinancing=purchasePrice-sellerFinancingAmount;// SBA loan covers remaining purchase price\nconst sbaLoanAmount=Math.max(0,amountNeedingBankFinancing);const sbaDownPaymentPercent=Math.max(variables.sbaDownPayment||10,10);const sbaDownPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);const sbaLoanPrincipal=sbaLoanAmount-sbaDownPayment;return{sellerFinancingAmount,sbaLoanAmount,sbaDownPayment,sbaLoanPrincipal,totalDownPaymentCovered:sbaDownPayment// This comes from cash allocation\n};};// Calculate business debt service with priority allocation\nexport const calculateBusinessDebtService=purchaseFinancing=>{// Only SBA loan and seller financing create debt service for the business\nconst sbaAnnualPayment=calculateSBAPayment(purchaseFinancing.sbaLoanPrincipal,0.115,10);const sellerAnnualPayment=calculateSellerPayment(purchaseFinancing.sellerFinancingAmount,0.08,5);return{sbaAnnualPayment,sellerAnnualPayment,totalBusinessDebtService:sbaAnnualPayment+sellerAnnualPayment};};// Calculate personal debt service with priority allocation\nexport const calculatePersonalDebtService=fundingAllocation=>{// Only personal loans create personal debt service\nconst houseEquityPayment=fundingAllocation.allocation.houseEquity>0?calculateSBAPayment(fundingAllocation.allocation.houseEquity,0.08,15):0;const taiwanesePayment=fundingAllocation.allocation.taiwaneseLoan>0?calculateSBAPayment(fundingAllocation.allocation.taiwaneseLoan,0.028,10):0;return{houseEquityPayment,taiwanesePayment,totalPersonalDebtService:houseEquityPayment+taiwanesePayment};};// Calculate WACC with priority-based allocation - ALL FUNDING SOURCES\nexport const calculatePriorityBasedWACC=(fundingAllocation,purchasePrice)=>{// WACC should include ALL funding sources used for the business acquisition\n// Each source has its own after-tax cost of capital\nlet totalFunding=0;let weightedCost=0;// After-tax cost rates for each funding source\nconst afterTaxCostRates={taiwaneseLoan:0.028*0.75,// 2.8% √ó 0.75 = 2.1% after-tax (if business deductible)\npersonalCash:0.08*0.75,// 8% √ó 0.75 = 6% after-tax (opportunity cost with tax benefit)\nadditionalInvestment:0.15,// 15% equity cost (no tax benefit)\nsellerFinancing:0.08*0.75,// 8% √ó 0.75 = 6% after-tax\nhouseEquity:0.08,// 8% (personal debt, no business tax benefit)\nsbaLoan:0.115*0.75// 11.5% √ó 0.75 = 8.6% after-tax\n};// Calculate weighted average cost of capital across all funding sources\nObject.entries(fundingAllocation.allocation).forEach(_ref=>{let[source,amount]=_ref;if(amount>0){totalFunding+=amount;weightedCost+=amount*afterTaxCostRates[source];}});return totalFunding>0?weightedCost/totalFunding*100:0;};// Calculate ownership with priority-based allocation\nexport const calculatePriorityBasedOwnership=fundingAllocation=>{// Risk-adjusted personal contributions based on ACTUAL allocated amounts\nconst personalCashRisk=fundingAllocation.allocation.personalCash*1.0;const taiwaneseLoanRisk=fundingAllocation.allocation.taiwaneseLoan*0.8;// Personal guarantee\nconst houseEquityRisk=fundingAllocation.allocation.houseEquity*1.2;// Personal asset risk\nconst totalPersonalRisk=personalCashRisk+taiwaneseLoanRisk+houseEquityRisk;const investorContribution=fundingAllocation.allocation.additionalInvestment;const totalEquity=totalPersonalRisk+investorContribution;const finalOwnership=totalEquity>0?totalPersonalRisk/totalEquity:1;// Removed control premium\nreturn{yourOwnership:finalOwnership,investorOwnership:1-finalOwnership,breakdown:{personalCashRisk,taiwaneseLoanRisk,houseEquityRisk,investorContribution}};};// Calculate personal cost of capital (for personal funding sources)\nexport const calculatePersonalCostOfCapital=fundingAllocation=>{let totalPersonalFunding=0;let weightedPersonalCost=0;// Only consider personal funding sources: Taiwanese Loan, Personal Cash, Home Equity\nconst personalCostRates={taiwaneseLoan:0.028,// 2.8% - personal loan rate\npersonalCash:0.08,// 8% opportunity cost\nhouseEquity:0.08// 8% home equity rate\n// Excluded: additionalInvestment, sellerFinancing, sbaLoan (not personal funding)\n};// Only calculate for personal funding sources\nconst personalSources=['taiwaneseLoan','personalCash','houseEquity'];personalSources.forEach(source=>{const amount=fundingAllocation.allocation[source]||0;if(amount>0){totalPersonalFunding+=amount;weightedPersonalCost+=amount*personalCostRates[source];}});return totalPersonalFunding>0?weightedPersonalCost/totalPersonalFunding*100:0;};// Main scenario calculation with priority-based funding\nexport const calculateScenariosWithPriority=(targetRevenues,variables,fundingSources)=>{return targetRevenues.map(revenue=>{// Step 1: Calculate business metrics\nconst netMargin=variables.netProfitMargin||25;const valuationMultiple=variables.valuationMultiple||4;const ebitda=revenue*(netMargin/100);const purchasePrice=ebitda*valuationMultiple;// Log Purchase Price calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Deal Structure\",\"Purchase Price\",{targetRevenue:revenue,netProfitMargin:netMargin,valuationMultiple:valuationMultiple},\"Purchase Price = Target Revenue √ó Net Profit Margin √ó Valuation Multiple\",purchasePrice,{netProfitMarginSource:\"User input assumption\",valuationMultipleSource:\"Market multiple assumption\",calculation:`${revenue} √ó ${netMargin}% √ó ${valuationMultiple}x = ${purchasePrice}`});}const businessMetrics={targetRevenue:revenue,ebitda:ebitda,purchasePrice:purchasePrice};// Step 2: Calculate down payment needed (same logic as Scenario Comparison)\nconst downPaymentCalculation=calculateDownPaymentNeeded(businessMetrics,variables);// Log Down Payment calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Deal Structure\",\"Down Payment Needed\",{sbaDownPayment:downPaymentCalculation.sbaDownPayment,workingCapital:downPaymentCalculation.workingCapital,fees:downPaymentCalculation.fees},\"Down Payment = SBA Down Payment + Working Capital + Due Diligence + Professional Fees\",downPaymentCalculation.downPaymentNeeded,{workingCapitalPercent:variables.workingCapital||7.9,dueDiligencePercent:1.5,professionalFeesPercent:1.0,calculation:`${downPaymentCalculation.sbaDownPayment} + ${downPaymentCalculation.workingCapital} + ${downPaymentCalculation.fees} = ${downPaymentCalculation.downPaymentNeeded}`});}// Step 3: Allocate funding by priority based on down payment needed\nconst fundingAllocation=allocateFundingByPriority(downPaymentCalculation.downPaymentNeeded,fundingSources);// Step 4: Calculate purchase price financing\nconst purchaseFinancing=calculatePurchasePriceFinancing(businessMetrics.purchasePrice,fundingAllocation,variables);// Step 5: Calculate debt service\nconst businessDebtService=calculateBusinessDebtService(purchaseFinancing);const personalDebtService=calculatePersonalDebtService(fundingAllocation);// Step 6: Calculate ownership, WACC, and personal cost of capital\nconst ownership=calculatePriorityBasedOwnership(fundingAllocation);const wacc=calculatePriorityBasedWACC(fundingAllocation,businessMetrics.purchasePrice);const personalCostOfCapital=calculatePersonalCostOfCapital(fundingAllocation);// Log WACC calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Deal Structure\",\"WACC\",{fundingAllocation:fundingAllocation.allocation,purchasePrice:businessMetrics.purchasePrice},\"WACC = Œ£(Weight √ó After-tax Rate) for all funding sources\",wacc,{taxRate:0.25,afterTaxRates:\"Calculated based on funding source rates\",calculation:`Weighted average of all funding source rates`});}// Log Personal Cost calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Deal Structure\",\"Your Personal Cost\",{personalFunding:{taiwaneseLoan:fundingAllocation.allocation.taiwaneseLoan,personalCash:fundingAllocation.allocation.personalCash,houseEquity:fundingAllocation.allocation.houseEquity},personalCostOfCapital},\"Personal Cost = Weighted average of personal funding sources\",personalCostOfCapital,{personalSources:\"Taiwanese Loan + Personal Cash + Home Equity\",calculation:`Weighted average of personal funding rates`});}// Step 7: Calculate cash flows\nconst businessCashFlow=businessMetrics.ebitda-businessDebtService.totalBusinessDebtService-(variables.managementSalary||100000)-(variables.techInvestment||100000)/3;const ownerDistribution=businessCashFlow*ownership.yourOwnership;const personalNetCashFlow=ownerDistribution-personalDebtService.totalPersonalDebtService;// Log Business Cash Flow calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Business Health\",\"Business Free Cash Flow\",{ebitda:businessMetrics.ebitda,businessDebtService:businessDebtService.totalBusinessDebtService,managementSalary:variables.managementSalary||100000,techInvestment:(variables.techInvestment||100000)/3},\"Business FCF = EBITDA - Business Debt Service - Management Salary - Tech Investment/3\",businessCashFlow,{techInvestmentAmortization:\"Amortized over 3 years\",calculation:`${businessMetrics.ebitda} - ${businessDebtService.totalBusinessDebtService} - ${variables.managementSalary||100000} - ${(variables.techInvestment||100000)/3} = ${businessCashFlow}`});}// Log Personal Cash Flow calculation\nif(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"Your Net Annual Gain\",{ownerDistribution,personalDebtService:personalDebtService.totalPersonalDebtService,yourOwnership:ownership.yourOwnership},\"Your Net Annual Gain = Owner Distribution - Personal Debt Service\",personalNetCashFlow,{ownerDistributionCalculation:`Business FCF √ó Your Ownership %`,calculation:`${ownerDistribution} - ${personalDebtService.totalPersonalDebtService} = ${personalNetCashFlow}`});}// Log ROI calculation\nif(DEBUG_METRICS){const yourTotalCashInvested=fundingAllocation.allocation.personalCash+fundingAllocation.allocation.taiwaneseLoan+fundingAllocation.allocation.houseEquity;const yourROI=personalNetCashFlow/yourTotalCashInvested*100;logMetricCalculation(\"Personal Returns\",\"Your ROI\",{yourNetAnnualGain:personalNetCashFlow,yourTotalCashInvested},\"Your ROI = (Your Net Annual Gain √∑ Your Total Cash Invested) √ó 100\",yourROI,{yourCashInvestedComponents:\"Personal Cash + Taiwanese Loan + Home Equity\",netAnnualGainComponents:\"Business Distribution - Personal Debt Service\",calculation:`(${personalNetCashFlow} √∑ ${yourTotalCashInvested}) √ó 100 = ${yourROI}%`});}return{...businessMetrics,...downPaymentCalculation,fundingAllocation,purchaseFinancing,businessDebtService,personalDebtService,ownership,wacc,personalCostOfCapital,businessCashFlow,ownerDistribution,personalNetCashFlow,personalROI:personalNetCashFlow/(fundingAllocation.allocation.personalCash+fundingAllocation.allocation.taiwaneseLoan+fundingAllocation.allocation.houseEquity)*100};});};// Calculate down payment needed using the same logic as Scenario Comparison\nexport const calculateDownPaymentNeeded=(scenario,variables)=>{const purchasePrice=scenario.purchasePrice;// Calculate SBA down payment\nconst sellerFinancingPercent=variables.sellerFinancing||20;const sellerFinancingAmount=purchasePrice*(sellerFinancingPercent/100);const sbaLoanAmount=purchasePrice-sellerFinancingAmount;const sbaDownPaymentPercent=variables.sbaDownPayment||12;const sbaDownPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);// Calculate working capital and fees (same as Scenario Comparison)\nconst workingCapitalPercent=variables.workingCapital||7.9;const workingCapital=scenario.targetRevenue*(workingCapitalPercent/100);const fees=purchasePrice*0.025;// 2.5% total fees (due diligence + professional fees)\n// Down Payment Needed = SBA Down Payment + Working Capital + Fees\nconst downPaymentNeeded=sbaDownPayment+workingCapital+fees;return{sbaDownPayment,workingCapital,fees,downPaymentNeeded};};// NEW METRICS CALCULATIONS\n// Capital Utilization Rate\nexport const calculateCapitalUtilizationRate=(totalAllocated,availableCash)=>{return availableCash>0?totalAllocated/availableCash*100:0;};export const getCapitalUtilizationStatus=rate=>{if(rate>95)return{color:'#E74C3C',level:'critical',label:'Critical'};if(rate>85)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(rate>65)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Leverage Multiplier\nexport const calculateLeverageMultiplier=(totalInvestment,personalCashInvested)=>{const result=personalCashInvested>0?totalInvestment/personalCashInvested:0;if(DEBUG_METRICS){logMetricCalculation(\"Deal Structure\",\"Leverage Multiplier\",{totalInvestment,personalCashInvested},\"Leverage Multiplier = Total Investment √∑ Personal Cash Invested\",result,{interpretation:result>=8?\"Excellent leverage\":result>=5?\"Good leverage\":result>=3?\"Fair leverage\":\"Poor leverage\",calculation:`${totalInvestment} √∑ ${personalCashInvested} = ${result}x`});}return result;};export const getLeverageMultiplierStatus=multiplier=>{if(multiplier<3)return{color:'#E74C3C',level:'critical',label:'Critical'};if(multiplier<5)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(multiplier<8)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Price-to-Revenue Ratio\nexport const calculatePriceToRevenueRatio=(purchasePrice,targetRevenue)=>{return targetRevenue>0?purchasePrice/targetRevenue:0;};export const getPriceToRevenueStatus=ratio=>{if(ratio>1.2)return{color:'#E74C3C',level:'critical',label:'Critical'};if(ratio>1.0)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(ratio>0.8)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// EBITDA Margin\nexport const calculateEBITDAMargin=(ebitda,revenue)=>{return revenue>0?ebitda/revenue*100:0;};export const getEBITDAMarginStatus=margin=>{if(margin<15)return{color:'#E74C3C',level:'critical',label:'Critical'};if(margin<18)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(margin<22)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Business Cash Conversion\nexport const calculateBusinessCashConversion=(businessFreeCashFlow,businessEBITDA)=>{return businessEBITDA>0?businessFreeCashFlow/businessEBITDA*100:0;};export const getCashConversionStatus=conversion=>{if(conversion<15)return{color:'#E74C3C',level:'critical',label:'Critical'};if(conversion<20)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(conversion<30)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Revenue-to-Investment Efficiency\nexport const calculateRevenueToInvestmentEfficiency=(targetRevenue,yourTotalInvestment)=>{return yourTotalInvestment>0?targetRevenue/yourTotalInvestment:0;};export const getRevenueEfficiencyStatus=efficiency=>{if(efficiency<3)return{color:'#E74C3C',level:'critical',label:'Critical'};if(efficiency<4)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(efficiency<6)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Risk-Adjusted Return\nexport const calculateRiskAdjustedReturn=function(yourROI){let riskFreeRate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4.5;let riskScore=arguments.length>2?arguments[2]:undefined;const result=riskScore>0?(yourROI-riskFreeRate)/riskScore:0;if(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"Risk-Adjusted Return\",{yourROI,riskFreeRate,riskScore},\"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) √∑ Risk Score\",result,{interpretation:result>=1.5?\"Excellent risk-adjusted return\":result>=1.0?\"Good risk-adjusted return\":result>=0.5?\"Fair risk-adjusted return\":\"Poor risk-adjusted return\",calculation:`(${yourROI} - ${riskFreeRate}) √∑ ${riskScore} = ${result}`});}return result;};export const getRiskAdjustedStatus=ratio=>{if(ratio<0.5)return{color:'#E74C3C',level:'critical',label:'Critical'};if(ratio<1.0)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(ratio<1.5)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Income Replacement Ratio\nexport const calculateIncomeReplacementRatio=(yourNetAnnualGain,currentSalary)=>{const result=currentSalary>0?yourNetAnnualGain/currentSalary*100:0;if(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"W-2 Replacement\",{yourNetAnnualGain,currentSalary},\"W-2 Replacement = (Your Net Annual Gain √∑ Current Salary) √ó 100\",result,{interpretation:result>=120?\"Excellent replacement\":result>=80?\"Good replacement\":result>=40?\"Fair replacement\":\"Poor replacement\",calculation:`(${yourNetAnnualGain} √∑ ${currentSalary}) √ó 100 = ${result}%`});}return result;};export const getIncomeReplacementStatus=ratio=>{if(ratio<40)return{color:'#E74C3C',level:'critical',label:'Critical'};if(ratio<80)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(ratio<120)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Wealth Building Velocity\nexport const calculateWealthBuildingVelocity=function(totalReturnMultiple){let investmentPeriod=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5;const annualWealthCreation=Math.pow(totalReturnMultiple,1/investmentPeriod)-1;const result=annualWealthCreation*100;if(DEBUG_METRICS){logMetricCalculation(\"Personal Returns\",\"Wealth Velocity\",{totalReturnMultiple,investmentPeriod},\"Wealth Velocity = Annual wealth creation rate from total return multiple\",result,{interpretation:result>=80?\"Excellent velocity\":result>=40?\"Good velocity\":result>=20?\"Fair velocity\":\"Poor velocity\",calculation:`Annual wealth creation from ${totalReturnMultiple}x return over ${investmentPeriod} years = ${result}%`});}return result;};export const getWealthVelocityStatus=velocity=>{if(velocity<20)return{color:'#E74C3C',level:'critical',label:'Critical'};if(velocity<40)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(velocity<80)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// 5-Year Exit Value Range\nexport const calculateExitValueRange=function(year5EBITDA,yourOwnership){let conservativeMultiple=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3.0;let expectedMultiple=arguments.length>3&&arguments[3]!==undefined?arguments[3]:3.59;let optimisticMultiple=arguments.length>4&&arguments[4]!==undefined?arguments[4]:4.5;return{conservative:year5EBITDA*conservativeMultiple*yourOwnership,expected:year5EBITDA*expectedMultiple*yourOwnership,optimistic:year5EBITDA*optimisticMultiple*yourOwnership};};// Stress Test Results\nexport const calculateStressTestResults=function(baseROI){let revenueStress=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-20;let marginStress=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-300;let rateStress=arguments.length>3&&arguments[3]!==undefined?arguments[3]:200;// Simplified stress test calculations\nconst revenueStressROI=baseROI*(1+revenueStress/100);const marginStressROI=baseROI*(1+marginStress/10000);// basis points\nconst rateStressROI=baseROI*(1-rateStress/10000);// basis points\nconst minROI=Math.min(revenueStressROI,marginStressROI,rateStressROI);return{revenueStressROI,marginStressROI,rateStressROI,minROI};};export const getStressTestStatus=minROI=>{if(minROI<5)return{color:'#E74C3C',level:'critical',label:'Critical'};if(minROI<7)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(minROI<10)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};// Growth Funding Capacity\nexport const calculateGrowthFundingCapacity=(maxSustainableDebt,currentTotalDebt,projectedYear3CashFlow,leverageMultiplier)=>{const currentDebtCapacity=maxSustainableDebt-currentTotalDebt;const cashFlowGrowthCapacity=projectedYear3CashFlow*leverageMultiplier;return Math.min(currentDebtCapacity,cashFlowGrowthCapacity);};export const getGrowthCapacityStatus=capacity=>{if(capacity<50000)return{color:'#E74C3C',level:'critical',label:'Critical'};if(capacity<100000)return{color:'#F1C40F',level:'below-target',label:'Below Target'};if(capacity<200000)return{color:'#27AE60',level:'good',label:'Good'};return{color:'#3498DB',level:'excellent',label:'Excellent'};};","map":{"version":3,"names":["DEBUG_METRICS","logMetricCalculation","sectionName","metricName","inputs","formula","result","assumptions","arguments","length","undefined","console","group","log","groupEnd","logAllMetricsSummary","scenario","metrics","purchasePrice","availableCash","cashSurplus","wacc","businessDSCR","businessROA","debtToEBITDA","interestCoverage","yourROI","cashOnCashReturn","paybackPeriod","targetRevenue","netProfitMargin","valuationMultiple","revenueGrowthRate","workingCapitalPercent","managementSalary","calculateSBAPayment","principal","rate","years","monthlyRate","payments","Math","pow","calculateSellerPayment","calculateExpectedValue","scenarios","probabilities","bestCase","mostLikely","worstCase","normalizeProbabilities","best","likely","worst","total","factor","round","validateSBADownPayment","value","max","validateDebtCoverage","ebitda","debtService","generateBellCurve","mean","min","stdDev","points","x","y","exp","push","calculateTotalCashRequired","params","sbaDownPaymentPercent","techInvestment","sellerFinancingPercent","dueDiligencePercent","professionalFeesPercent","contingencyPercent","sellerFinancingAmount","sbaLoanAmount","sbaDownPayment","workingCapital","dueDiligence","professionalFees","contingency","downPayment","calculateAnnualCashToPocket","netProfitMarginPercent","sbaPayment","sellerPayment","techInvestmentAmortized","netCashFlow","calculateDSCR","annualEBITDA","totalAnnualDebtService","interpretation","calculation","calculateCashOnCashReturn","annualCashToPocket","personalCashInvested","calculateIRR","personalInvestment","cashFlows","tolerance","maxIterations","guess","i","npv","derivative","j","discountFactor","newGuess","abs","iterations","method","error","calculateMOIC","fiveYearProjections","totalCashReturned","reduce","sum","year","cashFlow","businessValueAtExit","year5EBITDA","exitMultiple","exitMultipleSource","calculatePaybackPeriod","cumulativeCashFlow","map","p","calculateEnhancedRiskScore","dscr","cashOnCash","score","baseScore","dscrContribution","cashOnCashContribution","sellerFinancingContribution","calculateFinancingStructure","sellerFinancing","calculateFiveYearProjections","revenueGrowthRatePercent","sbaInterestRate","sellerInterestRate","projections","currentRevenue","revenue","calculateBusinessTargetingMetrics","maxSafePurchasePrice","minRequiredEBITDA","targetRevenueRange","recommendedMultipleRange","calculateRiskScore","riskScore","totalDebtService","debtCoverageRatio","workingCapitalRatio","calculateBusinessWACC","sbaLoan","totalBusinessDebt","amount","businessEquity","totalBusinessCapital","debtWeight","equityWeight","sbaAfterTaxCost","sellerAfterTaxCost","afterTaxDebtCost","equityCost","calculateBusinessEVA","businessEBITDA","businessCapitalInvested","businessWACC","taxRate","nopat","capitalCharge","calculateBusinessCashFlow","loanStructure","businessDebtService","annualPayment","businessFreeCashFlow","techInvestmentAnnual","businessRevenue","calculatePersonalCashFlow","businessCashFlow","personalLoans","ownershipData","fundingSources","ownerDistribution","yourOwnership","personalDebtService","houseEquity","taiwaneseLoan","personalNetCashFlow","personalCash","enabled","personalROI","calculatePersonalProjections","businessProjections","index","businessFCF","yourFCF","DSCR","cumulative","calculateRiskAdjustedOwnership","managementValue","personalCashRisk","taiwaneseLoanRisk","homeEquityRisk","sweatEquityValue","personalRiskAdjusted","investorContribution","additionalInvestment","totalRiskAdjustedEquity","baseOwnership","controlPremium","finalOwnership","investorOwnership","breakdown","calculateOwnershipCashFlows","totalBusinessCashFlow","investorAmount","personalCashAmount","investorPreferredReturn","yourPreferredReturn","totalPreferredReturns","remainingCashFlow","yourRemainingShare","investorRemainingShare","yourTotalCashFlow","investorTotalCashFlow","yourCashInvested","investorROI","preferredReturns","yours","investor","remainingCashFlowSplit","validateOwnership","businessMetrics","warnings","expectedInvestorReturn","totalCashFlow","verifyCalculations","testScenario","businessEVA","expectedRanges","ownership","formatCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","formatPercentage","toFixed","calculateTotalCashNeeded","variables","totalCashNeeded","allocateFundingByPriority","downPaymentNeeded","allocation","remainingDownPayment","used","downPaymentGap","totalAllocated","calculatePurchasePriceFinancing","fundingAllocation","amountNeedingBankFinancing","sbaLoanPrincipal","totalDownPaymentCovered","calculateBusinessDebtService","purchaseFinancing","sbaAnnualPayment","sellerAnnualPayment","totalBusinessDebtService","calculatePersonalDebtService","houseEquityPayment","taiwanesePayment","totalPersonalDebtService","calculatePriorityBasedWACC","totalFunding","weightedCost","afterTaxCostRates","Object","entries","forEach","_ref","source","calculatePriorityBasedOwnership","houseEquityRisk","totalPersonalRisk","totalEquity","calculatePersonalCostOfCapital","totalPersonalFunding","weightedPersonalCost","personalCostRates","personalSources","calculateScenariosWithPriority","targetRevenues","netMargin","netProfitMarginSource","valuationMultipleSource","downPaymentCalculation","calculateDownPaymentNeeded","fees","personalCostOfCapital","afterTaxRates","personalFunding","techInvestmentAmortization","ownerDistributionCalculation","yourTotalCashInvested","yourNetAnnualGain","yourCashInvestedComponents","netAnnualGainComponents","calculateCapitalUtilizationRate","getCapitalUtilizationStatus","color","level","label","calculateLeverageMultiplier","totalInvestment","getLeverageMultiplierStatus","multiplier","calculatePriceToRevenueRatio","getPriceToRevenueStatus","ratio","calculateEBITDAMargin","getEBITDAMarginStatus","margin","calculateBusinessCashConversion","getCashConversionStatus","conversion","calculateRevenueToInvestmentEfficiency","yourTotalInvestment","getRevenueEfficiencyStatus","efficiency","calculateRiskAdjustedReturn","riskFreeRate","getRiskAdjustedStatus","calculateIncomeReplacementRatio","currentSalary","getIncomeReplacementStatus","calculateWealthBuildingVelocity","totalReturnMultiple","investmentPeriod","annualWealthCreation","getWealthVelocityStatus","velocity","calculateExitValueRange","conservativeMultiple","expectedMultiple","optimisticMultiple","conservative","expected","optimistic","calculateStressTestResults","baseROI","revenueStress","marginStress","rateStress","revenueStressROI","marginStressROI","rateStressROI","minROI","getStressTestStatus","calculateGrowthFundingCapacity","maxSustainableDebt","currentTotalDebt","projectedYear3CashFlow","leverageMultiplier","currentDebtCapacity","cashFlowGrowthCapacity","getGrowthCapacityStatus","capacity"],"sources":["/Users/juihanlin/Desktop/Biz Acquisition Calculator/src/utils/calculations.js"],"sourcesContent":["// Debug logging functions for comprehensive metric tracking\nexport const DEBUG_METRICS = true;\n\nexport function logMetricCalculation(sectionName, metricName, inputs, formula, result, assumptions = {}) {\n  if (!DEBUG_METRICS) return;\n  \n  console.group(`üìä ${sectionName} - ${metricName}`);\n  console.log(`üî¢ INPUTS:`, inputs);\n  console.log(`üìê FORMULA: ${formula}`);\n  console.log(`üìã ASSUMPTIONS:`, assumptions);\n  console.log(`‚úÖ RESULT: ${result}`);\n  console.log(`---`);\n  console.groupEnd();\n}\n\nexport function logAllMetricsSummary(scenario, metrics) {\n  if (!DEBUG_METRICS) return;\n  \n  console.group(\"üìä DASHBOARD METRICS SUMMARY\");\n  \n  console.log(\"üè¢ DEAL STRUCTURE:\");\n  console.log(`  Purchase Price: ${metrics.purchasePrice}`);\n  console.log(`  Available Cash: ${metrics.availableCash}`);\n  console.log(`  Cash Surplus: ${metrics.cashSurplus}`);\n  console.log(`  WACC: ${metrics.wacc}%`);\n  \n  console.log(\"üìà BUSINESS HEALTH:\");\n  console.log(`  DSCR: ${metrics.businessDSCR}x`);\n  console.log(`  ROA: ${metrics.businessROA}%`);\n  console.log(`  Debt/EBITDA: ${metrics.debtToEBITDA}x`);\n  console.log(`  Interest Coverage: ${metrics.interestCoverage}x`);\n  \n  console.log(\"üí∞ PERSONAL RETURNS:\");\n  console.log(`  Your ROI: ${metrics.yourROI}%`);\n  console.log(`  Cash-on-Cash: ${metrics.cashOnCashReturn}%`);\n  console.log(`  Payback: ${metrics.paybackPeriod} years`);\n  \n  console.log(\"üìä KEY ASSUMPTIONS:\");\n  console.log(`  Target Revenue: ${scenario.targetRevenue}`);\n  console.log(`  Net Profit Margin: ${scenario.netProfitMargin}%`);\n  console.log(`  Valuation Multiple: ${scenario.valuationMultiple}x`);\n  console.log(`  Revenue Growth: ${scenario.revenueGrowthRate}%`);\n  console.log(`  Working Capital %: ${scenario.workingCapitalPercent}%`);\n  console.log(`  Management Salary: ${scenario.managementSalary}`);\n  \n  console.groupEnd();\n}\n\n// SBA loan payment calculation\nexport const calculateSBAPayment = (principal, rate = 0.115, years = 10) => {\n  const monthlyRate = rate / 12;\n  const payments = years * 12;\n  return (principal * monthlyRate * Math.pow(1 + monthlyRate, payments)) / \n         (Math.pow(1 + monthlyRate, payments) - 1) * 12;\n};\n\n// Seller note payment calculation  \nexport const calculateSellerPayment = (principal, rate = 0.08, years = 5) => {\n  const monthlyRate = rate / 12;\n  const payments = years * 12;\n  return (principal * monthlyRate * Math.pow(1 + monthlyRate, payments)) / \n         (Math.pow(1 + monthlyRate, payments) - 1) * 12;\n};\n\n// Expected value calculation\nexport const calculateExpectedValue = (scenarios, probabilities) => {\n  return (scenarios.bestCase * probabilities.bestCase / 100) +\n         (scenarios.mostLikely * probabilities.mostLikely / 100) +\n         (scenarios.worstCase * probabilities.worstCase / 100);\n};\n\n// Auto-normalize probabilities\nexport const normalizeProbabilities = (best, likely, worst) => {\n  const total = best + likely + worst;\n  if (total !== 100) {\n    const factor = 100 / total;\n    return {\n      best: Math.round(best * factor),\n      likely: Math.round(likely * factor),\n      worst: Math.round(worst * factor)\n    };\n  }\n  return { best, likely, worst };\n};\n\n// SBA minimum constraint\nexport const validateSBADownPayment = (value) => Math.max(value, 10);\n\n// Debt service coverage validation\nexport const validateDebtCoverage = (ebitda, debtService) => debtService / ebitda <= 0.8;\n\n// Generate bell curve data\nexport const generateBellCurve = (mean, min, max) => {\n  const stdDev = (max - min) / 6;\n  const points = [];\n  for (let x = min; x <= max; x += (max - min) / 100) {\n    const y = Math.exp(-0.5 * Math.pow((x - mean) / stdDev, 2));\n    points.push({ x, y });\n  }\n  return points;\n};\n\n// Calculate total cash required\nexport const calculateTotalCashRequired = (params) => {\n  const {\n    purchasePrice,\n    sbaDownPaymentPercent,\n    workingCapitalPercent,\n    targetRevenue,\n    techInvestment,\n    sellerFinancingPercent = 20, // Default seller financing percentage\n    dueDiligencePercent = 1.5,\n    professionalFeesPercent = 0.8,\n    contingencyPercent = 2.5\n  } = params;\n\n  // Calculate financing structure correctly\n  const sellerFinancingAmount = purchasePrice * (sellerFinancingPercent / 100);\n  const sbaLoanAmount = purchasePrice - sellerFinancingAmount;\n  const sbaDownPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n  \n  // Note: Total financing may exceed purchase price if both SBA and seller financing are used\n  // This is typical in SBA deals where seller financing is additional to SBA loan\n  \n  const workingCapital = targetRevenue * (workingCapitalPercent / 100);\n  const dueDiligence = purchasePrice * (dueDiligencePercent / 100);\n  const professionalFees = purchasePrice * (professionalFeesPercent / 100);\n  const contingency = purchasePrice * (contingencyPercent / 100);\n\n  return {\n    downPayment: sbaDownPayment,\n    workingCapital,\n    dueDiligence,\n    professionalFees,\n    techInvestment,\n    contingency,\n    total: sbaDownPayment + workingCapital + dueDiligence + professionalFees + techInvestment + contingency\n  };\n};\n\n// Calculate annual cash to pocket\nexport const calculateAnnualCashToPocket = (params) => {\n  const {\n    targetRevenue,\n    netProfitMarginPercent,\n    sbaLoanAmount,\n    sellerFinancingAmount,\n    managementSalary,\n    techInvestment\n  } = params;\n\n  const ebitda = targetRevenue * (netProfitMarginPercent / 100);\n  const sbaPayment = calculateSBAPayment(sbaLoanAmount);\n  const sellerPayment = calculateSellerPayment(sellerFinancingAmount);\n  const techInvestmentAmortized = techInvestment / 3; // Amortized over 3 years\n\n  return {\n    ebitda,\n    sbaPayment,\n    sellerPayment,\n    managementSalary,\n    techInvestmentAmortized,\n    netCashFlow: ebitda - sbaPayment - sellerPayment - managementSalary - techInvestmentAmortized\n  };\n};\n\n// Calculate Debt Service Coverage Ratio (DSCR)\nexport const calculateDSCR = (annualEBITDA, totalAnnualDebtService) => {\n  const result = totalAnnualDebtService > 0 ? annualEBITDA / totalAnnualDebtService : 0;\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Business Health\",\n      \"DSCR (Debt Service Coverage Ratio)\",\n      {\n        annualEBITDA,\n        totalAnnualDebtService\n      },\n      \"DSCR = Annual EBITDA √∑ Total Annual Debt Service\",\n      result,\n      {\n        interpretation: result >= 1.25 ? \"Strong coverage\" : result >= 1.0 ? \"Adequate coverage\" : \"Weak coverage\",\n        calculation: `${annualEBITDA} √∑ ${totalAnnualDebtService} = ${result}x`\n      }\n    );\n  }\n  \n  return result;\n};\n\n// Calculate Cash-on-Cash Return\nexport const calculateCashOnCashReturn = (annualCashToPocket, personalCashInvested) => {\n  const result = personalCashInvested > 0 ? (annualCashToPocket / personalCashInvested) * 100 : 0;\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Personal Returns\",\n      \"Cash-on-Cash Return\",\n      {\n        annualCashToPocket,\n        personalCashInvested\n      },\n      \"Cash-on-Cash Return = (Annual Cash to Pocket √∑ Personal Cash Invested) √ó 100\",\n      result,\n      {\n        interpretation: result >= 20 ? \"Excellent return\" : result >= 15 ? \"Good return\" : result >= 10 ? \"Fair return\" : \"Poor return\",\n        calculation: `(${annualCashToPocket} √∑ ${personalCashInvested}) √ó 100 = ${result}%`\n      }\n    );\n  }\n  \n  return result;\n};\n\n// Calculate IRR using Newton-Raphson method\nexport const calculateIRR = (personalInvestment, cashFlows) => {\n  const tolerance = 0.0001;\n  const maxIterations = 100;\n  let guess = 0.1; // Start with 10%\n\n  for (let i = 0; i < maxIterations; i++) {\n    let npv = -personalInvestment;\n    let derivative = 0;\n\n    for (let j = 0; j < cashFlows.length; j++) {\n      const discountFactor = Math.pow(1 + guess, j + 1);\n      npv += cashFlows[j] / discountFactor;\n      derivative -= (j + 1) * cashFlows[j] / (discountFactor * (1 + guess));\n    }\n\n    const newGuess = guess - npv / derivative;\n    \n    if (Math.abs(newGuess - guess) < tolerance) {\n      const result = newGuess * 100; // Return as percentage\n      \n      if (DEBUG_METRICS) {\n        logMetricCalculation(\n          \"Personal Returns\",\n          \"IRR (Internal Rate of Return)\",\n          {\n            personalInvestment,\n            cashFlows,\n            iterations: i + 1\n          },\n          \"IRR = Rate where NPV = 0 (calculated using Newton-Raphson method)\",\n          result,\n          {\n            method: \"Newton-Raphson iteration\",\n            tolerance: tolerance,\n            maxIterations: maxIterations,\n            interpretation: result >= 15 ? \"Excellent return\" : result >= 10 ? \"Good return\" : result >= 5 ? \"Fair return\" : \"Poor return\"\n          }\n        );\n      }\n      \n      return result;\n    }\n    \n    guess = newGuess;\n  }\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Personal Returns\",\n      \"IRR (Internal Rate of Return)\",\n      {\n        personalInvestment,\n        cashFlows\n      },\n      \"IRR = Rate where NPV = 0 (calculated using Newton-Raphson method)\",\n      null,\n      {\n        method: \"Newton-Raphson iteration\",\n        tolerance: tolerance,\n        maxIterations: maxIterations,\n        error: \"No convergence - IRR calculation failed\"\n      }\n    );\n  }\n  \n  return null; // No convergence\n};\n\n// Calculate Multiple on Invested Capital (MOIC)\nexport const calculateMOIC = (personalCashInvested, fiveYearProjections) => {\n  const totalCashReturned = fiveYearProjections.reduce((sum, year) => sum + year.cashFlow, 0);\n  const businessValueAtExit = fiveYearProjections[4].ebitda * 4.2; // Assume same multiple\n  const result = (totalCashReturned + businessValueAtExit) / personalCashInvested;\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Personal Returns\",\n      \"MOIC (Multiple on Invested Capital)\",\n      {\n        personalCashInvested,\n        totalCashReturned,\n        businessValueAtExit,\n        year5EBITDA: fiveYearProjections[4].ebitda,\n        exitMultiple: 4.2\n      },\n      \"MOIC = (Total Cash Returned + Business Value at Exit) √∑ Personal Cash Invested\",\n      result,\n      {\n        exitMultipleSource: \"Assumed 4.2x EBITDA exit multiple\",\n        calculation: `(${totalCashReturned} + ${businessValueAtExit}) √∑ ${personalCashInvested} = ${result}x`\n      }\n    );\n  }\n  \n  return result;\n};\n\n// Calculate Payback Period\nexport const calculatePaybackPeriod = (personalCashInvested, fiveYearProjections) => {\n  let cumulativeCashFlow = 0;\n  let result = '>5 years';\n  \n  for (let i = 0; i < fiveYearProjections.length; i++) {\n    cumulativeCashFlow += fiveYearProjections[i].cashFlow;\n    if (cumulativeCashFlow >= personalCashInvested) {\n      result = i + 1 + ((personalCashInvested - (cumulativeCashFlow - fiveYearProjections[i].cashFlow)) / fiveYearProjections[i].cashFlow);\n      break;\n    }\n  }\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Personal Returns\",\n      \"Payback Period\",\n      {\n        personalCashInvested,\n        cumulativeCashFlow,\n        fiveYearProjections: fiveYearProjections.map(p => ({ year: p.year, cashFlow: p.cashFlow }))\n      },\n      \"Payback Period = Years until cumulative cash flow exceeds personal investment\",\n      result,\n      {\n        interpretation: typeof result === 'number' ? `${result} years to recover investment` : \"Investment not recovered within 5 years\",\n        calculation: `Cumulative cash flow: ${cumulativeCashFlow} vs Personal Investment: ${personalCashInvested}`\n      }\n    );\n  }\n  \n  return result;\n};\n\n// Enhanced Risk Score Calculation\nexport const calculateEnhancedRiskScore = (dscr, cashOnCash, sellerFinancingPercent) => {\n  let score = 5; // Base score\n  \n  // DSCR scoring\n  if (dscr >= 1.5) score += 2;\n  else if (dscr >= 1.25) score += 1;\n  else score -= 2;\n  \n  // Cash-on-Cash scoring\n  if (cashOnCash >= 20) score += 2;\n  else if (cashOnCash >= 15) score += 1;\n  else if (cashOnCash < 10) score -= 1;\n  \n  // Seller financing scoring\n  if (sellerFinancingPercent >= 20) score += 1; // Seller has skin in game\n  \n  const result = Math.max(1, Math.min(10, score));\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Risk Assessment\",\n      \"Enhanced Risk Score\",\n      {\n        dscr,\n        cashOnCash,\n        sellerFinancingPercent\n      },\n      \"Risk Score = Base(5) + DSCR Bonus + Cash-on-Cash Bonus + Seller Financing Bonus\",\n      result,\n      {\n        baseScore: 5,\n        dscrContribution: dscr >= 1.5 ? 2 : dscr >= 1.25 ? 1 : -2,\n        cashOnCashContribution: cashOnCash >= 20 ? 2 : cashOnCash >= 15 ? 1 : cashOnCash < 10 ? -1 : 0,\n        sellerFinancingContribution: sellerFinancingPercent >= 20 ? 1 : 0,\n        interpretation: result <= 3 ? \"High Risk\" : result <= 6 ? \"Medium Risk\" : \"Low Risk\"\n      }\n    );\n  }\n  \n  return result;\n};\n\n// Calculate financing structure\nexport const calculateFinancingStructure = (params) => {\n  const {\n    purchasePrice,\n    sellerFinancingPercent,\n    sbaDownPaymentPercent\n  } = params;\n\n  const sellerFinancing = purchasePrice * (sellerFinancingPercent / 100);\n  const sbaLoanAmount = purchasePrice - sellerFinancing;\n  const downPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n\n  return {\n    purchasePrice,\n    sellerFinancing,\n    sbaLoanAmount,\n    downPayment\n  };\n};\n\n// Calculate 5-year projections for advanced metrics\nexport const calculateFiveYearProjections = (params) => {\n  const {\n    targetRevenue,\n    revenueGrowthRatePercent,\n    netProfitMarginPercent,\n    sbaLoanAmount,\n    sellerFinancingAmount,\n    managementSalary,\n    techInvestment,\n    sbaInterestRate = 11.5,\n    sellerInterestRate = 8\n  } = params;\n\n  const projections = [];\n  let currentRevenue = targetRevenue;\n\n  for (let year = 1; year <= 5; year++) {\n    const ebitda = currentRevenue * (netProfitMarginPercent / 100);\n    const sbaPayment = calculateSBAPayment(sbaLoanAmount, sbaInterestRate / 100, 10);\n    const sellerPayment = calculateSellerPayment(sellerFinancingAmount, sellerInterestRate / 100, 5);\n    const techInvestmentAmortized = year <= 3 ? techInvestment / 3 : 0;\n\n    const netCashFlow = ebitda - sbaPayment - sellerPayment - managementSalary - techInvestmentAmortized;\n\n    projections.push({\n      year,\n      revenue: currentRevenue,\n      ebitda,\n      cashFlow: netCashFlow\n    });\n\n    currentRevenue *= (1 + revenueGrowthRatePercent / 100);\n  }\n\n  return projections;\n};\n\n// Calculate business targeting metrics\nexport const calculateBusinessTargetingMetrics = (availableCash, targetRevenue) => {\n  return {\n    maxSafePurchasePrice: availableCash * 4, // Assuming 25% total cash requirement\n    minRequiredEBITDA: (availableCash * 4 * 0.12) / 1.25, // 12% debt service / 1.25x coverage\n    targetRevenueRange: {\n      min: targetRevenue * 0.8,\n      max: targetRevenue * 1.2\n    },\n    recommendedMultipleRange: {\n      min: 3.5,\n      max: 5.0\n    }\n  };\n};\n\n// Calculate risk score (1-10)\nexport const calculateRiskScore = (params) => {\n  let riskScore = 5; // Base score\n\n  // Debt service coverage ratio\n  const ebitda = params.targetRevenue * (params.netProfitMarginPercent / 100);\n  const sbaPayment = calculateSBAPayment(params.sbaLoanAmount);\n  const sellerPayment = calculateSellerPayment(params.sellerFinancingAmount);\n  const totalDebtService = sbaPayment + sellerPayment;\n  const debtCoverageRatio = ebitda / totalDebtService;\n\n  if (debtCoverageRatio < 1.25) riskScore += 3;\n  else if (debtCoverageRatio < 1.5) riskScore += 1;\n  else if (debtCoverageRatio > 2.0) riskScore -= 1;\n\n  // Working capital ratio\n  const workingCapitalRatio = (params.workingCapitalPercent / 100) / (params.netProfitMarginPercent / 100);\n  if (workingCapitalRatio > 0.8) riskScore += 2;\n  else if (workingCapitalRatio < 0.3) riskScore -= 1;\n\n  // SBA down payment\n  if (params.sbaDownPaymentPercent < 12) riskScore += 1;\n  else if (params.sbaDownPaymentPercent > 15) riskScore -= 1;\n\n  return Math.max(1, Math.min(10, riskScore));\n};\n\n// Calculate business-only WACC (excluding personal loans)\nexport const calculateBusinessWACC = (sbaLoan, sellerFinancing, purchasePrice) => {\n  const totalBusinessDebt = sbaLoan.amount + sellerFinancing.amount;\n  const businessEquity = purchasePrice - totalBusinessDebt;\n  const totalBusinessCapital = purchasePrice;\n  \n  if (totalBusinessCapital <= 0) return 0;\n  \n  const debtWeight = totalBusinessDebt / totalBusinessCapital;\n  const equityWeight = businessEquity / totalBusinessCapital;\n  \n  // Different tax treatment for different debt types\n  const sbaAfterTaxCost = 0.115 * 0.75; // 25% tax benefit for business-deductible SBA\n  const sellerAfterTaxCost = 0.08 * 0.9; // 10% tax benefit for seller financing (less deductible)\n  const afterTaxDebtCost = totalBusinessDebt > 0 ? \n    ((sbaLoan.amount * sbaAfterTaxCost + sellerFinancing.amount * sellerAfterTaxCost) / totalBusinessDebt) : 0;\n  const equityCost = 0.15; // Business equity cost\n  \n  return (debtWeight * afterTaxDebtCost) + (equityWeight * equityCost);\n};\n\n// Calculate business-level EVA (excluding personal loans)\nexport const calculateBusinessEVA = (businessEBITDA, businessCapitalInvested, businessWACC) => {\n  const taxRate = 0.25;\n  const nopat = businessEBITDA * (1 - taxRate); // Net Operating Profit After Tax\n  const capitalCharge = businessCapitalInvested * businessWACC;\n  return nopat - capitalCharge;\n};\n\n// Calculate business cash flow (company level only)\nexport const calculateBusinessCashFlow = (scenario, loanStructure, businessCapitalInvested) => {\n  const businessDebtService = \n    loanStructure.sbaLoan.annualPayment + \n    loanStructure.sellerFinancing.annualPayment;\n  \n  const businessFreeCashFlow = \n    scenario.ebitda - \n    businessDebtService - \n    scenario.managementSalary - \n    scenario.techInvestmentAnnual;\n  \n  const businessDSCR = businessDebtService > 0 ? scenario.ebitda / businessDebtService : 0;\n  \n  return {\n    businessRevenue: scenario.targetRevenue,\n    businessEBITDA: scenario.ebitda,\n    businessDebtService: businessDebtService,\n    businessFreeCashFlow: businessFreeCashFlow,\n    businessDSCR: businessDSCR,\n    businessROA: businessCapitalInvested > 0 ? (businessFreeCashFlow / businessCapitalInvested) * 100 : 0\n  };\n};\n\n// Calculate personal cash flow (owner level only)\nexport const calculatePersonalCashFlow = (businessCashFlow, personalLoans, ownershipData, fundingSources) => {\n  const ownerDistribution = businessCashFlow.businessFreeCashFlow * ownershipData.yourOwnership;\n  \n  const personalDebtService = \n    personalLoans.houseEquity.annualPayment + \n    personalLoans.taiwaneseLoan.annualPayment;\n  \n  const personalNetCashFlow = ownerDistribution - personalDebtService;\n  \n  const personalCashInvested = \n    (fundingSources.personalCash.enabled ? fundingSources.personalCash.amount : 0) + \n    (fundingSources.houseEquity.enabled ? fundingSources.houseEquity.amount : 0) + \n    (fundingSources.taiwaneseLoan.enabled ? fundingSources.taiwaneseLoan.amount : 0);\n  \n  const personalROI = personalCashInvested > 0 ? \n    (personalNetCashFlow / personalCashInvested) * 100 : 0;\n  \n  return {\n    ownerDistribution: ownerDistribution,\n    personalDebtService: personalDebtService,\n    personalNetCashFlow: personalNetCashFlow,\n    personalCashInvested: personalCashInvested,\n    personalROI: personalROI\n  };\n};\n\n// Calculate personal projections\nexport const calculatePersonalProjections = (businessProjections, personalLoans, ownershipData) => {\n  return businessProjections.map((year, index) => {\n    const businessFCF = year.businessFreeCashFlow;\n    const ownerDistribution = businessFCF * ownershipData.yourOwnership;\n    const personalDebtService = personalLoans.total;\n    const yourFCF = ownerDistribution - personalDebtService;\n    \n    return {\n      year: index + 1,\n      businessFCF: businessFCF,\n      ownerDistribution: ownerDistribution,\n      yourFCF: yourFCF,\n      DSCR: year.businessDSCR,\n      cumulative: index === 0 ? yourFCF : (index > 0 ? businessProjections[index - 1].cumulative : 0) + yourFCF\n    };\n  });\n};\n\n// Calculate risk-adjusted ownership with fair methodology\nexport const calculateRiskAdjustedOwnership = (fundingSources, managementValue = 150000) => {\n  // Calculate risk-weighted contributions\n  const personalCashRisk = fundingSources.personalCash.enabled ? fundingSources.personalCash.amount : 0;\n  \n  // Taiwanese loan: Personal guarantee = 80% risk weight\n  const taiwaneseLoanRisk = fundingSources.taiwaneseLoan.enabled ? \n    fundingSources.taiwaneseLoan.amount * 0.8 : 0;\n    \n  // Home equity: Personal asset at risk = 120% risk weight (higher risk premium)\n  const homeEquityRisk = fundingSources.houseEquity.enabled ? \n    fundingSources.houseEquity.amount * 1.2 : 0;\n    \n  // SBA loan: Personal guarantee but asset-backed = 30% risk weight\n  // const sbaRisk = 0; // SBA loan is debt, not equity contribution\n  \n  // Management/operational value (sweat equity)\n  const sweatEquityValue = managementValue;\n  \n  // Total personal risk-adjusted contribution\n  const personalRiskAdjusted = personalCashRisk + taiwaneseLoanRisk + homeEquityRisk + sweatEquityValue;\n  \n  // Outside investor contribution (100% risk weight)\n  const investorContribution = fundingSources.additionalInvestment.enabled ? \n    fundingSources.additionalInvestment.amount : 0;\n  \n  // Total risk-adjusted equity\n  const totalRiskAdjustedEquity = personalRiskAdjusted + investorContribution;\n  \n  // Base ownership calculation\n  const baseOwnership = totalRiskAdjustedEquity > 0 ? \n    personalRiskAdjusted / totalRiskAdjustedEquity : 1;\n  \n  // Dynamic control premium based on investor amount\n  const controlPremium = investorContribution > 0 ? \n    Math.min(0.05, investorContribution / 1000000) : 0; // Max 5%, scales with investment size\n  \n  // Final ownership (capped at 95% to be fair to investors)\n  const finalOwnership = Math.min(0.95, baseOwnership + controlPremium);\n  \n  return {\n    yourOwnership: finalOwnership,\n    investorOwnership: 1 - finalOwnership,\n    breakdown: {\n      personalCashRisk,\n      taiwaneseLoanRisk,\n      homeEquityRisk,\n      sweatEquityValue,\n      investorContribution,\n      controlPremium: controlPremium * 100\n    }\n  };\n};\n\n// Calculate ownership cash flows with preferred return structure\nexport const calculateOwnershipCashFlows = (totalBusinessCashFlow, ownershipData, fundingSources) => {\n  const investorAmount = fundingSources.additionalInvestment.enabled ? \n    fundingSources.additionalInvestment.amount : 0;\n  const personalCashAmount = fundingSources.personalCash.enabled ? \n    fundingSources.personalCash.amount : 0;\n  \n  // Investor preferred return (8% on their investment)\n  const investorPreferredReturn = investorAmount * 0.08;\n  \n  // Your preferred return (6% on personal cash)\n  const yourPreferredReturn = personalCashAmount * 0.06;\n  \n  // Total preferred returns\n  const totalPreferredReturns = investorPreferredReturn + yourPreferredReturn;\n  \n  // Remaining cash flow after preferred returns\n  const remainingCashFlow = Math.max(0, totalBusinessCashFlow - totalPreferredReturns);\n  \n  // Split remaining cash flow based on ownership percentages\n  const yourRemainingShare = remainingCashFlow * ownershipData.yourOwnership;\n  const investorRemainingShare = remainingCashFlow * ownershipData.investorOwnership;\n  \n  // Total distributions\n  const yourTotalCashFlow = yourPreferredReturn + yourRemainingShare;\n  const investorTotalCashFlow = investorPreferredReturn + investorRemainingShare;\n  \n  // Calculate ROI on actual cash invested (not risk-adjusted amounts)\n  const yourCashInvested = personalCashAmount;\n  const yourROI = yourCashInvested > 0 ? (yourTotalCashFlow / yourCashInvested) * 100 : 0;\n  \n  const investorROI = investorAmount > 0 ? (investorTotalCashFlow / investorAmount) * 100 : 0;\n  \n  return {\n    yourTotalCashFlow,\n    investorTotalCashFlow,\n    yourROI,\n    investorROI,\n    preferredReturns: {\n      yours: yourPreferredReturn,\n      investor: investorPreferredReturn\n    },\n    remainingCashFlowSplit: {\n      yours: yourRemainingShare,\n      investor: investorRemainingShare\n    }\n  };\n};\n\n// Validate ownership for reasonableness\nexport const validateOwnership = (ownershipData, fundingSources, businessMetrics) => {\n  const warnings = [];\n  \n  // Check if investor is getting fair deal\n  if (ownershipData.investorOwnership < 0.05 && fundingSources.additionalInvestment.amount > 50000) {\n    warnings.push(\"‚ö†Ô∏è Investor ownership very low - may not be attractive\");\n  }\n  \n  // Check if you're giving up too much\n  if (ownershipData.yourOwnership < 0.6 && fundingSources.personalCash.amount > fundingSources.additionalInvestment.amount) {\n    warnings.push(\"‚ö†Ô∏è Your ownership low despite majority funding\");\n  }\n  \n  // Check for reasonable investor return (simplified calculation)\n  const investorAmount = fundingSources.additionalInvestment.enabled ? fundingSources.additionalInvestment.amount : 0;\n  const expectedInvestorReturn = investorAmount > 0 ? (businessMetrics.totalCashFlow * ownershipData.investorOwnership / investorAmount) * 100 : 0;\n  if (expectedInvestorReturn < 15 && investorAmount > 0) {\n    warnings.push(\"‚ö†Ô∏è Investor expected return below market (15%+)\");\n  }\n  \n  return warnings;\n};\n\n// Verification function to test calculations with known values\nexport const verifyCalculations = (testScenario) => {\n  const {\n    targetRevenue = 2500000,\n    netProfitMargin = 25,\n    valuationMultiple = 4,\n    sbaLoanAmount = 1500000,\n    sellerFinancingAmount = 500000,\n    personalCash = 550000,\n    additionalInvestment = 100000\n  } = testScenario;\n\n  // Test business calculations\n  const ebitda = targetRevenue * (netProfitMargin / 100);\n  const purchasePrice = ebitda * valuationMultiple;\n  const businessCapitalInvested = purchasePrice + (targetRevenue * 0.1) + (purchasePrice * 0.015) + (purchasePrice * 0.008);\n  \n  // Test WACC\n  const businessWACC = calculateBusinessWACC(\n    { amount: sbaLoanAmount, rate: 0.115 },\n    { amount: sellerFinancingAmount, rate: 0.08 },\n    purchasePrice\n  );\n  \n  // Test EVA\n  const businessEVA = calculateBusinessEVA(ebitda, businessCapitalInvested, businessWACC);\n  \n  // Test ownership\n  const fundingSources = {\n    personalCash: { enabled: true, amount: personalCash },\n    taiwaneseLoan: { enabled: true, amount: 725000 },\n    houseEquity: { enabled: false, amount: 200000 },\n    additionalInvestment: { enabled: true, amount: additionalInvestment }\n  };\n  \n  const ownershipData = calculateRiskAdjustedOwnership(fundingSources);\n  \n  return {\n    testScenario: {\n      targetRevenue,\n      ebitda,\n      purchasePrice,\n      businessCapitalInvested,\n      businessWACC: businessWACC * 100,\n      businessEVA,\n      ownershipData\n    },\n    expectedRanges: {\n      businessWACC: { min: 7, max: 12 },\n      businessEVA: { min: 0, max: 200000 },\n      ownership: { min: 0.6, max: 0.95 }\n    }\n  };\n};\n\n// Format currency\nexport const formatCurrency = (amount) => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n};\n\n// Format percentage\nexport const formatPercentage = (value) => {\n  return `${value.toFixed(1)}%`;\n}; \n\n// FUNDING PRIORITY ALLOCATION FUNCTIONS\n// Calculate total cash needed for acquisition\nexport const calculateTotalCashNeeded = (scenario, variables) => {\n  const purchasePrice = scenario.purchasePrice;\n  const workingCapitalPercent = variables.workingCapital || 14.6;\n  const workingCapital = scenario.targetRevenue * (workingCapitalPercent / 100);\n  const dueDiligence = purchasePrice * 0.015;\n  const professionalFees = purchasePrice * 0.008;\n  const contingency = purchasePrice * 0.025;\n  const techInvestment = variables.techInvestment || 100000;\n  \n  // Calculate SBA down payment correctly\n  const sellerFinancingPercent = variables.sellerFinancing || 20;\n  const sellerFinancingAmount = purchasePrice * (sellerFinancingPercent / 100);\n  const sbaLoanAmount = purchasePrice - sellerFinancingAmount;\n  const sbaDownPaymentPercent = variables.sbaDownPayment || 12;\n  const sbaDownPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n  \n  const totalCashNeeded = sbaDownPayment + workingCapital + dueDiligence + professionalFees + contingency + techInvestment;\n  \n  return {\n    purchasePrice,\n    workingCapital,\n    dueDiligence,\n    professionalFees,\n    contingency,\n    techInvestment,\n    sbaDownPayment,\n    totalCashNeeded\n  };\n};\n\n// Allocate funding by priority order (lowest to highest cost) - FOCUSED ON DOWN PAYMENT\nexport const allocateFundingByPriority = (downPaymentNeeded, fundingSources) => {\n  const allocation = {\n    taiwaneseLoan: 0,\n    personalCash: 0,\n    additionalInvestment: 0,\n    sellerFinancing: 0,\n    houseEquity: 0,\n    sbaLoan: 0\n  };\n  \n  let remainingDownPayment = downPaymentNeeded;\n  \n  // Priority 1: Taiwanese Loan (cheapest - 2.8%) - $300,000 available\n  if (fundingSources.taiwaneseLoan.enabled && remainingDownPayment > 0) {\n    const used = Math.min(remainingDownPayment, fundingSources.taiwaneseLoan.amount);\n    allocation.taiwaneseLoan = used;\n    remainingDownPayment -= used;\n  }\n  \n  // Priority 2: Personal Cash (8% opportunity cost) - $50,000 available\n  if (fundingSources.personalCash.enabled && remainingDownPayment > 0) {\n    const used = Math.min(remainingDownPayment, fundingSources.personalCash.amount);\n    allocation.personalCash = used;\n    remainingDownPayment -= used;\n  }\n  \n  // Priority 3: Additional Investment (15% expected return) - $50,000 available\n  if (fundingSources.additionalInvestment.enabled && remainingDownPayment > 0) {\n    const used = Math.min(remainingDownPayment, fundingSources.additionalInvestment.amount);\n    allocation.additionalInvestment = used;\n    remainingDownPayment -= used;\n  }\n  \n  // Priority 4: Seller Financing (8%) - $0 available (disabled)\n  if (fundingSources.sellerFinancing.enabled && remainingDownPayment > 0) {\n    const used = Math.min(remainingDownPayment, fundingSources.sellerFinancing.amount);\n    allocation.sellerFinancing = used;\n    remainingDownPayment -= used;\n  }\n  \n  // Priority 5: Home Equity Loan (8% but personal asset at risk) - $98,273 available\n  if (fundingSources.houseEquity.enabled && remainingDownPayment > 0) {\n    const used = Math.min(remainingDownPayment, fundingSources.houseEquity.amount);\n    allocation.houseEquity = used;\n    remainingDownPayment -= used;\n  }\n  \n  // Priority 6: SBA Loan (11.5% - highest cost, use as last resort) - $0 available (disabled)\n  if (remainingDownPayment > 0) {\n    allocation.sbaLoan = remainingDownPayment; // Whatever is left\n  }\n  \n  return {\n    allocation,\n    downPaymentGap: remainingDownPayment < 0 ? 0 : remainingDownPayment,\n    totalAllocated: downPaymentNeeded - Math.max(0, remainingDownPayment),\n    downPaymentNeeded: downPaymentNeeded,\n    remainingDownPayment: Math.max(0, remainingDownPayment)\n  };\n};\n\n// Determine purchase price financing structure\nexport const calculatePurchasePriceFinancing = (purchasePrice, fundingAllocation, variables) => {\n  // Seller financing reduces the amount that needs bank financing\n  const sellerFinancingAmount = fundingAllocation.allocation.sellerFinancing || 0;\n  const amountNeedingBankFinancing = purchasePrice - sellerFinancingAmount;\n  \n  // SBA loan covers remaining purchase price\n  const sbaLoanAmount = Math.max(0, amountNeedingBankFinancing);\n  const sbaDownPaymentPercent = Math.max(variables.sbaDownPayment || 10, 10);\n  const sbaDownPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n  const sbaLoanPrincipal = sbaLoanAmount - sbaDownPayment;\n  \n  return {\n    sellerFinancingAmount,\n    sbaLoanAmount,\n    sbaDownPayment,\n    sbaLoanPrincipal,\n    totalDownPaymentCovered: sbaDownPayment // This comes from cash allocation\n  };\n};\n\n// Calculate business debt service with priority allocation\nexport const calculateBusinessDebtService = (purchaseFinancing) => {\n  // Only SBA loan and seller financing create debt service for the business\n  const sbaAnnualPayment = calculateSBAPayment(\n    purchaseFinancing.sbaLoanPrincipal, \n    0.115, \n    10\n  );\n  \n  const sellerAnnualPayment = calculateSellerPayment(\n    purchaseFinancing.sellerFinancingAmount, \n    0.08, \n    5\n  );\n  \n  return {\n    sbaAnnualPayment,\n    sellerAnnualPayment,\n    totalBusinessDebtService: sbaAnnualPayment + sellerAnnualPayment\n  };\n};\n\n// Calculate personal debt service with priority allocation\nexport const calculatePersonalDebtService = (fundingAllocation) => {\n  // Only personal loans create personal debt service\n  const houseEquityPayment = fundingAllocation.allocation.houseEquity > 0 ? \n    calculateSBAPayment(fundingAllocation.allocation.houseEquity, 0.08, 15) : 0;\n    \n  const taiwanesePayment = fundingAllocation.allocation.taiwaneseLoan > 0 ? \n    calculateSBAPayment(fundingAllocation.allocation.taiwaneseLoan, 0.028, 10) : 0;\n  \n  return {\n    houseEquityPayment,\n    taiwanesePayment,\n    totalPersonalDebtService: houseEquityPayment + taiwanesePayment\n  };\n};\n\n// Calculate WACC with priority-based allocation - ALL FUNDING SOURCES\nexport const calculatePriorityBasedWACC = (fundingAllocation, purchasePrice) => {\n  // WACC should include ALL funding sources used for the business acquisition\n  // Each source has its own after-tax cost of capital\n  \n  let totalFunding = 0;\n  let weightedCost = 0;\n  \n  // After-tax cost rates for each funding source\n  const afterTaxCostRates = {\n    taiwaneseLoan: 0.028 * 0.75, // 2.8% √ó 0.75 = 2.1% after-tax (if business deductible)\n    personalCash: 0.08 * 0.75, // 8% √ó 0.75 = 6% after-tax (opportunity cost with tax benefit)\n    additionalInvestment: 0.15, // 15% equity cost (no tax benefit)\n    sellerFinancing: 0.08 * 0.75, // 8% √ó 0.75 = 6% after-tax\n    houseEquity: 0.08, // 8% (personal debt, no business tax benefit)\n    sbaLoan: 0.115 * 0.75 // 11.5% √ó 0.75 = 8.6% after-tax\n  };\n  \n  // Calculate weighted average cost of capital across all funding sources\n  Object.entries(fundingAllocation.allocation).forEach(([source, amount]) => {\n    if (amount > 0) {\n      totalFunding += amount;\n      weightedCost += amount * afterTaxCostRates[source];\n    }\n  });\n  \n  return totalFunding > 0 ? (weightedCost / totalFunding) * 100 : 0;\n};\n\n// Calculate ownership with priority-based allocation\nexport const calculatePriorityBasedOwnership = (fundingAllocation) => {\n  // Risk-adjusted personal contributions based on ACTUAL allocated amounts\n  const personalCashRisk = fundingAllocation.allocation.personalCash * 1.0;\n  const taiwaneseLoanRisk = fundingAllocation.allocation.taiwaneseLoan * 0.8; // Personal guarantee\n  const houseEquityRisk = fundingAllocation.allocation.houseEquity * 1.2; // Personal asset risk\n  \n  const totalPersonalRisk = personalCashRisk + taiwaneseLoanRisk + houseEquityRisk;\n  const investorContribution = fundingAllocation.allocation.additionalInvestment;\n  const totalEquity = totalPersonalRisk + investorContribution;\n  \n  const finalOwnership = totalEquity > 0 ? totalPersonalRisk / totalEquity : 1; // Removed control premium\n  \n  return {\n    yourOwnership: finalOwnership,\n    investorOwnership: 1 - finalOwnership,\n    breakdown: {\n      personalCashRisk,\n      taiwaneseLoanRisk,\n      houseEquityRisk,\n      investorContribution\n    }\n  };\n};\n\n// Calculate personal cost of capital (for personal funding sources)\nexport const calculatePersonalCostOfCapital = (fundingAllocation) => {\n  let totalPersonalFunding = 0;\n  let weightedPersonalCost = 0;\n  \n  // Only consider personal funding sources: Taiwanese Loan, Personal Cash, Home Equity\n  const personalCostRates = {\n    taiwaneseLoan: 0.028, // 2.8% - personal loan rate\n    personalCash: 0.08, // 8% opportunity cost\n    houseEquity: 0.08, // 8% home equity rate\n    // Excluded: additionalInvestment, sellerFinancing, sbaLoan (not personal funding)\n  };\n  \n  // Only calculate for personal funding sources\n  const personalSources = ['taiwaneseLoan', 'personalCash', 'houseEquity'];\n  \n  personalSources.forEach(source => {\n    const amount = fundingAllocation.allocation[source] || 0;\n    if (amount > 0) {\n      totalPersonalFunding += amount;\n      weightedPersonalCost += amount * personalCostRates[source];\n    }\n  });\n  \n  return totalPersonalFunding > 0 ? (weightedPersonalCost / totalPersonalFunding) * 100 : 0;\n};\n\n// Main scenario calculation with priority-based funding\nexport const calculateScenariosWithPriority = (targetRevenues, variables, fundingSources) => {\n  return targetRevenues.map(revenue => {\n    // Step 1: Calculate business metrics\n    const netMargin = variables.netProfitMargin || 25;\n    const valuationMultiple = variables.valuationMultiple || 4;\n    const ebitda = revenue * (netMargin / 100);\n    const purchasePrice = ebitda * valuationMultiple;\n    \n    // Log Purchase Price calculation\n    if (DEBUG_METRICS) {\n      logMetricCalculation(\n        \"Deal Structure\", \n        \"Purchase Price\",\n        {\n          targetRevenue: revenue,\n          netProfitMargin: netMargin,\n          valuationMultiple: valuationMultiple\n        },\n        \"Purchase Price = Target Revenue √ó Net Profit Margin √ó Valuation Multiple\",\n        purchasePrice,\n        {\n          netProfitMarginSource: \"User input assumption\",\n          valuationMultipleSource: \"Market multiple assumption\",\n          calculation: `${revenue} √ó ${netMargin}% √ó ${valuationMultiple}x = ${purchasePrice}`\n        }\n      );\n    }\n    \n    const businessMetrics = {\n      targetRevenue: revenue,\n      ebitda: ebitda,\n      purchasePrice: purchasePrice\n    };\n    \n    // Step 2: Calculate down payment needed (same logic as Scenario Comparison)\n    const downPaymentCalculation = calculateDownPaymentNeeded(businessMetrics, variables);\n    \n    // Log Down Payment calculation\n    if (DEBUG_METRICS) {\n      logMetricCalculation(\n        \"Deal Structure\",\n        \"Down Payment Needed\",\n        {\n          sbaDownPayment: downPaymentCalculation.sbaDownPayment,\n          workingCapital: downPaymentCalculation.workingCapital,\n          fees: downPaymentCalculation.fees\n        },\n        \"Down Payment = SBA Down Payment + Working Capital + Due Diligence + Professional Fees\",\n        downPaymentCalculation.downPaymentNeeded,\n        {\n          workingCapitalPercent: variables.workingCapital || 7.9,\n          dueDiligencePercent: 1.5,\n          professionalFeesPercent: 1.0,\n          calculation: `${downPaymentCalculation.sbaDownPayment} + ${downPaymentCalculation.workingCapital} + ${downPaymentCalculation.fees} = ${downPaymentCalculation.downPaymentNeeded}`\n        }\n      );\n    }\n    \n    // Step 3: Allocate funding by priority based on down payment needed\n    const fundingAllocation = allocateFundingByPriority(\n      downPaymentCalculation.downPaymentNeeded, \n      fundingSources\n    );\n    \n    // Step 4: Calculate purchase price financing\n    const purchaseFinancing = calculatePurchasePriceFinancing(\n      businessMetrics.purchasePrice, \n      fundingAllocation,\n      variables\n    );\n    \n    // Step 5: Calculate debt service\n    const businessDebtService = calculateBusinessDebtService(purchaseFinancing);\n    const personalDebtService = calculatePersonalDebtService(fundingAllocation);\n    \n    // Step 6: Calculate ownership, WACC, and personal cost of capital\n    const ownership = calculatePriorityBasedOwnership(fundingAllocation);\n    const wacc = calculatePriorityBasedWACC(fundingAllocation, businessMetrics.purchasePrice);\n    const personalCostOfCapital = calculatePersonalCostOfCapital(fundingAllocation);\n    \n    // Log WACC calculation\n    if (DEBUG_METRICS) {\n      logMetricCalculation(\n        \"Deal Structure\",\n        \"WACC\",\n        {\n          fundingAllocation: fundingAllocation.allocation,\n          purchasePrice: businessMetrics.purchasePrice\n        },\n        \"WACC = Œ£(Weight √ó After-tax Rate) for all funding sources\",\n        wacc,\n        {\n          taxRate: 0.25,\n          afterTaxRates: \"Calculated based on funding source rates\",\n          calculation: `Weighted average of all funding source rates`\n        }\n      );\n    }\n    \n    // Log Personal Cost calculation\n    if (DEBUG_METRICS) {\n      logMetricCalculation(\n        \"Deal Structure\",\n        \"Your Personal Cost\",\n        {\n          personalFunding: {\n            taiwaneseLoan: fundingAllocation.allocation.taiwaneseLoan,\n            personalCash: fundingAllocation.allocation.personalCash,\n            houseEquity: fundingAllocation.allocation.houseEquity\n          },\n          personalCostOfCapital\n        },\n        \"Personal Cost = Weighted average of personal funding sources\",\n        personalCostOfCapital,\n        {\n          personalSources: \"Taiwanese Loan + Personal Cash + Home Equity\",\n          calculation: `Weighted average of personal funding rates`\n        }\n      );\n    }\n    \n    // Step 7: Calculate cash flows\n    const businessCashFlow = businessMetrics.ebitda - \n      businessDebtService.totalBusinessDebtService - \n      (variables.managementSalary || 100000) - \n      (variables.techInvestment || 100000) / 3;\n    \n    const ownerDistribution = businessCashFlow * ownership.yourOwnership;\n    const personalNetCashFlow = ownerDistribution - personalDebtService.totalPersonalDebtService;\n    \n    // Log Business Cash Flow calculation\n    if (DEBUG_METRICS) {\n      logMetricCalculation(\n        \"Business Health\",\n        \"Business Free Cash Flow\",\n        {\n          ebitda: businessMetrics.ebitda,\n          businessDebtService: businessDebtService.totalBusinessDebtService,\n          managementSalary: variables.managementSalary || 100000,\n          techInvestment: (variables.techInvestment || 100000) / 3\n        },\n        \"Business FCF = EBITDA - Business Debt Service - Management Salary - Tech Investment/3\",\n        businessCashFlow,\n        {\n          techInvestmentAmortization: \"Amortized over 3 years\",\n          calculation: `${businessMetrics.ebitda} - ${businessDebtService.totalBusinessDebtService} - ${variables.managementSalary || 100000} - ${(variables.techInvestment || 100000) / 3} = ${businessCashFlow}`\n        }\n      );\n    }\n    \n    // Log Personal Cash Flow calculation\n    if (DEBUG_METRICS) {\n      logMetricCalculation(\n        \"Personal Returns\",\n        \"Your Net Annual Gain\",\n        {\n          ownerDistribution,\n          personalDebtService: personalDebtService.totalPersonalDebtService,\n          yourOwnership: ownership.yourOwnership\n        },\n        \"Your Net Annual Gain = Owner Distribution - Personal Debt Service\",\n        personalNetCashFlow,\n        {\n          ownerDistributionCalculation: `Business FCF √ó Your Ownership %`,\n          calculation: `${ownerDistribution} - ${personalDebtService.totalPersonalDebtService} = ${personalNetCashFlow}`\n        }\n      );\n    }\n    \n    // Log ROI calculation\n    if (DEBUG_METRICS) {\n      const yourTotalCashInvested = fundingAllocation.allocation.personalCash + fundingAllocation.allocation.taiwaneseLoan + fundingAllocation.allocation.houseEquity;\n      const yourROI = (personalNetCashFlow / yourTotalCashInvested) * 100;\n      \n      logMetricCalculation(\n        \"Personal Returns\",\n        \"Your ROI\",\n        {\n          yourNetAnnualGain: personalNetCashFlow,\n          yourTotalCashInvested\n        },\n        \"Your ROI = (Your Net Annual Gain √∑ Your Total Cash Invested) √ó 100\",\n        yourROI,\n        {\n          yourCashInvestedComponents: \"Personal Cash + Taiwanese Loan + Home Equity\",\n          netAnnualGainComponents: \"Business Distribution - Personal Debt Service\",\n          calculation: `(${personalNetCashFlow} √∑ ${yourTotalCashInvested}) √ó 100 = ${yourROI}%`\n        }\n      );\n    }\n    \n    return {\n      ...businessMetrics,\n      ...downPaymentCalculation,\n      fundingAllocation,\n      purchaseFinancing,\n      businessDebtService,\n      personalDebtService,\n      ownership,\n      wacc,\n      personalCostOfCapital,\n      businessCashFlow,\n      ownerDistribution,\n      personalNetCashFlow,\n      personalROI: (personalNetCashFlow / (fundingAllocation.allocation.personalCash + fundingAllocation.allocation.taiwaneseLoan + fundingAllocation.allocation.houseEquity)) * 100\n    };\n  });\n}; \n\n// Calculate down payment needed using the same logic as Scenario Comparison\nexport const calculateDownPaymentNeeded = (scenario, variables) => {\n  const purchasePrice = scenario.purchasePrice;\n  \n  // Calculate SBA down payment\n  const sellerFinancingPercent = variables.sellerFinancing || 20;\n  const sellerFinancingAmount = purchasePrice * (sellerFinancingPercent / 100);\n  const sbaLoanAmount = purchasePrice - sellerFinancingAmount;\n  const sbaDownPaymentPercent = variables.sbaDownPayment || 12;\n  const sbaDownPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n  \n  // Calculate working capital and fees (same as Scenario Comparison)\n  const workingCapitalPercent = variables.workingCapital || 7.9;\n  const workingCapital = scenario.targetRevenue * (workingCapitalPercent / 100);\n  const fees = purchasePrice * 0.025; // 2.5% total fees (due diligence + professional fees)\n  \n  // Down Payment Needed = SBA Down Payment + Working Capital + Fees\n  const downPaymentNeeded = sbaDownPayment + workingCapital + fees;\n  \n  return {\n    sbaDownPayment,\n    workingCapital,\n    fees,\n    downPaymentNeeded\n  };\n}; \n\n// NEW METRICS CALCULATIONS\n\n// Capital Utilization Rate\nexport const calculateCapitalUtilizationRate = (totalAllocated, availableCash) => {\n  return availableCash > 0 ? (totalAllocated / availableCash) * 100 : 0;\n};\n\nexport const getCapitalUtilizationStatus = (rate) => {\n  if (rate > 95) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (rate > 85) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (rate > 65) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Leverage Multiplier\nexport const calculateLeverageMultiplier = (totalInvestment, personalCashInvested) => {\n  const result = personalCashInvested > 0 ? totalInvestment / personalCashInvested : 0;\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Deal Structure\",\n      \"Leverage Multiplier\",\n      {\n        totalInvestment,\n        personalCashInvested\n      },\n      \"Leverage Multiplier = Total Investment √∑ Personal Cash Invested\",\n      result,\n      {\n        interpretation: result >= 8 ? \"Excellent leverage\" : result >= 5 ? \"Good leverage\" : result >= 3 ? \"Fair leverage\" : \"Poor leverage\",\n        calculation: `${totalInvestment} √∑ ${personalCashInvested} = ${result}x`\n      }\n    );\n  }\n  \n  return result;\n};\n\nexport const getLeverageMultiplierStatus = (multiplier) => {\n  if (multiplier < 3) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (multiplier < 5) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (multiplier < 8) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Price-to-Revenue Ratio\nexport const calculatePriceToRevenueRatio = (purchasePrice, targetRevenue) => {\n  return targetRevenue > 0 ? purchasePrice / targetRevenue : 0;\n};\n\nexport const getPriceToRevenueStatus = (ratio) => {\n  if (ratio > 1.2) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (ratio > 1.0) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (ratio > 0.8) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// EBITDA Margin\nexport const calculateEBITDAMargin = (ebitda, revenue) => {\n  return revenue > 0 ? (ebitda / revenue) * 100 : 0;\n};\n\nexport const getEBITDAMarginStatus = (margin) => {\n  if (margin < 15) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (margin < 18) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (margin < 22) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Business Cash Conversion\nexport const calculateBusinessCashConversion = (businessFreeCashFlow, businessEBITDA) => {\n  return businessEBITDA > 0 ? (businessFreeCashFlow / businessEBITDA) * 100 : 0;\n};\n\nexport const getCashConversionStatus = (conversion) => {\n  if (conversion < 15) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (conversion < 20) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (conversion < 30) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Revenue-to-Investment Efficiency\nexport const calculateRevenueToInvestmentEfficiency = (targetRevenue, yourTotalInvestment) => {\n  return yourTotalInvestment > 0 ? targetRevenue / yourTotalInvestment : 0;\n};\n\nexport const getRevenueEfficiencyStatus = (efficiency) => {\n  if (efficiency < 3) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (efficiency < 4) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (efficiency < 6) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Risk-Adjusted Return\nexport const calculateRiskAdjustedReturn = (yourROI, riskFreeRate = 4.5, riskScore) => {\n  const result = riskScore > 0 ? (yourROI - riskFreeRate) / riskScore : 0;\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Personal Returns\",\n      \"Risk-Adjusted Return\",\n      {\n        yourROI,\n        riskFreeRate,\n        riskScore\n      },\n      \"Risk-Adjusted Return = (Your ROI - Risk-Free Rate) √∑ Risk Score\",\n      result,\n      {\n        interpretation: result >= 1.5 ? \"Excellent risk-adjusted return\" : result >= 1.0 ? \"Good risk-adjusted return\" : result >= 0.5 ? \"Fair risk-adjusted return\" : \"Poor risk-adjusted return\",\n        calculation: `(${yourROI} - ${riskFreeRate}) √∑ ${riskScore} = ${result}`\n      }\n    );\n  }\n  \n  return result;\n};\n\nexport const getRiskAdjustedStatus = (ratio) => {\n  if (ratio < 0.5) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (ratio < 1.0) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (ratio < 1.5) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Income Replacement Ratio\nexport const calculateIncomeReplacementRatio = (yourNetAnnualGain, currentSalary) => {\n  const result = currentSalary > 0 ? (yourNetAnnualGain / currentSalary) * 100 : 0;\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Personal Returns\",\n      \"W-2 Replacement\",\n      {\n        yourNetAnnualGain,\n        currentSalary\n      },\n      \"W-2 Replacement = (Your Net Annual Gain √∑ Current Salary) √ó 100\",\n      result,\n      {\n        interpretation: result >= 120 ? \"Excellent replacement\" : result >= 80 ? \"Good replacement\" : result >= 40 ? \"Fair replacement\" : \"Poor replacement\",\n        calculation: `(${yourNetAnnualGain} √∑ ${currentSalary}) √ó 100 = ${result}%`\n      }\n    );\n  }\n  \n  return result;\n};\n\nexport const getIncomeReplacementStatus = (ratio) => {\n  if (ratio < 40) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (ratio < 80) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (ratio < 120) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Wealth Building Velocity\nexport const calculateWealthBuildingVelocity = (totalReturnMultiple, investmentPeriod = 5) => {\n  const annualWealthCreation = Math.pow(totalReturnMultiple, 1/investmentPeriod) - 1;\n  const result = annualWealthCreation * 100;\n  \n  if (DEBUG_METRICS) {\n    logMetricCalculation(\n      \"Personal Returns\",\n      \"Wealth Velocity\",\n      {\n        totalReturnMultiple,\n        investmentPeriod\n      },\n      \"Wealth Velocity = Annual wealth creation rate from total return multiple\",\n      result,\n      {\n        interpretation: result >= 80 ? \"Excellent velocity\" : result >= 40 ? \"Good velocity\" : result >= 20 ? \"Fair velocity\" : \"Poor velocity\",\n        calculation: `Annual wealth creation from ${totalReturnMultiple}x return over ${investmentPeriod} years = ${result}%`\n      }\n    );\n  }\n  \n  return result;\n};\n\nexport const getWealthVelocityStatus = (velocity) => {\n  if (velocity < 20) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (velocity < 40) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (velocity < 80) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// 5-Year Exit Value Range\nexport const calculateExitValueRange = (year5EBITDA, yourOwnership, conservativeMultiple = 3.0, expectedMultiple = 3.59, optimisticMultiple = 4.5) => {\n  return {\n    conservative: year5EBITDA * conservativeMultiple * yourOwnership,\n    expected: year5EBITDA * expectedMultiple * yourOwnership,\n    optimistic: year5EBITDA * optimisticMultiple * yourOwnership\n  };\n};\n\n// Stress Test Results\nexport const calculateStressTestResults = (baseROI, revenueStress = -20, marginStress = -300, rateStress = 200) => {\n  // Simplified stress test calculations\n  const revenueStressROI = baseROI * (1 + revenueStress / 100);\n  const marginStressROI = baseROI * (1 + marginStress / 10000); // basis points\n  const rateStressROI = baseROI * (1 - rateStress / 10000); // basis points\n  \n  const minROI = Math.min(revenueStressROI, marginStressROI, rateStressROI);\n  \n  return {\n    revenueStressROI,\n    marginStressROI,\n    rateStressROI,\n    minROI\n  };\n};\n\nexport const getStressTestStatus = (minROI) => {\n  if (minROI < 5) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (minROI < 7) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (minROI < 10) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n};\n\n// Growth Funding Capacity\nexport const calculateGrowthFundingCapacity = (maxSustainableDebt, currentTotalDebt, projectedYear3CashFlow, leverageMultiplier) => {\n  const currentDebtCapacity = maxSustainableDebt - currentTotalDebt;\n  const cashFlowGrowthCapacity = projectedYear3CashFlow * leverageMultiplier;\n  return Math.min(currentDebtCapacity, cashFlowGrowthCapacity);\n};\n\nexport const getGrowthCapacityStatus = (capacity) => {\n  if (capacity < 50000) return { color: '#E74C3C', level: 'critical', label: 'Critical' };\n  if (capacity < 100000) return { color: '#F1C40F', level: 'below-target', label: 'Below Target' };\n  if (capacity < 200000) return { color: '#27AE60', level: 'good', label: 'Good' };\n  return { color: '#3498DB', level: 'excellent', label: 'Excellent' };\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}