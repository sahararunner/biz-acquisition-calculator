{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback}from'react';import{Download,Settings,Info}from'lucide-react';import VariableCard from'./components/VariableCard';import CustomSlider from'./components/CustomSlider';import{VARIABLES,DEFAULT_SCENARIO}from'./utils/variables';import{calculateTotalCashRequired,calculateAnnualCashToPocket,calculateDSCR,calculateCashOnCashReturn,calculateEnhancedRiskScore,calculateIRR,calculateMOIC,calculatePaybackPeriod,calculateFiveYearProjections,calculateRiskAdjustedOwnership,calculateBusinessWACC,calculateBusinessEVA,verifyCalculations,calculateScenariosWithPriority,calculateTotalCashNeeded,allocateFundingByPriority,calculatePurchasePriceFinancing,calculateBusinessDebtService,calculatePersonalDebtService,calculatePriorityBasedWACC,calculatePriorityBasedOwnership}from'./utils/calculations';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{// NEW FUNDING SOURCES STATE\nconst[fundingSources,setFundingSources]=useState(()=>{const saved=localStorage.getItem('fundingSources');return saved?JSON.parse(saved):{taiwaneseLoan:{amount:300000,rate:0.028,term:10,enabled:true,type:'debt',description:'USD loan from Taiwan'},houseEquity:{amount:98273,rate:0.08,term:15,enabled:true,type:'debt',description:'Home equity loan (tax deductible for business use)'},sbaLoan:{amount:0,rate:0.115,term:10,enabled:false,type:'debt',description:'SBA 7(a) business acquisition loan'},sellerFinancing:{amount:0,rate:0.08,term:5,enabled:false,type:'debt',description:'Seller note (subordinated)'},additionalInvestment:{amount:50000,expectedReturn:0.15,enabled:true,type:'equity',description:'Outside investor equity (dilutes ownership)'},personalCash:{amount:50000,opportunityCost:0.08,enabled:true,type:'equity',description:'Personal cash investment'}};});const[variables,setVariables]=useState(()=>{const saved=localStorage.getItem('variables');const savedVariables=saved?JSON.parse(saved):DEFAULT_SCENARIO.variables;// Ensure new variables are present (for backward compatibility)\nreturn{...DEFAULT_SCENARIO.variables,...savedVariables};});// Save state to localStorage whenever it changes\nuseEffect(()=>{localStorage.setItem('fundingSources',JSON.stringify(fundingSources));},[fundingSources]);useEffect(()=>{localStorage.setItem('variables',JSON.stringify(variables));},[variables]);// Validation function to catch calculation errors - MUST BE DEFINED BEFORE ANY USEMEMO\nconst validateScenario=scenario=>{const errors=[];if(isNaN(scenario.targetRevenue)||scenario.targetRevenue<=0){errors.push('Business revenue is invalid');}if(isNaN(scenario.ebitda)||scenario.ebitda<=0){errors.push('EBITDA calculation is invalid');}if(isNaN(scenario.purchasePrice)||scenario.purchasePrice<=0){errors.push('Purchase price calculation is invalid');}if(scenario.wacc>50){errors.push(`WACC too high: ${scenario.wacc}% (should be 7-12%)`);}if(scenario.downPaymentNeeded<scenario.purchasePrice*0.15){errors.push('Down payment unrealistically low');}if(errors.length>0){console.error('âŒ Calculation Errors:',errors);}else{}return errors;};// NEW CALCULATION FUNCTIONS\n// Calculate monthly payment for any loan\nconst calculateLoanPayment=(principal,rate,termYears)=>{if(principal<=0||rate<=0)return 0;const monthlyRate=rate/12;const payments=termYears*12;return principal*monthlyRate*Math.pow(1+monthlyRate,payments)/(Math.pow(1+monthlyRate,payments)-1)*12;// Return annual payment\n};// Fix WACC calculation - use decimal rates, not percentages!\nconst calculateWACC=function(fundingSources){let taxRate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.25;let totalCapital=0;let weightedCost=0;// Include only enabled funding sources with amounts\nObject.entries(fundingSources).forEach(_ref=>{let[key,source]=_ref;if(source.enabled&&source.amount>0){totalCapital+=source.amount;// CRITICAL: Use decimal rates, not percentages!\nlet costRate;if(key==='taiwaneseLoan')costRate=0.028;// 2.8% (personal loan)\nelse if(key==='houseEquity')costRate=0.08;// 8% (personal loan)\nelse if(key==='sbaLoan')costRate=0.115*(1-taxRate);// 11.5% after tax (business deductible)\nelse if(key==='sellerFinancing')costRate=0.08*(1-taxRate*0.5);// 8% after partial tax (less deductible)\nelse if(key==='additionalInvestment')costRate=0.20;// 20% equity cost (investor expected return)\nelse if(key==='personalCash')costRate=0.08;// 8% opportunity cost\nelse costRate=0.08;// Default\nweightedCost+=source.amount*costRate;}});const wacc=totalCapital>0?weightedCost/totalCapital:0;return wacc*100;// Convert to percentage for display\n};// Calculate key parameters for three scenarios\nconst keyParameters=useMemo(()=>{// Fix available cash calculation to only include specific funding sources\nconst totalAvailableCash=(fundingSources.taiwaneseLoan.enabled?fundingSources.taiwaneseLoan.amount:0)+(fundingSources.houseEquity.enabled?fundingSources.houseEquity.amount:0)+(fundingSources.additionalInvestment.enabled?fundingSources.additionalInvestment.amount:0)+(fundingSources.personalCash.enabled?fundingSources.personalCash.amount:0);const scenarios=[{targetRevenue:2000000,name:\"Small Business\"},{targetRevenue:2500000,name:\"Target Business\"},{targetRevenue:3000000,name:\"Large Business\"}];return scenarios.map(scenario=>{var _variables$sellerFina,_variables$revenueGro;// Step 1: Calculate EBITDA using current variable values (not mean)\nconst netMargin=variables.netProfitMargin||25;const valuationMultiple=variables.valuationMultiple||4;const sellerFinancingPercent=(_variables$sellerFina=variables.sellerFinancing)!==null&&_variables$sellerFina!==void 0?_variables$sellerFina:20;const revenueGrowthRate=(_variables$revenueGro=variables.revenueGrowthRate)!==null&&_variables$revenueGro!==void 0?_variables$revenueGro:8;const sbaDownPaymentPercent=Math.max(variables.sbaDownPayment||12,10);const ebitda=scenario.targetRevenue*(netMargin/100);const purchasePrice=ebitda*valuationMultiple;// Step 2: Calculate proper down payment structure\n// CORRECTED LOGIC: Calculate seller financing first, then SBA loan, then down payment\nconst sellerFinancingAmount=purchasePrice*(sellerFinancingPercent/100);const sbaLoanAmount=purchasePrice-sellerFinancingAmount;const sbaDownPayment=sbaLoanAmount*(sbaDownPaymentPercent/100);// Note: Total financing may exceed purchase price if both SBA and seller financing are used\n// This is typical in SBA deals where seller financing is additional to SBA loan\n// Step 3: Add working capital and fees\nconst workingCapitalPercent=variables.workingCapital||10;const workingCapital=scenario.targetRevenue*(workingCapitalPercent/100);const fees=purchasePrice*0.025;// 2.5% total fees\nconst totalDownPaymentNeeded=sbaDownPayment+workingCapital+fees;return{...scenario,ebitda:Math.round(ebitda),purchasePrice:Math.round(purchasePrice),availableCash:totalAvailableCash,downPaymentNeeded:Math.round(totalDownPaymentNeeded),sbaDownPayment:Math.round(sbaDownPayment),sbaLoanAmount:Math.round(sbaLoanAmount),sellerFinancingAmount:Math.round(sellerFinancingAmount),workingCapital:Math.round(workingCapital),fees:Math.round(fees),cashSurplusDeficit:Math.round(totalAvailableCash-totalDownPaymentNeeded)};});},[fundingSources,variables]);// Calculate results for all three scenarios with priority-based funding\nconst allResults=useMemo(()=>{const targetRevenues=[2000000,2500000,3000000];const scenarioNames=[\"Small Business\",\"Target Business\",\"Large Business\"];return calculateScenariosWithPriority(targetRevenues,variables,fundingSources).map((scenario,index)=>{var _scenario$businessDeb,_scenario$personalDeb;// Calculate additional metrics using existing functions\nconst cashRequired=calculateTotalCashRequired({purchasePrice:scenario.purchasePrice,sbaDownPaymentPercent:variables.sbaDownPayment,sellerFinancingPercent:variables.sellerFinancing,workingCapitalPercent:variables.workingCapital,targetRevenue:scenario.targetRevenue,techInvestment:variables.techInvestment});const cashFlow=calculateAnnualCashToPocket({targetRevenue:scenario.targetRevenue,netProfitMarginPercent:variables.netProfitMargin,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,sellerFinancingAmount:scenario.purchaseFinancing.sellerFinancingAmount,managementSalary:variables.managementSalary,techInvestment:variables.techInvestment});// Calculate 5-year projections for advanced metrics\nconst fiveYearProjections=calculateFiveYearProjections({targetRevenue:scenario.targetRevenue,revenueGrowthRatePercent:variables.revenueGrowthRate,netProfitMarginPercent:variables.netProfitMargin,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,sellerFinancingAmount:scenario.purchaseFinancing.sellerFinancingAmount,managementSalary:variables.managementSalary,techInvestment:variables.techInvestment,sbaInterestRate:variables.sbaInterestRate,sellerInterestRate:variables.sellerInterestRate});// Calculate advanced return metrics\nconst totalCashInvested=cashRequired.total;const irr=calculateIRR(totalCashInvested,fiveYearProjections.map(p=>p.cashFlow));const moic=calculateMOIC(totalCashInvested,fiveYearProjections);const paybackPeriod=calculatePaybackPeriod(totalCashInvested,fiveYearProjections);// Calculate 3-year projections\nconst projections=[];let currentRevenue=scenario.targetRevenue;let cumulativeCashFlow=0;for(let year=1;year<=3;year++){const ebitda=currentRevenue*(variables.netProfitMargin/100);const sbaPayment=calculateLoanPayment(scenario.purchaseFinancing.sbaLoanAmount,variables.sbaInterestRate/100,10);const sellerPayment=calculateLoanPayment(scenario.purchaseFinancing.sellerFinancingAmount,variables.sellerInterestRate/100,5);const techInvestmentAmortized=variables.techInvestment/3;const netCashFlow=ebitda-sbaPayment-sellerPayment-variables.managementSalary-techInvestmentAmortized;cumulativeCashFlow+=netCashFlow;projections.push({year,revenue:currentRevenue,ebitda,netCashFlow,cumulativeCashFlow});currentRevenue*=1+variables.revenueGrowthRate/100;}// Calculate ROI\nconst totalInvestment=cashRequired.total;const threeYearCashFlow=projections[2].cumulativeCashFlow;const roi=(threeYearCashFlow-totalInvestment)/totalInvestment*100;// Calculate additional metrics\nconst debtServiceCoverage=scenario.businessDebtService.totalBusinessDebtService>0?scenario.ebitda/scenario.businessDebtService.totalBusinessDebtService:0;const cashOnCashReturn=calculateCashOnCashReturn(cashFlow.netCashFlow,totalCashInvested);const riskScore=calculateEnhancedRiskScore(debtServiceCoverage,cashOnCashReturn,variables.sellerFinancing);// Business capital invested\nconst businessCapitalInvested=scenario.purchasePrice+scenario.targetRevenue*variables.workingCapital/100+scenario.purchasePrice*0.015+// Due diligence\nscenario.purchasePrice*0.008;// Professional fees\n// Business EVA\nconst businessEVA=calculateBusinessEVA(scenario.ebitda,businessCapitalInvested,scenario.wacc/100);// Deal ROI (business level)\nconst dealROI=scenario.purchasePrice>0?scenario.businessCashFlow/scenario.purchasePrice*100:0;// Personal cash invested\nconst personalCashInvested=scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity;// Validate calculations before returning\nconst validationErrors=validateScenario({targetRevenue:scenario.targetRevenue,ebitda:scenario.ebitda,purchasePrice:scenario.purchasePrice,wacc:scenario.wacc,downPaymentNeeded:scenario.totalCashNeeded});return{scenario:scenarioNames[index],cashRequired,cashFlow,financing:{purchasePrice:scenario.purchasePrice,sellerFinancing:scenario.purchaseFinancing.sellerFinancingAmount,sbaLoanAmount:scenario.purchaseFinancing.sbaLoanAmount,downPayment:scenario.purchaseFinancing.sbaDownPayment},projections,roi,// Enhanced metrics\ndebtServiceCoverage,dscr:debtServiceCoverage,cashOnCashReturn,riskScore,sbaLoanPrincipal:scenario.purchaseFinancing.sbaLoanPrincipal,sbaMonthlyPayment:scenario.businessDebtService.sbaAnnualPayment/12,sbaAnnualPayment:scenario.businessDebtService.sbaAnnualPayment,sellerMonthlyPayment:scenario.businessDebtService.sellerAnnualPayment/12,sellerAnnualPayment:scenario.businessDebtService.sellerAnnualPayment,irr,moic,paybackPeriod,fiveYearProjections,// FUNDING STRUCTURE WITH PRIORITY ALLOCATION\nactiveFundingSources:Object.entries(scenario.fundingAllocation.allocation).filter(_ref2=>{let[_,amount]=_ref2;return amount>0;}).reduce((acc,_ref3)=>{let[key,amount]=_ref3;acc[key]={amount,enabled:true,type:key==='additionalInvestment'||key==='personalCash'?'equity':'debt',rate:key==='taiwaneseLoan'?0.028:key==='houseEquity'?0.08:key==='sbaLoan'?0.115:key==='sellerFinancing'?0.08:0,term:key==='taiwaneseLoan'?10:key==='houseEquity'?15:key==='sbaLoan'?10:key==='sellerFinancing'?5:0,annualPayment:key==='taiwaneseLoan'?scenario.personalDebtService.taiwanesePayment:key==='houseEquity'?scenario.personalDebtService.houseEquityPayment:key==='sbaLoan'?scenario.businessDebtService.sbaAnnualPayment:key==='sellerFinancing'?scenario.businessDebtService.sellerAnnualPayment:0};return acc;},{}),totalFunding:scenario.fundingAllocation.totalAllocated,totalDebtService:(((_scenario$businessDeb=scenario.businessDebtService)===null||_scenario$businessDeb===void 0?void 0:_scenario$businessDeb.totalBusinessDebtService)||0)+(((_scenario$personalDeb=scenario.personalDebtService)===null||_scenario$personalDeb===void 0?void 0:_scenario$personalDeb.totalPersonalDebtService)||0),totalPersonalEquity:scenario.fundingAllocation.allocation.personalCash+scenario.fundingAllocation.allocation.taiwaneseLoan+scenario.fundingAllocation.allocation.houseEquity,totalAdditionalEquity:scenario.fundingAllocation.allocation.additionalInvestment,ownershipPercentage:scenario.ownership.yourOwnership,wacc:scenario.wacc,personalCostOfCapital:scenario.personalCostOfCapital,// BUSINESS-LEVEL METRICS\nbusinessFreeCashFlow:Math.round(scenario.businessCashFlow),businessDebtService:Math.round(scenario.businessDebtService.totalBusinessDebtService),businessDSCR:scenario.businessDebtService.totalBusinessDebtService>0?scenario.ebitda/scenario.businessDebtService.totalBusinessDebtService:0,businessEVA:Math.round(businessEVA),businessWACC:scenario.wacc,businessCapitalInvested:Math.round(businessCapitalInvested),dealROI:dealROI,// PERSONAL-LEVEL METRICS\npersonalCashFlow:Math.round(scenario.personalNetCashFlow),ownerCashFlow:Math.round(scenario.personalNetCashFlow),personalROI:scenario.personalROI,ownerROI:scenario.personalROI,personalDebtService:Math.round(scenario.personalDebtService.totalPersonalDebtService),personalCashInvested:Math.round(personalCashInvested),ownerDistribution:Math.round(scenario.ownerDistribution),ownershipDilution:scenario.ownership.investorOwnership*100,investorOwnership:scenario.ownership.investorOwnership,// OWNERSHIP BREAKDOWN\nownershipBreakdown:scenario.ownership.breakdown,// VALIDATION\nvalidationErrors,// PRIORITY ALLOCATION DATA\nfundingAllocation:scenario.fundingAllocation,purchaseFinancing:scenario.purchaseFinancing,businessDebtService:scenario.businessDebtService,personalDebtService:scenario.personalDebtService,ownership:scenario.ownership,businessCashFlow:scenario.businessCashFlow,ownerDistribution:scenario.ownerDistribution,personalNetCashFlow:scenario.personalNetCashFlow,targetRevenue:scenario.targetRevenue,ebitda:scenario.ebitda,purchasePrice:scenario.purchasePrice,totalCashNeeded:scenario.totalCashNeeded};});},[variables,fundingSources]);const handleFundingSourceChange=useCallback((sourceKey,field,value)=>{setFundingSources(prev=>({...prev,[sourceKey]:{...prev[sourceKey],[field]:value}}));},[]);const handleVariableChange=useCallback((variableKey,value)=>{setVariables(prev=>({...prev,[variableKey]:value}));},[]);const resetToDefaults=useCallback(()=>{setFundingSources({taiwaneseLoan:{amount:300000,rate:0.028,term:10,enabled:true,type:'debt',description:'USD loan from Taiwan'},houseEquity:{amount:98273,rate:0.08,term:15,enabled:true,type:'debt',description:'Home equity loan (tax deductible for business use)'},sbaLoan:{amount:0,rate:0.115,term:10,enabled:false,type:'debt',description:'SBA 7(a) business acquisition loan'},sellerFinancing:{amount:0,rate:0.08,term:5,enabled:false,type:'debt',description:'Seller note (subordinated)'},additionalInvestment:{amount:50000,expectedReturn:0.15,enabled:true,type:'equity',description:'Outside investor equity (dilutes ownership)'},personalCash:{amount:50000,opportunityCost:0.08,enabled:true,type:'equity',description:'Personal cash investment'}});setVariables(DEFAULT_SCENARIO.variables);},[]);// Info Tooltip Component\nconst InfoTooltip=_ref4=>{let{formula,children}=_ref4;const[showTooltip,setShowTooltip]=useState(false);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center gap-1 cursor-help\",onMouseEnter:()=>setShowTooltip(true),onMouseLeave:()=>setShowTooltip(false),children:[children,!children&&/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 text-gray-400 hover:text-gray-600\"})]}),showTooltip&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-50 top-full left-1/2 transform -translate-x-1/2 mt-2 px-4 py-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium mb-2\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap leading-relaxed\",children:formula}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900\"})]})]});};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(amount);};// Test calculation to verify formulas\nconst testCalculation=useCallback(()=>{const testScenario={targetRevenue:2500000,netProfitMargin:25,valuationMultiple:4,sbaLoanAmount:1500000,sellerFinancingAmount:500000,personalCash:550000,additionalInvestment:100000};const result=verifyCalculations(testScenario);// Verify results are in expected ranges\nconst{testScenario:calc,expectedRanges}=result;return result;},[]);// Run test calculation on component mount\nuseEffect(()=>{testCalculation();},[testCalculation]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-background\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Business Acquisition Calculator\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Interactive tool for evaluating acquisition scenarios\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:resetToDefaults,className:\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4\"}),\"Reset\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"Export\"]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-2/5 bg-gray-50 p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Funding Sources Configuration\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:Object.entries(fundingSources).filter(_ref5=>{let[key,source]=_ref5;return key!=='sbaLoan'&&key!=='sellerFinancing';}).map(_ref6=>{let[key,source]=_ref6;return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-900\",children:key==='houseEquity'?'Home Equity':key==='sbaLoan'?'SBA Loan':key==='personalCash'?'Personal Cash':key==='additionalInvestment'?'Additional Investment':key==='taiwaneseLoan'?'Taiwanese Loan':key.replace(/([A-Z])/g,' $1').trim()}),/*#__PURE__*/_jsx(InfoTooltip,{formula:source.description,children:/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 text-gray-400 hover:text-gray-600\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-gray-700\",children:\"Current: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900\",children:formatCurrency(source.amount)})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CustomSlider,{value:source.amount,onChange:value=>handleFundingSourceChange(key,'amount',value),min:0,max:key==='taiwaneseLoan'||key==='houseEquity'?300000:key==='additionalInvestment'||key==='personalCash'?100000:1000000,step:25000,unit:\"$\",color:\"blue\",showTooltip:false})}),source.type==='debt'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Rate: \",(source.rate*100).toFixed(1),\"% (after tax \",key==='houseEquity'?(source.rate*100).toFixed(1):(source.rate*0.75*100).toFixed(1),\"%)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Term: \",source.term,\" years\"]})]})]})]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"Variable Controls\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:Object.entries(VARIABLES).map(_ref7=>{let[key,variable]=_ref7;return/*#__PURE__*/_jsx(VariableCard,{variableKey:key,variable:variable,value:variables[key],onValueChange:value=>handleVariableChange(key,value)},key);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-3/5 bg-white p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Scenario Comparison\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:keyParameters.map((scenario,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm text-gray-600\",children:\"Target Annual Revenue:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-gray-900\",children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-purple-50 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Purchase Price = Target Revenue \\xD7 Net Profit Margin % \\xD7 Valuation Multiple\\\\n\\\\nExample: $2,000,000 \\xD7 20.7% \\xD7 4.1x = $1,697,400\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-purple-800\",children:\"Purchase Price\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-purple-900 text-center\",children:formatCurrency(scenario.purchasePrice)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-orange-50 rounded-lg border border-orange-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"SBA Down Payment = (Purchase Price - Seller Financing Amount) \\xD7 SBA Down Payment %\\\\n\\\\nExample: ($1,697,400 - $274,979) \\xD7 13% = $184,915\\\\n\\\\nThis is the minimum cash required for the SBA loan portion only.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-orange-800\",children:\"SBA Down Payment\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-orange-900 text-center\",children:formatCurrency(scenario.sbaDownPayment)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\\\n\\\\nIncludes:\\\\n\\u2022 SBA Down Payment\\\\n\\u2022 Working Capital (7.9% of revenue)\\\\n\\u2022 Due Diligence & Professional Fees (2.5% of purchase price)\\\\n\\\\nThis is the total cash required for the acquisition.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-blue-800\",children:\"Down Payment Needed\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-blue-900 text-center\",children:formatCurrency(scenario.downPaymentNeeded)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-yellow-50 rounded-lg border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Available Cash = Sum of all enabled funding sources:\\\\n\\\\n\\u2022 Taiwanese Loan: $725,000 (2.8%)\\\\n\\u2022 Personal Cash: $550,000 (8.0%)\\\\n\\u2022 Additional Investment: $100,000 (15.0%)\\\\n\\u2022 Home Equity: $200,000 (8.0%)\\\\n\\\\nThis represents your total accessible capital for the acquisition.\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-yellow-800\",children:\"Available Cash\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-yellow-900 text-center\",children:formatCurrency(scenario.availableCash)})]}),/*#__PURE__*/_jsxs(\"div\",{className:`p-2 rounded-lg border ${scenario.cashSurplusDeficit>=0?'bg-green-50 border-green-200':'bg-red-50 border-red-200'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-0.5\",children:/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\\\n\\\\nPositive (Green): You have sufficient cash for the acquisition\\\\nNegative (Red): You need additional funding or must reduce acquisition costs\\\\n\\\\nThis determines if the deal is financially feasible with your current resources.\",children:/*#__PURE__*/_jsx(\"span\",{className:`text-xs font-medium ${scenario.cashSurplusDeficit>=0?'text-green-800':'text-red-800'}`,children:\"Cash Surplus/Deficit\"})})}),/*#__PURE__*/_jsx(\"p\",{className:`text-sm font-bold text-center ${scenario.cashSurplusDeficit>=0?'text-green-900':'text-red-900'}`,children:formatCurrency(scenario.cashSurplusDeficit)})]})]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Deal Structure & Financing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>{var _scenario$fundingAllo,_scenario$fundingAllo2,_scenario$fundingAllo3,_scenario$fundingAllo4,_scenario$fundingAllo5,_scenario$fundingAllo6,_scenario$fundingAllo7,_scenario$fundingAllo8,_scenario$fundingAllo9,_scenario$fundingAllo0,_scenario$fundingAllo1,_scenario$fundingAllo10,_scenario$fundingAllo11,_scenario$fundingAllo12;return/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Funding Allocation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Taiwanese Loan:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo=scenario.fundingAllocation)===null||_scenario$fundingAllo===void 0?void 0:(_scenario$fundingAllo2=_scenario$fundingAllo.allocation)===null||_scenario$fundingAllo2===void 0?void 0:_scenario$fundingAllo2.taiwaneseLoan)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Cash:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo3=scenario.fundingAllocation)===null||_scenario$fundingAllo3===void 0?void 0:(_scenario$fundingAllo4=_scenario$fundingAllo3.allocation)===null||_scenario$fundingAllo4===void 0?void 0:_scenario$fundingAllo4.personalCash)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Additional Investment:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo5=scenario.fundingAllocation)===null||_scenario$fundingAllo5===void 0?void 0:(_scenario$fundingAllo6=_scenario$fundingAllo5.allocation)===null||_scenario$fundingAllo6===void 0?void 0:_scenario$fundingAllo6.additionalInvestment)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Seller Financing:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo7=scenario.fundingAllocation)===null||_scenario$fundingAllo7===void 0?void 0:(_scenario$fundingAllo8=_scenario$fundingAllo7.allocation)===null||_scenario$fundingAllo8===void 0?void 0:_scenario$fundingAllo8.sellerFinancing)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Home Equity:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo9=scenario.fundingAllocation)===null||_scenario$fundingAllo9===void 0?void 0:(_scenario$fundingAllo0=_scenario$fundingAllo9.allocation)===null||_scenario$fundingAllo0===void 0?void 0:_scenario$fundingAllo0.houseEquity)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"SBA Loan:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(((_scenario$fundingAllo1=scenario.fundingAllocation)===null||_scenario$fundingAllo1===void 0?void 0:(_scenario$fundingAllo10=_scenario$fundingAllo1.allocation)===null||_scenario$fundingAllo10===void 0?void 0:_scenario$fundingAllo10.sbaLoan)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-1 mt-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Down Payment Needed:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.downPaymentNeeded||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Allocated:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(((_scenario$fundingAllo11=scenario.fundingAllocation)===null||_scenario$fundingAllo11===void 0?void 0:_scenario$fundingAllo11.totalAllocated)||0)})]}),((_scenario$fundingAllo12=scenario.fundingAllocation)===null||_scenario$fundingAllo12===void 0?void 0:_scenario$fundingAllo12.downPaymentGap)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-red-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Funding Gap:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(scenario.fundingAllocation.downPaymentGap)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Financing Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"WACC = Weighted Average Cost of Capital\\\\nIncludes ALL funding sources with after-tax rates:\\\\n\\u2022 Taiwanese Loan: 2.1% after-tax\\\\n\\u2022 Personal Cash: 6% after-tax\\\\n\\u2022 Additional Investment: 15%\\\\n\\u2022 Seller Financing: 6% after-tax\\\\n\\u2022 Home Equity: 8%\\\\n\\u2022 SBA Loan: 8.6% after-tax\",children:/*#__PURE__*/_jsx(\"span\",{children:\"WACC:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[(scenario.wacc||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Your Personal Cost of Capital\\\\nWeighted average of your personal funding sources:\\\\n\\u2022 Taiwanese Loan: 2.8%\\\\n\\u2022 Personal Cash: 8% (opportunity cost)\\\\n\\u2022 Home Equity: 8%\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your Personal Cost:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[(scenario.personalCostOfCapital||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your Ownership:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[((scenario.ownershipPercentage||0)*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Investor Ownership:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[((scenario.investorOwnership||0)*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:\"Based on risk-adjusted contributions (Taiwanese Loan: 80%, Home Equity: 120%, Personal Cash: 100%). Control premium and sweat equity not considered.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Monthly Business Debt Payment:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessDebtService.totalBusinessDebtService/12)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Monthly Personal Debt Payment:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.personalDebtService.totalPersonalDebtService/12)})]})]})]})]})},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Business Health Metrics\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Revenue:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business EBITDA:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.ebitda)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\\\nSBA: 11.5% rate, 10-year term\\\\nSeller: 8% rate, 5-year term\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business Debt Service:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessDebtService.totalBusinessDebtService)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Free Cash Flow:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessFreeCashFlow)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Economic Value Added = NOPAT - Capital Charge\\\\nNOPAT = EBITDA \\xD7 (1 - Tax Rate)\\\\nCapital Charge = Business Capital Invested \\xD7 WACC\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Economic Value Added:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessEVA)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business DSCR:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.businessDSCR<1.25?'text-red-600':scenario.businessDSCR<1.5?'text-yellow-500':scenario.businessDSCR<2.0?'text-green-600':'text-blue-600'}`,children:[(scenario.businessDSCR||0).toFixed(2),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <1.25x | Below Target 1.25-1.5x | Good 1.5-2.0x | Excellent >2.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Business ROA = (Business Free Cash Flow / Business Capital Invested) \\xD7 100\\\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Business ROA:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<3?'text-red-600':scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<6?'text-yellow-500':scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100<10?'text-green-600':'text-blue-600'}`,children:[(scenario.businessFreeCashFlow/scenario.businessCapitalInvested*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <3% | Below Target 3-6% | Good 6-10% | Excellent >10%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Debt-to-EBITDA Ratio = Total Business Debt \\xF7 EBITDA\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Debt-to-EBITDA Ratio:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>4.0?'text-red-600':(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>3.0?'text-yellow-500':(scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda>2.0?'text-green-600':'text-blue-600'}`,children:[((scenario.fundingAllocation.allocation.sbaLoan+scenario.fundingAllocation.allocation.sellerFinancing)/scenario.ebitda).toFixed(1),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >4.0x | Below Target 3.0-4.0x | Good 2.0-3.0x | Excellent <2.0x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Interest Coverage Ratio = EBITDA \\xF7 Interest Payments\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Interest Coverage Ratio:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<1.5?'text-red-600':scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<2.5?'text-yellow-500':scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)<3.0?'text-green-600':'text-blue-600'}`,children:[(scenario.ebitda/(scenario.fundingAllocation.allocation.sbaLoan*0.115+scenario.fundingAllocation.allocation.sellerFinancing*0.08)).toFixed(1),\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <1.5x | Below Target 1.5-2.5x | Good 2.5-3.0x | Excellent >3.0x\"]})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Personal Investment Returns\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"business-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Business Level\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Revenue Burden:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(scenario.targetRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Operating Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.targetRevenue-scenario.ebitda)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Debt Service:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.businessDebtService.totalBusinessDebtService)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Management Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(variables.managementSalary)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-2 font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Net Gain:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.businessFreeCashFlow)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personal-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold text-gray-700 mb-2\",children:\"Personal Level\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Investment:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.personalCashInvested)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Business Distribution:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"+\",formatCurrency(scenario.ownerDistribution)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Personal Debt Service:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(scenario.personalDebtService.totalPersonalDebtService)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-2 font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Your Net Annual Gain:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(scenario.personalCashFlow)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Your ROI = (Your Net Annual Gain \\xF7 Your Total Cash Invested) \\xD7 100\\\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your ROI:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalROI<7?'text-red-600':scenario.personalROI<12?'text-yellow-500':scenario.personalROI<20?'text-green-600':'text-blue-600'}`,children:[scenario.personalROI.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <7% | Below Target 7-12% | Good 12-20% | Excellent >20%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Cash-on-Cash Return = Annual Cash Flow \\xF7 Your Cash Invested\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Cash-on-Cash Return:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalCashFlow/scenario.personalCashInvested*100<8?'text-red-600':scenario.personalCashFlow/scenario.personalCashInvested*100<12?'text-yellow-500':scenario.personalCashFlow/scenario.personalCashInvested*100<20?'text-green-600':'text-blue-600'}`,children:[(scenario.personalCashFlow/scenario.personalCashInvested*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical <8% | Below Target 8-12% | Good 12-20% | Excellent >20%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(InfoTooltip,{formula:\"Payback Period = Your Total Investment \\xF7 Your Net Annual Gain\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Payback Period:\"})}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${scenario.personalCashInvested/scenario.personalCashFlow>8?'text-red-600':scenario.personalCashInvested/scenario.personalCashFlow>5?'text-yellow-500':scenario.personalCashInvested/scenario.personalCashFlow>3?'text-green-600':'text-blue-600'}`,children:[(scenario.personalCashInvested/scenario.personalCashFlow).toFixed(1),\" years\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Standard:\"}),\" Critical >8 years | Below Target 5-8 years | Good 3-5 years | Excellent <3 years\"]})]})]})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Growth & Risk Projections\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-3 gap-4\",children:allResults.map((scenario,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded p-4\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-1\",children:\"Year\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Business FCF\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Your Distribution\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"Your Net FCF\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-1\",children:\"DSCR\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:scenario.projections.map((year,yearIndex)=>{// Calculate business FCF for this year\nconst yearEBITDA=year.ebitda;const yearBusinessFCF=yearEBITDA-scenario.businessDebtService.totalBusinessDebtService-variables.managementSalary-variables.techInvestment/3;const yearOwnerDistribution=yearBusinessFCF*scenario.ownership.yourOwnership;const yearYourFCF=yearOwnerDistribution-scenario.personalDebtService.totalPersonalDebtService;const yearDSCR=scenario.businessDebtService.totalBusinessDebtService>0?yearEBITDA/scenario.businessDebtService.totalBusinessDebtService:0;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-1\",children:year.year}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearBusinessFCF)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearOwnerDistribution)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right py-1\",children:formatCurrency(yearYourFCF)}),/*#__PURE__*/_jsxs(\"td\",{className:`text-right py-1 ${yearDSCR<1.25?'text-red-600':yearDSCR<1.5?'text-yellow-500':yearDSCR<2.0?'text-green-600':'text-blue-600'}`,children:[yearDSCR.toFixed(2),\"x\"]})]},yearIndex);})})]})},index))})]})]})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","Download","Settings","Info","VariableCard","CustomSlider","VARIABLES","DEFAULT_SCENARIO","calculateTotalCashRequired","calculateAnnualCashToPocket","calculateDSCR","calculateCashOnCashReturn","calculateEnhancedRiskScore","calculateIRR","calculateMOIC","calculatePaybackPeriod","calculateFiveYearProjections","calculateRiskAdjustedOwnership","calculateBusinessWACC","calculateBusinessEVA","verifyCalculations","calculateScenariosWithPriority","calculateTotalCashNeeded","allocateFundingByPriority","calculatePurchasePriceFinancing","calculateBusinessDebtService","calculatePersonalDebtService","calculatePriorityBasedWACC","calculatePriorityBasedOwnership","jsx","_jsx","jsxs","_jsxs","App","fundingSources","setFundingSources","saved","localStorage","getItem","JSON","parse","taiwaneseLoan","amount","rate","term","enabled","type","description","houseEquity","sbaLoan","sellerFinancing","additionalInvestment","expectedReturn","personalCash","opportunityCost","variables","setVariables","savedVariables","setItem","stringify","validateScenario","scenario","errors","isNaN","targetRevenue","push","ebitda","purchasePrice","wacc","downPaymentNeeded","length","console","error","calculateLoanPayment","principal","termYears","monthlyRate","payments","Math","pow","calculateWACC","taxRate","arguments","undefined","totalCapital","weightedCost","Object","entries","forEach","_ref","key","source","costRate","keyParameters","totalAvailableCash","scenarios","name","map","_variables$sellerFina","_variables$revenueGro","netMargin","netProfitMargin","valuationMultiple","sellerFinancingPercent","revenueGrowthRate","sbaDownPaymentPercent","max","sbaDownPayment","sellerFinancingAmount","sbaLoanAmount","workingCapitalPercent","workingCapital","fees","totalDownPaymentNeeded","round","availableCash","cashSurplusDeficit","allResults","targetRevenues","scenarioNames","index","_scenario$businessDeb","_scenario$personalDeb","cashRequired","techInvestment","cashFlow","netProfitMarginPercent","purchaseFinancing","managementSalary","fiveYearProjections","revenueGrowthRatePercent","sbaInterestRate","sellerInterestRate","totalCashInvested","total","irr","p","moic","paybackPeriod","projections","currentRevenue","cumulativeCashFlow","year","sbaPayment","sellerPayment","techInvestmentAmortized","netCashFlow","revenue","totalInvestment","threeYearCashFlow","roi","debtServiceCoverage","businessDebtService","totalBusinessDebtService","cashOnCashReturn","riskScore","businessCapitalInvested","businessEVA","dealROI","businessCashFlow","personalCashInvested","fundingAllocation","allocation","validationErrors","totalCashNeeded","financing","downPayment","dscr","sbaLoanPrincipal","sbaMonthlyPayment","sbaAnnualPayment","sellerMonthlyPayment","sellerAnnualPayment","activeFundingSources","filter","_ref2","_","reduce","acc","_ref3","annualPayment","personalDebtService","taiwanesePayment","houseEquityPayment","totalFunding","totalAllocated","totalDebtService","totalPersonalDebtService","totalPersonalEquity","totalAdditionalEquity","ownershipPercentage","ownership","yourOwnership","personalCostOfCapital","businessFreeCashFlow","businessDSCR","businessWACC","personalCashFlow","personalNetCashFlow","ownerCashFlow","personalROI","ownerROI","ownerDistribution","ownershipDilution","investorOwnership","ownershipBreakdown","breakdown","handleFundingSourceChange","sourceKey","field","value","prev","handleVariableChange","variableKey","resetToDefaults","InfoTooltip","_ref4","formula","children","showTooltip","setShowTooltip","className","onMouseEnter","onMouseLeave","formatCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","testCalculation","testScenario","result","calc","expectedRanges","onClick","_ref5","_ref6","replace","trim","onChange","min","step","unit","color","toFixed","_ref7","variable","onValueChange","_scenario$fundingAllo","_scenario$fundingAllo2","_scenario$fundingAllo3","_scenario$fundingAllo4","_scenario$fundingAllo5","_scenario$fundingAllo6","_scenario$fundingAllo7","_scenario$fundingAllo8","_scenario$fundingAllo9","_scenario$fundingAllo0","_scenario$fundingAllo1","_scenario$fundingAllo10","_scenario$fundingAllo11","_scenario$fundingAllo12","downPaymentGap","yearIndex","yearEBITDA","yearBusinessFCF","yearOwnerDistribution","yearYourFCF","yearDSCR"],"sources":["/Users/juihanlin/Desktop/Biz Acquisition Calculator/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { Download, Settings, Info } from 'lucide-react';\nimport VariableCard from './components/VariableCard';\nimport CustomSlider from './components/CustomSlider';\nimport { VARIABLES, DEFAULT_SCENARIO } from './utils/variables';\nimport { \n  calculateTotalCashRequired, \n  calculateAnnualCashToPocket, \n  calculateDSCR,\n  calculateCashOnCashReturn,\n  calculateEnhancedRiskScore,\n  calculateIRR,\n  calculateMOIC,\n  calculatePaybackPeriod,\n  calculateFiveYearProjections,\n  calculateRiskAdjustedOwnership,\n  calculateBusinessWACC,\n  calculateBusinessEVA,\n  verifyCalculations,\n  calculateScenariosWithPriority,\n  calculateTotalCashNeeded,\n  allocateFundingByPriority,\n  calculatePurchasePriceFinancing,\n  calculateBusinessDebtService,\n  calculatePersonalDebtService,\n  calculatePriorityBasedWACC,\n  calculatePriorityBasedOwnership\n} from './utils/calculations';\n\nconst App = () => {\n  // NEW FUNDING SOURCES STATE\n  const [fundingSources, setFundingSources] = useState(() => {\n    const saved = localStorage.getItem('fundingSources');\n    return saved ? JSON.parse(saved) : {\n      taiwaneseLoan: { \n        amount: 300000, \n        rate: 0.028, \n        term: 10, \n        enabled: true,\n        type: 'debt',\n        description: 'USD loan from Taiwan'\n      },\n      houseEquity: { \n        amount: 98273, \n        rate: 0.08, \n        term: 15, \n        enabled: true,\n        type: 'debt',\n        description: 'Home equity loan (tax deductible for business use)'\n      },\n      sbaLoan: { \n        amount: 0, \n        rate: 0.115, \n        term: 10, \n        enabled: false,\n        type: 'debt',\n        description: 'SBA 7(a) business acquisition loan'\n      },\n      sellerFinancing: { \n        amount: 0, \n        rate: 0.08, \n        term: 5, \n        enabled: false,\n        type: 'debt',\n        description: 'Seller note (subordinated)'\n      },\n      additionalInvestment: { \n        amount: 50000, \n        expectedReturn: 0.15, \n        enabled: true,\n        type: 'equity',\n        description: 'Outside investor equity (dilutes ownership)'\n      },\n      personalCash: { \n        amount: 50000, \n        opportunityCost: 0.08, \n        enabled: true,\n        type: 'equity',\n        description: 'Personal cash investment'\n      }\n    };\n  });\n\n  const [variables, setVariables] = useState(() => {\n    const saved = localStorage.getItem('variables');\n    const savedVariables = saved ? JSON.parse(saved) : DEFAULT_SCENARIO.variables;\n    \n    // Ensure new variables are present (for backward compatibility)\n    return {\n      ...DEFAULT_SCENARIO.variables,\n      ...savedVariables\n    };\n  });\n\n  // Save state to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('fundingSources', JSON.stringify(fundingSources));\n  }, [fundingSources]);\n\n  useEffect(() => {\n    localStorage.setItem('variables', JSON.stringify(variables));\n  }, [variables]);\n\n  // Validation function to catch calculation errors - MUST BE DEFINED BEFORE ANY USEMEMO\n  const validateScenario = (scenario) => {\n    const errors = [];\n    \n    if (isNaN(scenario.targetRevenue) || scenario.targetRevenue <= 0) {\n      errors.push('Business revenue is invalid');\n    }\n    \n    if (isNaN(scenario.ebitda) || scenario.ebitda <= 0) {\n      errors.push('EBITDA calculation is invalid');\n    }\n    \n    if (isNaN(scenario.purchasePrice) || scenario.purchasePrice <= 0) {\n      errors.push('Purchase price calculation is invalid');\n    }\n    \n    if (scenario.wacc > 50) {\n      errors.push(`WACC too high: ${scenario.wacc}% (should be 7-12%)`);\n    }\n    \n    if (scenario.downPaymentNeeded < scenario.purchasePrice * 0.15) {\n      errors.push('Down payment unrealistically low');\n    }\n    \n    if (errors.length > 0) {\n      console.error('âŒ Calculation Errors:', errors);\n    } else {\n  \n    }\n    \n    return errors;\n  };\n\n  // NEW CALCULATION FUNCTIONS\n  // Calculate monthly payment for any loan\n  const calculateLoanPayment = (principal, rate, termYears) => {\n    if (principal <= 0 || rate <= 0) return 0;\n    const monthlyRate = rate / 12;\n    const payments = termYears * 12;\n    return (principal * monthlyRate * Math.pow(1 + monthlyRate, payments)) / \n           (Math.pow(1 + monthlyRate, payments) - 1) * 12; // Return annual payment\n  };\n\n  // Fix WACC calculation - use decimal rates, not percentages!\n  const calculateWACC = (fundingSources, taxRate = 0.25) => {\n    let totalCapital = 0;\n    let weightedCost = 0;\n    \n    // Include only enabled funding sources with amounts\n    Object.entries(fundingSources).forEach(([key, source]) => {\n      if (source.enabled && source.amount > 0) {\n        totalCapital += source.amount;\n        \n        // CRITICAL: Use decimal rates, not percentages!\n        let costRate;\n        if (key === 'taiwaneseLoan') costRate = 0.028; // 2.8% (personal loan)\n        else if (key === 'houseEquity') costRate = 0.08; // 8% (personal loan)\n        else if (key === 'sbaLoan') costRate = 0.115 * (1 - taxRate); // 11.5% after tax (business deductible)\n        else if (key === 'sellerFinancing') costRate = 0.08 * (1 - taxRate * 0.5); // 8% after partial tax (less deductible)\n        else if (key === 'additionalInvestment') costRate = 0.20; // 20% equity cost (investor expected return)\n        else if (key === 'personalCash') costRate = 0.08; // 8% opportunity cost\n        else costRate = 0.08; // Default\n        \n        weightedCost += source.amount * costRate;\n      }\n    });\n    \n    const wacc = totalCapital > 0 ? (weightedCost / totalCapital) : 0;\n    return wacc * 100; // Convert to percentage for display\n  };\n\n\n\n\n\n\n\n  // Calculate key parameters for three scenarios\n  const keyParameters = useMemo(() => {\n    // Fix available cash calculation to only include specific funding sources\n    const totalAvailableCash = (\n      (fundingSources.taiwaneseLoan.enabled ? fundingSources.taiwaneseLoan.amount : 0) +\n      (fundingSources.houseEquity.enabled ? fundingSources.houseEquity.amount : 0) +\n      (fundingSources.additionalInvestment.enabled ? fundingSources.additionalInvestment.amount : 0) +\n      (fundingSources.personalCash.enabled ? fundingSources.personalCash.amount : 0)\n    );\n    \n    const scenarios = [\n      { targetRevenue: 2000000, name: \"Small Business\" },\n      { targetRevenue: 2500000, name: \"Target Business\" },\n      { targetRevenue: 3000000, name: \"Large Business\" }\n    ];\n\n    return scenarios.map(scenario => {\n      // Step 1: Calculate EBITDA using current variable values (not mean)\n      const netMargin = variables.netProfitMargin || 25;\n      const valuationMultiple = variables.valuationMultiple || 4;\n      const sellerFinancingPercent = variables.sellerFinancing ?? 20;\n      const revenueGrowthRate = variables.revenueGrowthRate ?? 8;\n      const sbaDownPaymentPercent = Math.max(variables.sbaDownPayment || 12, 10);\n      \n      const ebitda = scenario.targetRevenue * (netMargin / 100);\n      const purchasePrice = ebitda * valuationMultiple;\n      \n      // Step 2: Calculate proper down payment structure\n      // CORRECTED LOGIC: Calculate seller financing first, then SBA loan, then down payment\n      const sellerFinancingAmount = purchasePrice * (sellerFinancingPercent / 100);\n      const sbaLoanAmount = purchasePrice - sellerFinancingAmount;\n      const sbaDownPayment = sbaLoanAmount * (sbaDownPaymentPercent / 100);\n      \n      // Note: Total financing may exceed purchase price if both SBA and seller financing are used\n      // This is typical in SBA deals where seller financing is additional to SBA loan\n      \n      // Step 3: Add working capital and fees\n      const workingCapitalPercent = variables.workingCapital || 10;\n      const workingCapital = scenario.targetRevenue * (workingCapitalPercent / 100);\n      const fees = purchasePrice * 0.025; // 2.5% total fees\n      \n      const totalDownPaymentNeeded = sbaDownPayment + workingCapital + fees;\n      \n\n      \n      return {\n        ...scenario,\n        ebitda: Math.round(ebitda),\n        purchasePrice: Math.round(purchasePrice),\n        availableCash: totalAvailableCash,\n        downPaymentNeeded: Math.round(totalDownPaymentNeeded),\n        sbaDownPayment: Math.round(sbaDownPayment),\n        sbaLoanAmount: Math.round(sbaLoanAmount),\n        sellerFinancingAmount: Math.round(sellerFinancingAmount),\n        workingCapital: Math.round(workingCapital),\n        fees: Math.round(fees),\n        cashSurplusDeficit: Math.round(totalAvailableCash - totalDownPaymentNeeded)\n      };\n    });\n  }, [fundingSources, variables]);\n\n  // Calculate results for all three scenarios with priority-based funding\n  const allResults = useMemo(() => {\n    const targetRevenues = [2000000, 2500000, 3000000];\n    const scenarioNames = [\"Small Business\", \"Target Business\", \"Large Business\"];\n    \n    return calculateScenariosWithPriority(targetRevenues, variables, fundingSources).map((scenario, index) => {\n      // Calculate additional metrics using existing functions\n      const cashRequired = calculateTotalCashRequired({\n        purchasePrice: scenario.purchasePrice,\n        sbaDownPaymentPercent: variables.sbaDownPayment,\n        sellerFinancingPercent: variables.sellerFinancing,\n        workingCapitalPercent: variables.workingCapital,\n        targetRevenue: scenario.targetRevenue,\n        techInvestment: variables.techInvestment\n      });\n\n      const cashFlow = calculateAnnualCashToPocket({\n        targetRevenue: scenario.targetRevenue,\n        netProfitMarginPercent: variables.netProfitMargin,\n        sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n        sellerFinancingAmount: scenario.purchaseFinancing.sellerFinancingAmount,\n        managementSalary: variables.managementSalary,\n        techInvestment: variables.techInvestment\n      });\n\n      // Calculate 5-year projections for advanced metrics\n      const fiveYearProjections = calculateFiveYearProjections({\n        targetRevenue: scenario.targetRevenue,\n        revenueGrowthRatePercent: variables.revenueGrowthRate,\n        netProfitMarginPercent: variables.netProfitMargin,\n        sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n        sellerFinancingAmount: scenario.purchaseFinancing.sellerFinancingAmount,\n        managementSalary: variables.managementSalary,\n        techInvestment: variables.techInvestment,\n        sbaInterestRate: variables.sbaInterestRate,\n        sellerInterestRate: variables.sellerInterestRate\n      });\n\n      // Calculate advanced return metrics\n      const totalCashInvested = cashRequired.total;\n      const irr = calculateIRR(totalCashInvested, fiveYearProjections.map(p => p.cashFlow));\n      const moic = calculateMOIC(totalCashInvested, fiveYearProjections);\n      const paybackPeriod = calculatePaybackPeriod(totalCashInvested, fiveYearProjections);\n\n      // Calculate 3-year projections\n      const projections = [];\n      let currentRevenue = scenario.targetRevenue;\n      let cumulativeCashFlow = 0;\n\n      for (let year = 1; year <= 3; year++) {\n        const ebitda = currentRevenue * (variables.netProfitMargin / 100);\n        const sbaPayment = calculateLoanPayment(scenario.purchaseFinancing.sbaLoanAmount, variables.sbaInterestRate / 100, 10);\n        const sellerPayment = calculateLoanPayment(scenario.purchaseFinancing.sellerFinancingAmount, variables.sellerInterestRate / 100, 5);\n        const techInvestmentAmortized = variables.techInvestment / 3;\n\n        const netCashFlow = ebitda - sbaPayment - sellerPayment - variables.managementSalary - techInvestmentAmortized;\n        cumulativeCashFlow += netCashFlow;\n\n        projections.push({\n          year,\n          revenue: currentRevenue,\n          ebitda,\n          netCashFlow,\n          cumulativeCashFlow\n        });\n\n        currentRevenue *= (1 + variables.revenueGrowthRate / 100);\n      }\n\n      // Calculate ROI\n      const totalInvestment = cashRequired.total;\n      const threeYearCashFlow = projections[2].cumulativeCashFlow;\n      const roi = ((threeYearCashFlow - totalInvestment) / totalInvestment) * 100;\n\n      // Calculate additional metrics\n      const debtServiceCoverage = scenario.businessDebtService.totalBusinessDebtService > 0 ? \n        scenario.ebitda / scenario.businessDebtService.totalBusinessDebtService : 0;\n      const cashOnCashReturn = calculateCashOnCashReturn(cashFlow.netCashFlow, totalCashInvested);\n      const riskScore = calculateEnhancedRiskScore(debtServiceCoverage, cashOnCashReturn, variables.sellerFinancing);\n\n      // Business capital invested\n      const businessCapitalInvested = scenario.purchasePrice + \n        (scenario.targetRevenue * variables.workingCapital / 100) + \n        (scenario.purchasePrice * 0.015) + // Due diligence\n        (scenario.purchasePrice * 0.008); // Professional fees\n\n      // Business EVA\n      const businessEVA = calculateBusinessEVA(scenario.ebitda, businessCapitalInvested, scenario.wacc / 100);\n\n      // Deal ROI (business level)\n      const dealROI = scenario.purchasePrice > 0 ? (scenario.businessCashFlow / scenario.purchasePrice) * 100 : 0;\n\n      // Personal cash invested\n      const personalCashInvested = \n        scenario.fundingAllocation.allocation.personalCash + \n        scenario.fundingAllocation.allocation.taiwaneseLoan + \n        scenario.fundingAllocation.allocation.houseEquity;\n\n      // Validate calculations before returning\n      const validationErrors = validateScenario({\n        targetRevenue: scenario.targetRevenue,\n        ebitda: scenario.ebitda,\n        purchasePrice: scenario.purchasePrice,\n        wacc: scenario.wacc,\n        downPaymentNeeded: scenario.totalCashNeeded\n      });\n\n      return {\n        scenario: scenarioNames[index],\n        cashRequired,\n        cashFlow,\n        financing: {\n          purchasePrice: scenario.purchasePrice,\n          sellerFinancing: scenario.purchaseFinancing.sellerFinancingAmount,\n          sbaLoanAmount: scenario.purchaseFinancing.sbaLoanAmount,\n          downPayment: scenario.purchaseFinancing.sbaDownPayment\n        },\n        projections,\n        roi,\n        // Enhanced metrics\n        debtServiceCoverage,\n        dscr: debtServiceCoverage,\n        cashOnCashReturn,\n        riskScore,\n        sbaLoanPrincipal: scenario.purchaseFinancing.sbaLoanPrincipal,\n        sbaMonthlyPayment: scenario.businessDebtService.sbaAnnualPayment / 12,\n        sbaAnnualPayment: scenario.businessDebtService.sbaAnnualPayment,\n        sellerMonthlyPayment: scenario.businessDebtService.sellerAnnualPayment / 12,\n        sellerAnnualPayment: scenario.businessDebtService.sellerAnnualPayment,\n        irr,\n        moic,\n        paybackPeriod,\n        fiveYearProjections,\n        \n        // FUNDING STRUCTURE WITH PRIORITY ALLOCATION\n        activeFundingSources: Object.entries(scenario.fundingAllocation.allocation)\n          .filter(([_, amount]) => amount > 0)\n          .reduce((acc, [key, amount]) => {\n            acc[key] = {\n              amount,\n              enabled: true,\n              type: key === 'additionalInvestment' || key === 'personalCash' ? 'equity' : 'debt',\n              rate: key === 'taiwaneseLoan' ? 0.028 : \n                    key === 'houseEquity' ? 0.08 : \n                    key === 'sbaLoan' ? 0.115 : \n                    key === 'sellerFinancing' ? 0.08 : 0,\n              term: key === 'taiwaneseLoan' ? 10 : \n                     key === 'houseEquity' ? 15 : \n                     key === 'sbaLoan' ? 10 : \n                     key === 'sellerFinancing' ? 5 : 0,\n              annualPayment: key === 'taiwaneseLoan' ? scenario.personalDebtService.taiwanesePayment :\n                            key === 'houseEquity' ? scenario.personalDebtService.houseEquityPayment :\n                            key === 'sbaLoan' ? scenario.businessDebtService.sbaAnnualPayment :\n                            key === 'sellerFinancing' ? scenario.businessDebtService.sellerAnnualPayment : 0\n            };\n            return acc;\n          }, {}),\n        totalFunding: scenario.fundingAllocation.totalAllocated,\n        totalDebtService: (scenario.businessDebtService?.totalBusinessDebtService || 0) + (scenario.personalDebtService?.totalPersonalDebtService || 0),\n        totalPersonalEquity: scenario.fundingAllocation.allocation.personalCash + scenario.fundingAllocation.allocation.taiwaneseLoan + scenario.fundingAllocation.allocation.houseEquity,\n        totalAdditionalEquity: scenario.fundingAllocation.allocation.additionalInvestment,\n        ownershipPercentage: scenario.ownership.yourOwnership,\n        wacc: scenario.wacc,\n        personalCostOfCapital: scenario.personalCostOfCapital,\n        \n        // BUSINESS-LEVEL METRICS\n        businessFreeCashFlow: Math.round(scenario.businessCashFlow),\n        businessDebtService: Math.round(scenario.businessDebtService.totalBusinessDebtService),\n        businessDSCR: scenario.businessDebtService.totalBusinessDebtService > 0 ? scenario.ebitda / scenario.businessDebtService.totalBusinessDebtService : 0,\n        businessEVA: Math.round(businessEVA),\n        businessWACC: scenario.wacc,\n        businessCapitalInvested: Math.round(businessCapitalInvested),\n        dealROI: dealROI,\n        \n        // PERSONAL-LEVEL METRICS\n        personalCashFlow: Math.round(scenario.personalNetCashFlow),\n        ownerCashFlow: Math.round(scenario.personalNetCashFlow),\n        personalROI: scenario.personalROI,\n        ownerROI: scenario.personalROI,\n        personalDebtService: Math.round(scenario.personalDebtService.totalPersonalDebtService),\n        personalCashInvested: Math.round(personalCashInvested),\n        ownerDistribution: Math.round(scenario.ownerDistribution),\n        ownershipDilution: scenario.ownership.investorOwnership * 100,\n        investorOwnership: scenario.ownership.investorOwnership,\n        \n        // OWNERSHIP BREAKDOWN\n        ownershipBreakdown: scenario.ownership.breakdown,\n        \n        // VALIDATION\n        validationErrors,\n        \n        // PRIORITY ALLOCATION DATA\n        fundingAllocation: scenario.fundingAllocation,\n        purchaseFinancing: scenario.purchaseFinancing,\n        businessDebtService: scenario.businessDebtService,\n        personalDebtService: scenario.personalDebtService,\n        ownership: scenario.ownership,\n        businessCashFlow: scenario.businessCashFlow,\n        ownerDistribution: scenario.ownerDistribution,\n        personalNetCashFlow: scenario.personalNetCashFlow,\n        targetRevenue: scenario.targetRevenue,\n        ebitda: scenario.ebitda,\n        purchasePrice: scenario.purchasePrice,\n        totalCashNeeded: scenario.totalCashNeeded\n      };\n    });\n  }, [variables, fundingSources]);\n\n  const handleFundingSourceChange = useCallback((sourceKey, field, value) => {\n    setFundingSources(prev => ({\n      ...prev,\n      [sourceKey]: { ...prev[sourceKey], [field]: value }\n    }));\n  }, []);\n\n  const handleVariableChange = useCallback((variableKey, value) => {\n    setVariables(prev => ({ ...prev, [variableKey]: value }));\n  }, []);\n\n  const resetToDefaults = useCallback(() => {\n    setFundingSources({\n      taiwaneseLoan: { \n        amount: 300000, \n        rate: 0.028, \n        term: 10, \n        enabled: true,\n        type: 'debt',\n        description: 'USD loan from Taiwan'\n      },\n      houseEquity: { \n        amount: 98273, \n        rate: 0.08, \n        term: 15, \n        enabled: true,\n        type: 'debt',\n        description: 'Home equity loan (tax deductible for business use)'\n      },\n      sbaLoan: { \n        amount: 0, \n        rate: 0.115, \n        term: 10, \n        enabled: false,\n        type: 'debt',\n        description: 'SBA 7(a) business acquisition loan'\n      },\n      sellerFinancing: { \n        amount: 0, \n        rate: 0.08, \n        term: 5, \n        enabled: false,\n        type: 'debt',\n        description: 'Seller note (subordinated)'\n      },\n      additionalInvestment: { \n        amount: 50000, \n        expectedReturn: 0.15, \n        enabled: true,\n        type: 'equity',\n        description: 'Outside investor equity (dilutes ownership)'\n      },\n      personalCash: { \n        amount: 50000, \n        opportunityCost: 0.08, \n        enabled: true,\n        type: 'equity',\n        description: 'Personal cash investment'\n      }\n    });\n    setVariables(DEFAULT_SCENARIO.variables);\n  }, []);\n\n  // Info Tooltip Component\n  const InfoTooltip = ({ formula, children }) => {\n    const [showTooltip, setShowTooltip] = useState(false);\n    \n    return (\n      <div className=\"relative inline-block\">\n        <div \n          className=\"inline-flex items-center gap-1 cursor-help\"\n          onMouseEnter={() => setShowTooltip(true)}\n          onMouseLeave={() => setShowTooltip(false)}\n        >\n          {children}\n          {!children && <Info className=\"w-3 h-3 text-gray-400 hover:text-gray-600\" />}\n        </div>\n        {showTooltip && (\n          <div className=\"absolute z-50 top-full left-1/2 transform -translate-x-1/2 mt-2 px-4 py-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg max-w-md\">\n            <div className=\"font-medium mb-2\">Description:</div>\n            <div className=\"whitespace-pre-wrap leading-relaxed\">{formula}</div>\n            <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900\"></div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n\n\n  // Test calculation to verify formulas\n  const testCalculation = useCallback(() => {\n    const testScenario = {\n      targetRevenue: 2500000,\n      netProfitMargin: 25,\n      valuationMultiple: 4,\n      sbaLoanAmount: 1500000,\n      sellerFinancingAmount: 500000,\n      personalCash: 550000,\n      additionalInvestment: 100000\n    };\n    \n    const result = verifyCalculations(testScenario);\n    \n    // Verify results are in expected ranges\n    const { testScenario: calc, expectedRanges } = result;\n    \n    return result;\n  }, []);\n\n  // Run test calculation on component mount\n  useEffect(() => {\n    testCalculation();\n  }, [testCalculation]);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"w-full px-6\">\n          <div className=\"flex justify-between items-center py-4\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Business Acquisition Calculator</h1>\n              <p className=\"text-sm text-gray-600 mt-1\">Interactive tool for evaluating acquisition scenarios</p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={resetToDefaults}\n                className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <Settings className=\"w-4 h-4\" />\n                Reset\n              </button>\n              <button className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\">\n                <Download className=\"w-4 h-4\" />\n                Export\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Two Panel Layout */}\n      <div className=\"flex h-screen\">\n        {/* Left Panel - Controls */}\n        <div className=\"w-2/5 bg-gray-50 p-6 overflow-y-auto\">\n          {/* Funding Sources Configuration */}\n          <div className=\"mb-8\">\n            <div className=\"mb-4\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Funding Sources Configuration</h2>\n            </div>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {Object.entries(fundingSources).filter(([key, source]) => key !== 'sbaLoan' && key !== 'sellerFinancing').map(([key, source]) => (\n                <div key={key} className=\"card p-3\">\n                  <div className=\"mb-1\">\n                    <div className=\"flex items-center gap-1\">\n                      <h3 className=\"text-sm font-semibold text-gray-900\">\n                        {key === 'houseEquity' ? 'Home Equity' : \n                         key === 'sbaLoan' ? 'SBA Loan' : \n                         key === 'personalCash' ? 'Personal Cash' :\n                         key === 'additionalInvestment' ? 'Additional Investment' :\n                         key === 'taiwaneseLoan' ? 'Taiwanese Loan' :\n                         key.replace(/([A-Z])/g, ' $1').trim()}\n                      </h3>\n                      <InfoTooltip formula={source.description}>\n                        <Info className=\"w-3 h-3 text-gray-400 hover:text-gray-600\" />\n                      </InfoTooltip>\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-1\">\n                    {/* Current Value Display */}\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <span className=\"text-xs font-medium text-gray-700\">Current: </span>\n                        <span className=\"text-sm font-semibold text-gray-900\">\n                          {formatCurrency(source.amount)}\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <CustomSlider\n                        value={source.amount}\n                        onChange={(value) => handleFundingSourceChange(key, 'amount', value)}\n                        min={0}\n                        max={key === 'taiwaneseLoan' || key === 'houseEquity' ? 300000 : \n                             key === 'additionalInvestment' || key === 'personalCash' ? 100000 : 1000000}\n                        step={25000}\n                        unit=\"$\"\n                        color=\"blue\"\n                        showTooltip={false}\n                      />\n                    </div>\n                    \n                    {source.type === 'debt' && (\n                      <div className=\"grid grid-cols-2 gap-1 text-xs\">\n                        <div className=\"text-gray-500\">Rate: {(source.rate * 100).toFixed(1)}% (after tax {key === 'houseEquity' ? (source.rate * 100).toFixed(1) : (source.rate * 0.75 * 100).toFixed(1)}%)</div>\n                        <div className=\"text-gray-500\">Term: {source.term} years</div>\n                      </div>\n                    )}\n                    \n\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n\n          </div>\n\n          {/* Variable Controls */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Variable Controls</h2>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {Object.entries(VARIABLES).map(([key, variable]) => (\n                <VariableCard\n                  key={key}\n                  variableKey={key}\n                  variable={variable}\n                  value={variables[key]}\n                  onValueChange={(value) => handleVariableChange(key, value)}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Results */}\n        <div className=\"w-3/5 bg-white p-6 overflow-y-auto\">\n\n          {/* Scenario Comparison */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Scenario Comparison</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {keyParameters.map((scenario, index) => {\n                return (\n                  <div key={index} className=\"border border-gray-200 rounded p-4\">\n                    <div className=\"text-center mb-3\">\n                      <h3 className=\"text-sm text-gray-600\">Target Annual Revenue:</h3>\n                      <p className=\"text-lg font-bold text-gray-900\">{formatCurrency(scenario.targetRevenue)}</p>\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <div className=\"p-2 bg-purple-50 rounded-lg border border-purple-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Purchase Price = Target Revenue Ã— Net Profit Margin % Ã— Valuation Multiple\\n\\nExample: $2,000,000 Ã— 20.7% Ã— 4.1x = $1,697,400\">\n                            <span className=\"text-xs font-medium text-purple-800\">Purchase Price</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-purple-900 text-center\">\n                          {formatCurrency(scenario.purchasePrice)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-orange-50 rounded-lg border border-orange-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"SBA Down Payment = (Purchase Price - Seller Financing Amount) Ã— SBA Down Payment %\\n\\nExample: ($1,697,400 - $274,979) Ã— 13% = $184,915\\n\\nThis is the minimum cash required for the SBA loan portion only.\">\n                            <span className=\"text-xs font-medium text-orange-800\">SBA Down Payment</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-orange-900 text-center\">\n                          {formatCurrency(scenario.sbaDownPayment)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-blue-50 rounded-lg border border-blue-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Down Payment Needed = SBA Down Payment + Working Capital + Fees\\n\\nIncludes:\\nâ€¢ SBA Down Payment\\nâ€¢ Working Capital (7.9% of revenue)\\nâ€¢ Due Diligence & Professional Fees (2.5% of purchase price)\\n\\nThis is the total cash required for the acquisition.\">\n                            <span className=\"text-xs font-medium text-blue-800\">Down Payment Needed</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-blue-900 text-center\">\n                          {formatCurrency(scenario.downPaymentNeeded)}\n                        </p>\n                      </div>\n                      \n                      <div className=\"p-2 bg-yellow-50 rounded-lg border border-yellow-200\">\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Available Cash = Sum of all enabled funding sources:\\n\\nâ€¢ Taiwanese Loan: $725,000 (2.8%)\\nâ€¢ Personal Cash: $550,000 (8.0%)\\nâ€¢ Additional Investment: $100,000 (15.0%)\\nâ€¢ Home Equity: $200,000 (8.0%)\\n\\nThis represents your total accessible capital for the acquisition.\">\n                            <span className=\"text-xs font-medium text-yellow-800\">Available Cash</span>\n                          </InfoTooltip>\n                        </div>\n                        <p className=\"text-sm font-bold text-yellow-900 text-center\">\n                          {formatCurrency(scenario.availableCash)}\n                        </p>\n                      </div>\n                      \n                      <div className={`p-2 rounded-lg border ${\n                        scenario.cashSurplusDeficit >= 0 ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'\n                      }`}>\n                        <div className=\"text-center mb-0.5\">\n                          <InfoTooltip formula=\"Cash Surplus/Deficit = Available Cash - Down Payment Needed\\n\\nPositive (Green): You have sufficient cash for the acquisition\\nNegative (Red): You need additional funding or must reduce acquisition costs\\n\\nThis determines if the deal is financially feasible with your current resources.\">\n                            <span className={`text-xs font-medium ${scenario.cashSurplusDeficit >= 0 ? 'text-green-800' : 'text-red-800'}`}>\n                              Cash Surplus/Deficit\n                            </span>\n                          </InfoTooltip>\n                        </div>\n                        <p className={`text-sm font-bold text-center ${scenario.cashSurplusDeficit >= 0 ? 'text-green-900' : 'text-red-900'}`}>\n                          {formatCurrency(scenario.cashSurplusDeficit)}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Deal Structure & Financing Display */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Deal Structure & Financing</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"space-y-3\">\n\n                    \n                    <div>\n                      <h4 className=\"text-xs font-bold text-gray-700 mb-2\">Funding Allocation</h4>\n                      <div className=\"space-y-1 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Taiwanese Loan:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.taiwaneseLoan || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Personal Cash:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.personalCash || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Additional Investment:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.additionalInvestment || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Seller Financing:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.sellerFinancing || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Home Equity:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.houseEquity || 0)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>SBA Loan:</span>\n                          <span className=\"font-medium\">{formatCurrency(scenario.fundingAllocation?.allocation?.sbaLoan || 0)}</span>\n                        </div>\n                        <div className=\"border-t pt-1 mt-1\">\n                          <div className=\"flex justify-between\">\n                            <span>Down Payment Needed:</span>\n                            <span className=\"font-medium\">{formatCurrency(scenario.downPaymentNeeded || 0)}</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span>Total Allocated:</span>\n                            <span>{formatCurrency(scenario.fundingAllocation?.totalAllocated || 0)}</span>\n                          </div>\n                          {scenario.fundingAllocation?.downPaymentGap > 0 && (\n                            <div className=\"flex justify-between text-red-600\">\n                              <span>Funding Gap:</span>\n                              <span>{formatCurrency(scenario.fundingAllocation.downPaymentGap)}</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"text-xs font-bold text-gray-700 mb-2\">Financing Summary</h4>\n                      <div className=\"space-y-1 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"WACC = Weighted Average Cost of Capital\\nIncludes ALL funding sources with after-tax rates:\\nâ€¢ Taiwanese Loan: 2.1% after-tax\\nâ€¢ Personal Cash: 6% after-tax\\nâ€¢ Additional Investment: 15%\\nâ€¢ Seller Financing: 6% after-tax\\nâ€¢ Home Equity: 8%\\nâ€¢ SBA Loan: 8.6% after-tax\">\n                            <span>WACC:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{(scenario.wacc || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Your Personal Cost of Capital\\nWeighted average of your personal funding sources:\\nâ€¢ Taiwanese Loan: 2.8%\\nâ€¢ Personal Cash: 8% (opportunity cost)\\nâ€¢ Home Equity: 8%\">\n                            <span>Your Personal Cost:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{(scenario.personalCostOfCapital || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Risk-adjusted ownership based on personal guarantees, asset risk, and sweat equity\">\n                            <span>Your Ownership:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{((scenario.ownershipPercentage || 0) * 100).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Investor Ownership:</span>\n                          <span className=\"font-medium\">{((scenario.investorOwnership || 0) * 100).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          Based on risk-adjusted contributions (Taiwanese Loan: 80%, Home Equity: 120%, Personal Cash: 100%). Control premium and sweat equity not considered.\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Monthly Business Debt Payment = (SBA Annual Payment + Seller Financing Annual Payment) / 12\">\n                            <span>Monthly Business Debt Payment:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{formatCurrency((scenario.businessDebtService.totalBusinessDebtService / 12))}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Monthly Personal Debt Payment = (Taiwanese Loan Annual Payment + Home Equity Annual Payment) / 12\">\n                            <span>Monthly Personal Debt Payment:</span>\n                          </InfoTooltip>\n                          <span className=\"font-medium\">{formatCurrency((scenario.personalDebtService.totalPersonalDebtService / 12))}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Business Health Metrics */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Business Health Metrics</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"space-y-2 text-xs\">\n                    <div className=\"flex justify-between\">\n                      <span>Business Revenue:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.targetRevenue)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Business EBITDA:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.ebitda)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business Debt Service = SBA Annual Payment + Seller Financing Annual Payment\\nSBA: 11.5% rate, 10-year term\\nSeller: 8% rate, 5-year term\">\n                        <span>Business Debt Service:</span>\n                      </InfoTooltip>\n                      <span className=\"font-medium\">{formatCurrency(scenario.businessDebtService.totalBusinessDebtService)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Business Free Cash Flow:</span>\n                      <span className=\"font-medium\">{formatCurrency(scenario.businessFreeCashFlow)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Economic Value Added = NOPAT - Capital Charge\\nNOPAT = EBITDA Ã— (1 - Tax Rate)\\nCapital Charge = Business Capital Invested Ã— WACC\">\n                        <span>Economic Value Added:</span>\n                      </InfoTooltip>\n                      <span className=\"font-medium\">\n                        {formatCurrency(scenario.businessEVA)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business DSCR = EBITDA / Business Debt Service (SBA + Seller only)\">\n                        <span>Business DSCR:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${scenario.businessDSCR < 1.25 ? 'text-red-600' : scenario.businessDSCR < 1.5 ? 'text-yellow-500' : scenario.businessDSCR < 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.businessDSCR || 0).toFixed(2)}x\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;1.25x | Below Target 1.25-1.5x | Good 1.5-2.0x | Excellent &gt;2.0x\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Business ROA = (Business Free Cash Flow / Business Capital Invested) Ã— 100\\nBusiness Capital = Purchase Price + Working Capital + Due Diligence + Professional Fees\">\n                        <span>Business ROA:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 3 ? 'text-red-600' : ((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 6 ? 'text-yellow-500' : ((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100) < 10 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {((scenario.businessFreeCashFlow / scenario.businessCapitalInvested) * 100).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;3% | Below Target 3-6% | Good 6-10% | Excellent &gt;10%\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Debt-to-EBITDA Ratio = Total Business Debt Ã· EBITDA\">\n                        <span>Debt-to-EBITDA Ratio:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 4.0 ? 'text-red-600' : ((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 3.0 ? 'text-yellow-500' : ((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda) > 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {((scenario.fundingAllocation.allocation.sbaLoan + scenario.fundingAllocation.allocation.sellerFinancing) / scenario.ebitda).toFixed(1)}x\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &gt;4.0x | Below Target 3.0-4.0x | Good 2.0-3.0x | Excellent &lt;2.0x\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <InfoTooltip formula=\"Interest Coverage Ratio = EBITDA Ã· Interest Payments\">\n                        <span>Interest Coverage Ratio:</span>\n                      </InfoTooltip>\n                      <span className={`font-medium ${(scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 1.5 ? 'text-red-600' : (scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 2.5 ? 'text-yellow-500' : (scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))) < 3.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                        {(scenario.ebitda / ((scenario.fundingAllocation.allocation.sbaLoan * 0.115) + (scenario.fundingAllocation.allocation.sellerFinancing * 0.08))).toFixed(1)}x\n                      </span>\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 mt-1\">\n                      <span className=\"font-medium\">Standard:</span> Critical &lt;1.5x | Below Target 1.5-2.5x | Good 2.5-3.0x | Excellent &gt;3.0x\n                    </div>\n\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Personal Investment Returns */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">Personal Investment Returns</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    {/* Business Burden/Gain */}\n                    <div className=\"business-analysis\">\n                      <h3 className=\"text-xs font-bold text-gray-700 mb-2\">Business Level</h3>\n                      <div className=\"space-y-2 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Revenue Burden:</span>\n                          <span>{formatCurrency(scenario.targetRevenue)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Operating Costs:</span>\n                          <span>-{formatCurrency(scenario.targetRevenue - scenario.ebitda)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Business Debt Service:</span>\n                          <span>-{formatCurrency(scenario.businessDebtService.totalBusinessDebtService)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Management Costs:</span>\n                          <span>-{formatCurrency(variables.managementSalary)}</span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-2 font-medium\">\n                          <span>Business Net Gain:</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(scenario.businessFreeCashFlow)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Personal Burden/Gain */}\n                    <div className=\"personal-analysis\">\n                      <h3 className=\"text-xs font-bold text-gray-700 mb-2\">Personal Level</h3>\n                      <div className=\"space-y-2 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span>Personal Investment:</span>\n                          <span>-{formatCurrency(scenario.personalCashInvested)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Business Distribution:</span>\n                          <span>+{formatCurrency(scenario.ownerDistribution)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Personal Debt Service:</span>\n                          <span>-{formatCurrency(scenario.personalDebtService.totalPersonalDebtService)}</span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-2 font-medium\">\n                          <span>Your Net Annual Gain:</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(scenario.personalCashFlow)}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Your ROI = (Your Net Annual Gain Ã· Your Total Cash Invested) Ã— 100\\nYour Total Cash Invested = Personal Cash + Taiwanese Loan + Home Equity\">\n                            <span>Your ROI:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${scenario.personalROI < 7 ? 'text-red-600' : scenario.personalROI < 12 ? 'text-yellow-500' : scenario.personalROI < 20 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {scenario.personalROI.toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;7% | Below Target 7-12% | Good 12-20% | Excellent &gt;20%\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Cash-on-Cash Return = Annual Cash Flow Ã· Your Cash Invested\">\n                            <span>Cash-on-Cash Return:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${(scenario.personalCashFlow / scenario.personalCashInvested * 100) < 8 ? 'text-red-600' : (scenario.personalCashFlow / scenario.personalCashInvested * 100) < 12 ? 'text-yellow-500' : (scenario.personalCashFlow / scenario.personalCashInvested * 100) < 20 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.personalCashFlow / scenario.personalCashInvested * 100).toFixed(1)}%\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &lt;8% | Below Target 8-12% | Good 12-20% | Excellent &gt;20%\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <InfoTooltip formula=\"Payback Period = Your Total Investment Ã· Your Net Annual Gain\">\n                            <span>Payback Period:</span>\n                          </InfoTooltip>\n                          <span className={`font-medium ${(scenario.personalCashInvested / scenario.personalCashFlow) > 8 ? 'text-red-600' : (scenario.personalCashInvested / scenario.personalCashFlow) > 5 ? 'text-yellow-500' : (scenario.personalCashInvested / scenario.personalCashFlow) > 3 ? 'text-green-600' : 'text-blue-600'}`}>\n                            {(scenario.personalCashInvested / scenario.personalCashFlow).toFixed(1)} years\n                          </span>\n                        </div>\n                        <div className=\"text-[10px] text-gray-600 mt-1\">\n                          <span className=\"font-medium\">Standard:</span> Critical &gt;8 years | Below Target 5-8 years | Good 3-5 years | Excellent &lt;3 years\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n\n\n          {/* Growth & Risk Projections */}\n          <div className=\"bg-white rounded-lg shadow-lg p-4 mb-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Growth & Risk Projections</h2>\n            <div className=\"grid lg:grid-cols-3 gap-4\">\n              {allResults.map((scenario, index) => (\n                <div key={index} className=\"border border-gray-200 rounded p-4\">\n                  <table className=\"w-full text-xs\">\n                    <thead>\n                      <tr className=\"border-b\">\n                        <th className=\"text-left py-1\">Year</th>\n                        <th className=\"text-right py-1\">Business FCF</th>\n                        <th className=\"text-right py-1\">Your Distribution</th>\n                        <th className=\"text-right py-1\">Your Net FCF</th>\n                        <th className=\"text-right py-1\">DSCR</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {scenario.projections.map((year, yearIndex) => {\n                        // Calculate business FCF for this year\n                        const yearEBITDA = year.ebitda;\n                        const yearBusinessFCF = yearEBITDA - scenario.businessDebtService.totalBusinessDebtService - variables.managementSalary - (variables.techInvestment / 3);\n                        const yearOwnerDistribution = yearBusinessFCF * scenario.ownership.yourOwnership;\n                        const yearYourFCF = yearOwnerDistribution - scenario.personalDebtService.totalPersonalDebtService;\n                        const yearDSCR = scenario.businessDebtService.totalBusinessDebtService > 0 ? yearEBITDA / scenario.businessDebtService.totalBusinessDebtService : 0;\n                        \n                        return (\n                          <tr key={yearIndex}>\n                            <td className=\"py-1\">{year.year}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearBusinessFCF)}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearOwnerDistribution)}</td>\n                            <td className=\"text-right py-1\">{formatCurrency(yearYourFCF)}</td>\n                            <td className={`text-right py-1 ${yearDSCR < 1.25 ? 'text-red-600' : yearDSCR < 1.5 ? 'text-yellow-500' : yearDSCR < 2.0 ? 'text-green-600' : 'text-blue-600'}`}>\n                              {yearDSCR.toFixed(2)}x\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n              ))}\n            </div>\n          </div>\n\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,CAAEC,WAAW,KAAQ,OAAO,CACxE,OAASC,QAAQ,CAAEC,QAAQ,CAAEC,IAAI,KAAQ,cAAc,CACvD,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,OAASC,SAAS,CAAEC,gBAAgB,KAAQ,mBAAmB,CAC/D,OACEC,0BAA0B,CAC1BC,2BAA2B,CAC3BC,aAAa,CACbC,yBAAyB,CACzBC,0BAA0B,CAC1BC,YAAY,CACZC,aAAa,CACbC,sBAAsB,CACtBC,4BAA4B,CAC5BC,8BAA8B,CAC9BC,qBAAqB,CACrBC,oBAAoB,CACpBC,kBAAkB,CAClBC,8BAA8B,CAC9BC,wBAAwB,CACxBC,yBAAyB,CACzBC,+BAA+B,CAC/BC,4BAA4B,CAC5BC,4BAA4B,CAC5BC,0BAA0B,CAC1BC,+BAA+B,KAC1B,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,GAAG,CAAGA,CAAA,GAAM,CAChB;AACA,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGtC,QAAQ,CAAC,IAAM,CACzD,KAAM,CAAAuC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CACpD,MAAO,CAAAF,KAAK,CAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAAG,CACjCK,aAAa,CAAE,CACbC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,KAAK,CACXC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,sBACf,CAAC,CACDC,WAAW,CAAE,CACXN,MAAM,CAAE,KAAK,CACbC,IAAI,CAAE,IAAI,CACVC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,oDACf,CAAC,CACDE,OAAO,CAAE,CACPP,MAAM,CAAE,CAAC,CACTC,IAAI,CAAE,KAAK,CACXC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,KAAK,CACdC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,oCACf,CAAC,CACDG,eAAe,CAAE,CACfR,MAAM,CAAE,CAAC,CACTC,IAAI,CAAE,IAAI,CACVC,IAAI,CAAE,CAAC,CACPC,OAAO,CAAE,KAAK,CACdC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,4BACf,CAAC,CACDI,oBAAoB,CAAE,CACpBT,MAAM,CAAE,KAAK,CACbU,cAAc,CAAE,IAAI,CACpBP,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,QAAQ,CACdC,WAAW,CAAE,6CACf,CAAC,CACDM,YAAY,CAAE,CACZX,MAAM,CAAE,KAAK,CACbY,eAAe,CAAE,IAAI,CACrBT,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,QAAQ,CACdC,WAAW,CAAE,0BACf,CACF,CAAC,CACH,CAAC,CAAC,CAEF,KAAM,CAACQ,SAAS,CAAEC,YAAY,CAAC,CAAG3D,QAAQ,CAAC,IAAM,CAC/C,KAAM,CAAAuC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAC/C,KAAM,CAAAmB,cAAc,CAAGrB,KAAK,CAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAAG7B,gBAAgB,CAACgD,SAAS,CAE7E;AACA,MAAO,CACL,GAAGhD,gBAAgB,CAACgD,SAAS,CAC7B,GAAGE,cACL,CAAC,CACH,CAAC,CAAC,CAEF;AACA3D,SAAS,CAAC,IAAM,CACduC,YAAY,CAACqB,OAAO,CAAC,gBAAgB,CAAEnB,IAAI,CAACoB,SAAS,CAACzB,cAAc,CAAC,CAAC,CACxE,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAEpBpC,SAAS,CAAC,IAAM,CACduC,YAAY,CAACqB,OAAO,CAAC,WAAW,CAAEnB,IAAI,CAACoB,SAAS,CAACJ,SAAS,CAAC,CAAC,CAC9D,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAAK,gBAAgB,CAAIC,QAAQ,EAAK,CACrC,KAAM,CAAAC,MAAM,CAAG,EAAE,CAEjB,GAAIC,KAAK,CAACF,QAAQ,CAACG,aAAa,CAAC,EAAIH,QAAQ,CAACG,aAAa,EAAI,CAAC,CAAE,CAChEF,MAAM,CAACG,IAAI,CAAC,6BAA6B,CAAC,CAC5C,CAEA,GAAIF,KAAK,CAACF,QAAQ,CAACK,MAAM,CAAC,EAAIL,QAAQ,CAACK,MAAM,EAAI,CAAC,CAAE,CAClDJ,MAAM,CAACG,IAAI,CAAC,+BAA+B,CAAC,CAC9C,CAEA,GAAIF,KAAK,CAACF,QAAQ,CAACM,aAAa,CAAC,EAAIN,QAAQ,CAACM,aAAa,EAAI,CAAC,CAAE,CAChEL,MAAM,CAACG,IAAI,CAAC,uCAAuC,CAAC,CACtD,CAEA,GAAIJ,QAAQ,CAACO,IAAI,CAAG,EAAE,CAAE,CACtBN,MAAM,CAACG,IAAI,CAAC,kBAAkBJ,QAAQ,CAACO,IAAI,qBAAqB,CAAC,CACnE,CAEA,GAAIP,QAAQ,CAACQ,iBAAiB,CAAGR,QAAQ,CAACM,aAAa,CAAG,IAAI,CAAE,CAC9DL,MAAM,CAACG,IAAI,CAAC,kCAAkC,CAAC,CACjD,CAEA,GAAIH,MAAM,CAACQ,MAAM,CAAG,CAAC,CAAE,CACrBC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEV,MAAM,CAAC,CAChD,CAAC,IAAM,CAEP,CAEA,MAAO,CAAAA,MAAM,CACf,CAAC,CAED;AACA;AACA,KAAM,CAAAW,oBAAoB,CAAGA,CAACC,SAAS,CAAE/B,IAAI,CAAEgC,SAAS,GAAK,CAC3D,GAAID,SAAS,EAAI,CAAC,EAAI/B,IAAI,EAAI,CAAC,CAAE,MAAO,EAAC,CACzC,KAAM,CAAAiC,WAAW,CAAGjC,IAAI,CAAG,EAAE,CAC7B,KAAM,CAAAkC,QAAQ,CAAGF,SAAS,CAAG,EAAE,CAC/B,MAAQ,CAAAD,SAAS,CAAGE,WAAW,CAAGE,IAAI,CAACC,GAAG,CAAC,CAAC,CAAGH,WAAW,CAAEC,QAAQ,CAAC,EAC7DC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAGH,WAAW,CAAEC,QAAQ,CAAC,CAAG,CAAC,CAAC,CAAG,EAAE,CAAE;AACzD,CAAC,CAED;AACA,KAAM,CAAAG,aAAa,CAAG,QAAAA,CAAC9C,cAAc,CAAqB,IAAnB,CAAA+C,OAAO,CAAAC,SAAA,CAAAZ,MAAA,IAAAY,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,IAAI,CACnD,GAAI,CAAAE,YAAY,CAAG,CAAC,CACpB,GAAI,CAAAC,YAAY,CAAG,CAAC,CAEpB;AACAC,MAAM,CAACC,OAAO,CAACrD,cAAc,CAAC,CAACsD,OAAO,CAACC,IAAA,EAAmB,IAAlB,CAACC,GAAG,CAAEC,MAAM,CAAC,CAAAF,IAAA,CACnD,GAAIE,MAAM,CAAC9C,OAAO,EAAI8C,MAAM,CAACjD,MAAM,CAAG,CAAC,CAAE,CACvC0C,YAAY,EAAIO,MAAM,CAACjD,MAAM,CAE7B;AACA,GAAI,CAAAkD,QAAQ,CACZ,GAAIF,GAAG,GAAK,eAAe,CAAEE,QAAQ,CAAG,KAAK,CAAE;AAAA,IAC1C,IAAIF,GAAG,GAAK,aAAa,CAAEE,QAAQ,CAAG,IAAI,CAAE;AAAA,IAC5C,IAAIF,GAAG,GAAK,SAAS,CAAEE,QAAQ,CAAG,KAAK,EAAI,CAAC,CAAGX,OAAO,CAAC,CAAE;AAAA,IACzD,IAAIS,GAAG,GAAK,iBAAiB,CAAEE,QAAQ,CAAG,IAAI,EAAI,CAAC,CAAGX,OAAO,CAAG,GAAG,CAAC,CAAE;AAAA,IACtE,IAAIS,GAAG,GAAK,sBAAsB,CAAEE,QAAQ,CAAG,IAAI,CAAE;AAAA,IACrD,IAAIF,GAAG,GAAK,cAAc,CAAEE,QAAQ,CAAG,IAAI,CAAE;AAAA,IAC7C,CAAAA,QAAQ,CAAG,IAAI,CAAE;AAEtBP,YAAY,EAAIM,MAAM,CAACjD,MAAM,CAAGkD,QAAQ,CAC1C,CACF,CAAC,CAAC,CAEF,KAAM,CAAAxB,IAAI,CAAGgB,YAAY,CAAG,CAAC,CAAIC,YAAY,CAAGD,YAAY,CAAI,CAAC,CACjE,MAAO,CAAAhB,IAAI,CAAG,GAAG,CAAE;AACrB,CAAC,CAQD;AACA,KAAM,CAAAyB,aAAa,CAAG9F,OAAO,CAAC,IAAM,CAClC;AACA,KAAM,CAAA+F,kBAAkB,CACtB,CAAC5D,cAAc,CAACO,aAAa,CAACI,OAAO,CAAGX,cAAc,CAACO,aAAa,CAACC,MAAM,CAAG,CAAC,GAC9ER,cAAc,CAACc,WAAW,CAACH,OAAO,CAAGX,cAAc,CAACc,WAAW,CAACN,MAAM,CAAG,CAAC,CAAC,EAC3ER,cAAc,CAACiB,oBAAoB,CAACN,OAAO,CAAGX,cAAc,CAACiB,oBAAoB,CAACT,MAAM,CAAG,CAAC,CAAC,EAC7FR,cAAc,CAACmB,YAAY,CAACR,OAAO,CAAGX,cAAc,CAACmB,YAAY,CAACX,MAAM,CAAG,CAAC,CAC9E,CAED,KAAM,CAAAqD,SAAS,CAAG,CAChB,CAAE/B,aAAa,CAAE,OAAO,CAAEgC,IAAI,CAAE,gBAAiB,CAAC,CAClD,CAAEhC,aAAa,CAAE,OAAO,CAAEgC,IAAI,CAAE,iBAAkB,CAAC,CACnD,CAAEhC,aAAa,CAAE,OAAO,CAAEgC,IAAI,CAAE,gBAAiB,CAAC,CACnD,CAED,MAAO,CAAAD,SAAS,CAACE,GAAG,CAACpC,QAAQ,EAAI,KAAAqC,qBAAA,CAAAC,qBAAA,CAC/B;AACA,KAAM,CAAAC,SAAS,CAAG7C,SAAS,CAAC8C,eAAe,EAAI,EAAE,CACjD,KAAM,CAAAC,iBAAiB,CAAG/C,SAAS,CAAC+C,iBAAiB,EAAI,CAAC,CAC1D,KAAM,CAAAC,sBAAsB,EAAAL,qBAAA,CAAG3C,SAAS,CAACL,eAAe,UAAAgD,qBAAA,UAAAA,qBAAA,CAAI,EAAE,CAC9D,KAAM,CAAAM,iBAAiB,EAAAL,qBAAA,CAAG5C,SAAS,CAACiD,iBAAiB,UAAAL,qBAAA,UAAAA,qBAAA,CAAI,CAAC,CAC1D,KAAM,CAAAM,qBAAqB,CAAG3B,IAAI,CAAC4B,GAAG,CAACnD,SAAS,CAACoD,cAAc,EAAI,EAAE,CAAE,EAAE,CAAC,CAE1E,KAAM,CAAAzC,MAAM,CAAGL,QAAQ,CAACG,aAAa,EAAIoC,SAAS,CAAG,GAAG,CAAC,CACzD,KAAM,CAAAjC,aAAa,CAAGD,MAAM,CAAGoC,iBAAiB,CAEhD;AACA;AACA,KAAM,CAAAM,qBAAqB,CAAGzC,aAAa,EAAIoC,sBAAsB,CAAG,GAAG,CAAC,CAC5E,KAAM,CAAAM,aAAa,CAAG1C,aAAa,CAAGyC,qBAAqB,CAC3D,KAAM,CAAAD,cAAc,CAAGE,aAAa,EAAIJ,qBAAqB,CAAG,GAAG,CAAC,CAEpE;AACA;AAEA;AACA,KAAM,CAAAK,qBAAqB,CAAGvD,SAAS,CAACwD,cAAc,EAAI,EAAE,CAC5D,KAAM,CAAAA,cAAc,CAAGlD,QAAQ,CAACG,aAAa,EAAI8C,qBAAqB,CAAG,GAAG,CAAC,CAC7E,KAAM,CAAAE,IAAI,CAAG7C,aAAa,CAAG,KAAK,CAAE;AAEpC,KAAM,CAAA8C,sBAAsB,CAAGN,cAAc,CAAGI,cAAc,CAAGC,IAAI,CAIrE,MAAO,CACL,GAAGnD,QAAQ,CACXK,MAAM,CAAEY,IAAI,CAACoC,KAAK,CAAChD,MAAM,CAAC,CAC1BC,aAAa,CAAEW,IAAI,CAACoC,KAAK,CAAC/C,aAAa,CAAC,CACxCgD,aAAa,CAAErB,kBAAkB,CACjCzB,iBAAiB,CAAES,IAAI,CAACoC,KAAK,CAACD,sBAAsB,CAAC,CACrDN,cAAc,CAAE7B,IAAI,CAACoC,KAAK,CAACP,cAAc,CAAC,CAC1CE,aAAa,CAAE/B,IAAI,CAACoC,KAAK,CAACL,aAAa,CAAC,CACxCD,qBAAqB,CAAE9B,IAAI,CAACoC,KAAK,CAACN,qBAAqB,CAAC,CACxDG,cAAc,CAAEjC,IAAI,CAACoC,KAAK,CAACH,cAAc,CAAC,CAC1CC,IAAI,CAAElC,IAAI,CAACoC,KAAK,CAACF,IAAI,CAAC,CACtBI,kBAAkB,CAAEtC,IAAI,CAACoC,KAAK,CAACpB,kBAAkB,CAAGmB,sBAAsB,CAC5E,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,CAAE,CAAC/E,cAAc,CAAEqB,SAAS,CAAC,CAAC,CAE/B;AACA,KAAM,CAAA8D,UAAU,CAAGtH,OAAO,CAAC,IAAM,CAC/B,KAAM,CAAAuH,cAAc,CAAG,CAAC,OAAO,CAAE,OAAO,CAAE,OAAO,CAAC,CAClD,KAAM,CAAAC,aAAa,CAAG,CAAC,gBAAgB,CAAE,iBAAiB,CAAE,gBAAgB,CAAC,CAE7E,MAAO,CAAAlG,8BAA8B,CAACiG,cAAc,CAAE/D,SAAS,CAAErB,cAAc,CAAC,CAAC+D,GAAG,CAAC,CAACpC,QAAQ,CAAE2D,KAAK,GAAK,KAAAC,qBAAA,CAAAC,qBAAA,CACxG;AACA,KAAM,CAAAC,YAAY,CAAGnH,0BAA0B,CAAC,CAC9C2D,aAAa,CAAEN,QAAQ,CAACM,aAAa,CACrCsC,qBAAqB,CAAElD,SAAS,CAACoD,cAAc,CAC/CJ,sBAAsB,CAAEhD,SAAS,CAACL,eAAe,CACjD4D,qBAAqB,CAAEvD,SAAS,CAACwD,cAAc,CAC/C/C,aAAa,CAAEH,QAAQ,CAACG,aAAa,CACrC4D,cAAc,CAAErE,SAAS,CAACqE,cAC5B,CAAC,CAAC,CAEF,KAAM,CAAAC,QAAQ,CAAGpH,2BAA2B,CAAC,CAC3CuD,aAAa,CAAEH,QAAQ,CAACG,aAAa,CACrC8D,sBAAsB,CAAEvE,SAAS,CAAC8C,eAAe,CACjDQ,aAAa,CAAEhD,QAAQ,CAACkE,iBAAiB,CAAClB,aAAa,CACvDD,qBAAqB,CAAE/C,QAAQ,CAACkE,iBAAiB,CAACnB,qBAAqB,CACvEoB,gBAAgB,CAAEzE,SAAS,CAACyE,gBAAgB,CAC5CJ,cAAc,CAAErE,SAAS,CAACqE,cAC5B,CAAC,CAAC,CAEF;AACA,KAAM,CAAAK,mBAAmB,CAAGjH,4BAA4B,CAAC,CACvDgD,aAAa,CAAEH,QAAQ,CAACG,aAAa,CACrCkE,wBAAwB,CAAE3E,SAAS,CAACiD,iBAAiB,CACrDsB,sBAAsB,CAAEvE,SAAS,CAAC8C,eAAe,CACjDQ,aAAa,CAAEhD,QAAQ,CAACkE,iBAAiB,CAAClB,aAAa,CACvDD,qBAAqB,CAAE/C,QAAQ,CAACkE,iBAAiB,CAACnB,qBAAqB,CACvEoB,gBAAgB,CAAEzE,SAAS,CAACyE,gBAAgB,CAC5CJ,cAAc,CAAErE,SAAS,CAACqE,cAAc,CACxCO,eAAe,CAAE5E,SAAS,CAAC4E,eAAe,CAC1CC,kBAAkB,CAAE7E,SAAS,CAAC6E,kBAChC,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,iBAAiB,CAAGV,YAAY,CAACW,KAAK,CAC5C,KAAM,CAAAC,GAAG,CAAG1H,YAAY,CAACwH,iBAAiB,CAAEJ,mBAAmB,CAAChC,GAAG,CAACuC,CAAC,EAAIA,CAAC,CAACX,QAAQ,CAAC,CAAC,CACrF,KAAM,CAAAY,IAAI,CAAG3H,aAAa,CAACuH,iBAAiB,CAAEJ,mBAAmB,CAAC,CAClE,KAAM,CAAAS,aAAa,CAAG3H,sBAAsB,CAACsH,iBAAiB,CAAEJ,mBAAmB,CAAC,CAEpF;AACA,KAAM,CAAAU,WAAW,CAAG,EAAE,CACtB,GAAI,CAAAC,cAAc,CAAG/E,QAAQ,CAACG,aAAa,CAC3C,GAAI,CAAA6E,kBAAkB,CAAG,CAAC,CAE1B,IAAK,GAAI,CAAAC,IAAI,CAAG,CAAC,CAAEA,IAAI,EAAI,CAAC,CAAEA,IAAI,EAAE,CAAE,CACpC,KAAM,CAAA5E,MAAM,CAAG0E,cAAc,EAAIrF,SAAS,CAAC8C,eAAe,CAAG,GAAG,CAAC,CACjE,KAAM,CAAA0C,UAAU,CAAGtE,oBAAoB,CAACZ,QAAQ,CAACkE,iBAAiB,CAAClB,aAAa,CAAEtD,SAAS,CAAC4E,eAAe,CAAG,GAAG,CAAE,EAAE,CAAC,CACtH,KAAM,CAAAa,aAAa,CAAGvE,oBAAoB,CAACZ,QAAQ,CAACkE,iBAAiB,CAACnB,qBAAqB,CAAErD,SAAS,CAAC6E,kBAAkB,CAAG,GAAG,CAAE,CAAC,CAAC,CACnI,KAAM,CAAAa,uBAAuB,CAAG1F,SAAS,CAACqE,cAAc,CAAG,CAAC,CAE5D,KAAM,CAAAsB,WAAW,CAAGhF,MAAM,CAAG6E,UAAU,CAAGC,aAAa,CAAGzF,SAAS,CAACyE,gBAAgB,CAAGiB,uBAAuB,CAC9GJ,kBAAkB,EAAIK,WAAW,CAEjCP,WAAW,CAAC1E,IAAI,CAAC,CACf6E,IAAI,CACJK,OAAO,CAAEP,cAAc,CACvB1E,MAAM,CACNgF,WAAW,CACXL,kBACF,CAAC,CAAC,CAEFD,cAAc,EAAK,CAAC,CAAGrF,SAAS,CAACiD,iBAAiB,CAAG,GAAI,CAC3D,CAEA;AACA,KAAM,CAAA4C,eAAe,CAAGzB,YAAY,CAACW,KAAK,CAC1C,KAAM,CAAAe,iBAAiB,CAAGV,WAAW,CAAC,CAAC,CAAC,CAACE,kBAAkB,CAC3D,KAAM,CAAAS,GAAG,CAAI,CAACD,iBAAiB,CAAGD,eAAe,EAAIA,eAAe,CAAI,GAAG,CAE3E;AACA,KAAM,CAAAG,mBAAmB,CAAG1F,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAG,CAAC,CACnF5F,QAAQ,CAACK,MAAM,CAAGL,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAG,CAAC,CAC7E,KAAM,CAAAC,gBAAgB,CAAG/I,yBAAyB,CAACkH,QAAQ,CAACqB,WAAW,CAAEb,iBAAiB,CAAC,CAC3F,KAAM,CAAAsB,SAAS,CAAG/I,0BAA0B,CAAC2I,mBAAmB,CAAEG,gBAAgB,CAAEnG,SAAS,CAACL,eAAe,CAAC,CAE9G;AACA,KAAM,CAAA0G,uBAAuB,CAAG/F,QAAQ,CAACM,aAAa,CACnDN,QAAQ,CAACG,aAAa,CAAGT,SAAS,CAACwD,cAAc,CAAG,GAAI,CACxDlD,QAAQ,CAACM,aAAa,CAAG,KAAM,CAAG;AAClCN,QAAQ,CAACM,aAAa,CAAG,KAAM,CAAE;AAEpC;AACA,KAAM,CAAA0F,WAAW,CAAG1I,oBAAoB,CAAC0C,QAAQ,CAACK,MAAM,CAAE0F,uBAAuB,CAAE/F,QAAQ,CAACO,IAAI,CAAG,GAAG,CAAC,CAEvG;AACA,KAAM,CAAA0F,OAAO,CAAGjG,QAAQ,CAACM,aAAa,CAAG,CAAC,CAAIN,QAAQ,CAACkG,gBAAgB,CAAGlG,QAAQ,CAACM,aAAa,CAAI,GAAG,CAAG,CAAC,CAE3G;AACA,KAAM,CAAA6F,oBAAoB,CACxBnG,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAC7G,YAAY,CAClDQ,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACzH,aAAa,CACnDoB,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAClH,WAAW,CAEnD;AACA,KAAM,CAAAmH,gBAAgB,CAAGvG,gBAAgB,CAAC,CACxCI,aAAa,CAAEH,QAAQ,CAACG,aAAa,CACrCE,MAAM,CAAEL,QAAQ,CAACK,MAAM,CACvBC,aAAa,CAAEN,QAAQ,CAACM,aAAa,CACrCC,IAAI,CAAEP,QAAQ,CAACO,IAAI,CACnBC,iBAAiB,CAAER,QAAQ,CAACuG,eAC9B,CAAC,CAAC,CAEF,MAAO,CACLvG,QAAQ,CAAE0D,aAAa,CAACC,KAAK,CAAC,CAC9BG,YAAY,CACZE,QAAQ,CACRwC,SAAS,CAAE,CACTlG,aAAa,CAAEN,QAAQ,CAACM,aAAa,CACrCjB,eAAe,CAAEW,QAAQ,CAACkE,iBAAiB,CAACnB,qBAAqB,CACjEC,aAAa,CAAEhD,QAAQ,CAACkE,iBAAiB,CAAClB,aAAa,CACvDyD,WAAW,CAAEzG,QAAQ,CAACkE,iBAAiB,CAACpB,cAC1C,CAAC,CACDgC,WAAW,CACXW,GAAG,CACH;AACAC,mBAAmB,CACnBgB,IAAI,CAAEhB,mBAAmB,CACzBG,gBAAgB,CAChBC,SAAS,CACTa,gBAAgB,CAAE3G,QAAQ,CAACkE,iBAAiB,CAACyC,gBAAgB,CAC7DC,iBAAiB,CAAE5G,QAAQ,CAAC2F,mBAAmB,CAACkB,gBAAgB,CAAG,EAAE,CACrEA,gBAAgB,CAAE7G,QAAQ,CAAC2F,mBAAmB,CAACkB,gBAAgB,CAC/DC,oBAAoB,CAAE9G,QAAQ,CAAC2F,mBAAmB,CAACoB,mBAAmB,CAAG,EAAE,CAC3EA,mBAAmB,CAAE/G,QAAQ,CAAC2F,mBAAmB,CAACoB,mBAAmB,CACrErC,GAAG,CACHE,IAAI,CACJC,aAAa,CACbT,mBAAmB,CAEnB;AACA4C,oBAAoB,CAAEvF,MAAM,CAACC,OAAO,CAAC1B,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAC,CACxEY,MAAM,CAACC,KAAA,MAAC,CAACC,CAAC,CAAEtI,MAAM,CAAC,CAAAqI,KAAA,OAAK,CAAArI,MAAM,CAAG,CAAC,GAAC,CACnCuI,MAAM,CAAC,CAACC,GAAG,CAAAC,KAAA,GAAoB,IAAlB,CAACzF,GAAG,CAAEhD,MAAM,CAAC,CAAAyI,KAAA,CACzBD,GAAG,CAACxF,GAAG,CAAC,CAAG,CACThD,MAAM,CACNG,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE4C,GAAG,GAAK,sBAAsB,EAAIA,GAAG,GAAK,cAAc,CAAG,QAAQ,CAAG,MAAM,CAClF/C,IAAI,CAAE+C,GAAG,GAAK,eAAe,CAAG,KAAK,CAC/BA,GAAG,GAAK,aAAa,CAAG,IAAI,CAC5BA,GAAG,GAAK,SAAS,CAAG,KAAK,CACzBA,GAAG,GAAK,iBAAiB,CAAG,IAAI,CAAG,CAAC,CAC1C9C,IAAI,CAAE8C,GAAG,GAAK,eAAe,CAAG,EAAE,CAC3BA,GAAG,GAAK,aAAa,CAAG,EAAE,CAC1BA,GAAG,GAAK,SAAS,CAAG,EAAE,CACtBA,GAAG,GAAK,iBAAiB,CAAG,CAAC,CAAG,CAAC,CACxC0F,aAAa,CAAE1F,GAAG,GAAK,eAAe,CAAG7B,QAAQ,CAACwH,mBAAmB,CAACC,gBAAgB,CACxE5F,GAAG,GAAK,aAAa,CAAG7B,QAAQ,CAACwH,mBAAmB,CAACE,kBAAkB,CACvE7F,GAAG,GAAK,SAAS,CAAG7B,QAAQ,CAAC2F,mBAAmB,CAACkB,gBAAgB,CACjEhF,GAAG,GAAK,iBAAiB,CAAG7B,QAAQ,CAAC2F,mBAAmB,CAACoB,mBAAmB,CAAG,CAC/F,CAAC,CACD,MAAO,CAAAM,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CACRM,YAAY,CAAE3H,QAAQ,CAACoG,iBAAiB,CAACwB,cAAc,CACvDC,gBAAgB,CAAE,CAAC,EAAAjE,qBAAA,CAAA5D,QAAQ,CAAC2F,mBAAmB,UAAA/B,qBAAA,iBAA5BA,qBAAA,CAA8BgC,wBAAwB,GAAI,CAAC,GAAK,EAAA/B,qBAAA,CAAA7D,QAAQ,CAACwH,mBAAmB,UAAA3D,qBAAA,iBAA5BA,qBAAA,CAA8BiE,wBAAwB,GAAI,CAAC,CAAC,CAC/IC,mBAAmB,CAAE/H,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAC7G,YAAY,CAAGQ,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACzH,aAAa,CAAGoB,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAClH,WAAW,CACjL6I,qBAAqB,CAAEhI,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAC/G,oBAAoB,CACjF2I,mBAAmB,CAAEjI,QAAQ,CAACkI,SAAS,CAACC,aAAa,CACrD5H,IAAI,CAAEP,QAAQ,CAACO,IAAI,CACnB6H,qBAAqB,CAAEpI,QAAQ,CAACoI,qBAAqB,CAErD;AACAC,oBAAoB,CAAEpH,IAAI,CAACoC,KAAK,CAACrD,QAAQ,CAACkG,gBAAgB,CAAC,CAC3DP,mBAAmB,CAAE1E,IAAI,CAACoC,KAAK,CAACrD,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAC,CACtF0C,YAAY,CAAEtI,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAG,CAAC,CAAG5F,QAAQ,CAACK,MAAM,CAAGL,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAG,CAAC,CACrJI,WAAW,CAAE/E,IAAI,CAACoC,KAAK,CAAC2C,WAAW,CAAC,CACpCuC,YAAY,CAAEvI,QAAQ,CAACO,IAAI,CAC3BwF,uBAAuB,CAAE9E,IAAI,CAACoC,KAAK,CAAC0C,uBAAuB,CAAC,CAC5DE,OAAO,CAAEA,OAAO,CAEhB;AACAuC,gBAAgB,CAAEvH,IAAI,CAACoC,KAAK,CAACrD,QAAQ,CAACyI,mBAAmB,CAAC,CAC1DC,aAAa,CAAEzH,IAAI,CAACoC,KAAK,CAACrD,QAAQ,CAACyI,mBAAmB,CAAC,CACvDE,WAAW,CAAE3I,QAAQ,CAAC2I,WAAW,CACjCC,QAAQ,CAAE5I,QAAQ,CAAC2I,WAAW,CAC9BnB,mBAAmB,CAAEvG,IAAI,CAACoC,KAAK,CAACrD,QAAQ,CAACwH,mBAAmB,CAACM,wBAAwB,CAAC,CACtF3B,oBAAoB,CAAElF,IAAI,CAACoC,KAAK,CAAC8C,oBAAoB,CAAC,CACtD0C,iBAAiB,CAAE5H,IAAI,CAACoC,KAAK,CAACrD,QAAQ,CAAC6I,iBAAiB,CAAC,CACzDC,iBAAiB,CAAE9I,QAAQ,CAACkI,SAAS,CAACa,iBAAiB,CAAG,GAAG,CAC7DA,iBAAiB,CAAE/I,QAAQ,CAACkI,SAAS,CAACa,iBAAiB,CAEvD;AACAC,kBAAkB,CAAEhJ,QAAQ,CAACkI,SAAS,CAACe,SAAS,CAEhD;AACA3C,gBAAgB,CAEhB;AACAF,iBAAiB,CAAEpG,QAAQ,CAACoG,iBAAiB,CAC7ClC,iBAAiB,CAAElE,QAAQ,CAACkE,iBAAiB,CAC7CyB,mBAAmB,CAAE3F,QAAQ,CAAC2F,mBAAmB,CACjD6B,mBAAmB,CAAExH,QAAQ,CAACwH,mBAAmB,CACjDU,SAAS,CAAElI,QAAQ,CAACkI,SAAS,CAC7BhC,gBAAgB,CAAElG,QAAQ,CAACkG,gBAAgB,CAC3C2C,iBAAiB,CAAE7I,QAAQ,CAAC6I,iBAAiB,CAC7CJ,mBAAmB,CAAEzI,QAAQ,CAACyI,mBAAmB,CACjDtI,aAAa,CAAEH,QAAQ,CAACG,aAAa,CACrCE,MAAM,CAAEL,QAAQ,CAACK,MAAM,CACvBC,aAAa,CAAEN,QAAQ,CAACM,aAAa,CACrCiG,eAAe,CAAEvG,QAAQ,CAACuG,eAC5B,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,CAAE,CAAC7G,SAAS,CAAErB,cAAc,CAAC,CAAC,CAE/B,KAAM,CAAA6K,yBAAyB,CAAG/M,WAAW,CAAC,CAACgN,SAAS,CAAEC,KAAK,CAAEC,KAAK,GAAK,CACzE/K,iBAAiB,CAACgL,IAAI,GAAK,CACzB,GAAGA,IAAI,CACP,CAACH,SAAS,EAAG,CAAE,GAAGG,IAAI,CAACH,SAAS,CAAC,CAAE,CAACC,KAAK,EAAGC,KAAM,CACpD,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,oBAAoB,CAAGpN,WAAW,CAAC,CAACqN,WAAW,CAAEH,KAAK,GAAK,CAC/D1J,YAAY,CAAC2J,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACE,WAAW,EAAGH,KAAM,CAAC,CAAC,CAAC,CAC3D,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,eAAe,CAAGtN,WAAW,CAAC,IAAM,CACxCmC,iBAAiB,CAAC,CAChBM,aAAa,CAAE,CACbC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,KAAK,CACXC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,sBACf,CAAC,CACDC,WAAW,CAAE,CACXN,MAAM,CAAE,KAAK,CACbC,IAAI,CAAE,IAAI,CACVC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,oDACf,CAAC,CACDE,OAAO,CAAE,CACPP,MAAM,CAAE,CAAC,CACTC,IAAI,CAAE,KAAK,CACXC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,KAAK,CACdC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,oCACf,CAAC,CACDG,eAAe,CAAE,CACfR,MAAM,CAAE,CAAC,CACTC,IAAI,CAAE,IAAI,CACVC,IAAI,CAAE,CAAC,CACPC,OAAO,CAAE,KAAK,CACdC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,4BACf,CAAC,CACDI,oBAAoB,CAAE,CACpBT,MAAM,CAAE,KAAK,CACbU,cAAc,CAAE,IAAI,CACpBP,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,QAAQ,CACdC,WAAW,CAAE,6CACf,CAAC,CACDM,YAAY,CAAE,CACZX,MAAM,CAAE,KAAK,CACbY,eAAe,CAAE,IAAI,CACrBT,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,QAAQ,CACdC,WAAW,CAAE,0BACf,CACF,CAAC,CAAC,CACFS,YAAY,CAACjD,gBAAgB,CAACgD,SAAS,CAAC,CAC1C,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAgK,WAAW,CAAGC,KAAA,EAA2B,IAA1B,CAAEC,OAAO,CAAEC,QAAS,CAAC,CAAAF,KAAA,CACxC,KAAM,CAACG,WAAW,CAAEC,cAAc,CAAC,CAAG/N,QAAQ,CAAC,KAAK,CAAC,CAErD,mBACEmC,KAAA,QAAK6L,SAAS,CAAC,uBAAuB,CAAAH,QAAA,eACpC1L,KAAA,QACE6L,SAAS,CAAC,4CAA4C,CACtDC,YAAY,CAAEA,CAAA,GAAMF,cAAc,CAAC,IAAI,CAAE,CACzCG,YAAY,CAAEA,CAAA,GAAMH,cAAc,CAAC,KAAK,CAAE,CAAAF,QAAA,EAEzCA,QAAQ,CACR,CAACA,QAAQ,eAAI5L,IAAA,CAAC3B,IAAI,EAAC0N,SAAS,CAAC,2CAA2C,CAAE,CAAC,EACzE,CAAC,CACLF,WAAW,eACV3L,KAAA,QAAK6L,SAAS,CAAC,wIAAwI,CAAAH,QAAA,eACrJ5L,IAAA,QAAK+L,SAAS,CAAC,kBAAkB,CAAAH,QAAA,CAAC,cAAY,CAAK,CAAC,cACpD5L,IAAA,QAAK+L,SAAS,CAAC,qCAAqC,CAAAH,QAAA,CAAED,OAAO,CAAM,CAAC,cACpE3L,IAAA,QAAK+L,SAAS,CAAC,wIAAwI,CAAM,CAAC,EAC3J,CACN,EACE,CAAC,CAEV,CAAC,CAED,KAAM,CAAAG,cAAc,CAAItL,MAAM,EAAK,CACjC,MAAO,IAAI,CAAAuL,IAAI,CAACC,YAAY,CAAC,OAAO,CAAE,CACpCC,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,KAAK,CACfC,qBAAqB,CAAE,CAAC,CACxBC,qBAAqB,CAAE,CACzB,CAAC,CAAC,CAACC,MAAM,CAAC7L,MAAM,CAAC,CACnB,CAAC,CAID;AACA,KAAM,CAAA8L,eAAe,CAAGxO,WAAW,CAAC,IAAM,CACxC,KAAM,CAAAyO,YAAY,CAAG,CACnBzK,aAAa,CAAE,OAAO,CACtBqC,eAAe,CAAE,EAAE,CACnBC,iBAAiB,CAAE,CAAC,CACpBO,aAAa,CAAE,OAAO,CACtBD,qBAAqB,CAAE,MAAM,CAC7BvD,YAAY,CAAE,MAAM,CACpBF,oBAAoB,CAAE,MACxB,CAAC,CAED,KAAM,CAAAuL,MAAM,CAAGtN,kBAAkB,CAACqN,YAAY,CAAC,CAE/C;AACA,KAAM,CAAEA,YAAY,CAAEE,IAAI,CAAEC,cAAe,CAAC,CAAGF,MAAM,CAErD,MAAO,CAAAA,MAAM,CACf,CAAC,CAAE,EAAE,CAAC,CAEN;AACA5O,SAAS,CAAC,IAAM,CACd0O,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,CAACA,eAAe,CAAC,CAAC,CAErB,mBACExM,KAAA,QAAK6L,SAAS,CAAC,4BAA4B,CAAAH,QAAA,eAEzC5L,IAAA,WAAQ+L,SAAS,CAAC,+DAA+D,CAAAH,QAAA,cAC/E5L,IAAA,QAAK+L,SAAS,CAAC,aAAa,CAAAH,QAAA,cAC1B1L,KAAA,QAAK6L,SAAS,CAAC,wCAAwC,CAAAH,QAAA,eACrD1L,KAAA,QAAA0L,QAAA,eACE5L,IAAA,OAAI+L,SAAS,CAAC,kCAAkC,CAAAH,QAAA,CAAC,iCAA+B,CAAI,CAAC,cACrF5L,IAAA,MAAG+L,SAAS,CAAC,4BAA4B,CAAAH,QAAA,CAAC,uDAAqD,CAAG,CAAC,EAChG,CAAC,cACN1L,KAAA,QAAK6L,SAAS,CAAC,yBAAyB,CAAAH,QAAA,eACtC1L,KAAA,WACE6M,OAAO,CAAEvB,eAAgB,CACzBO,SAAS,CAAC,qLAAqL,CAAAH,QAAA,eAE/L5L,IAAA,CAAC5B,QAAQ,EAAC2N,SAAS,CAAC,SAAS,CAAE,CAAC,QAElC,EAAQ,CAAC,cACT7L,KAAA,WAAQ6L,SAAS,CAAC,+JAA+J,CAAAH,QAAA,eAC/K5L,IAAA,CAAC7B,QAAQ,EAAC4N,SAAS,CAAC,SAAS,CAAE,CAAC,SAElC,EAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACA,CAAC,cAGT7L,KAAA,QAAK6L,SAAS,CAAC,eAAe,CAAAH,QAAA,eAE5B1L,KAAA,QAAK6L,SAAS,CAAC,sCAAsC,CAAAH,QAAA,eAEnD1L,KAAA,QAAK6L,SAAS,CAAC,MAAM,CAAAH,QAAA,eACnB5L,IAAA,QAAK+L,SAAS,CAAC,MAAM,CAAAH,QAAA,cACnB5L,IAAA,OAAI+L,SAAS,CAAC,iCAAiC,CAAAH,QAAA,CAAC,+BAA6B,CAAI,CAAC,CAC/E,CAAC,cACN5L,IAAA,QAAK+L,SAAS,CAAC,wBAAwB,CAAAH,QAAA,CACpCpI,MAAM,CAACC,OAAO,CAACrD,cAAc,CAAC,CAAC4I,MAAM,CAACgE,KAAA,MAAC,CAACpJ,GAAG,CAAEC,MAAM,CAAC,CAAAmJ,KAAA,OAAK,CAAApJ,GAAG,GAAK,SAAS,EAAIA,GAAG,GAAK,iBAAiB,GAAC,CAACO,GAAG,CAAC8I,KAAA,MAAC,CAACrJ,GAAG,CAAEC,MAAM,CAAC,CAAAoJ,KAAA,oBAC1H/M,KAAA,QAAe6L,SAAS,CAAC,UAAU,CAAAH,QAAA,eACjC5L,IAAA,QAAK+L,SAAS,CAAC,MAAM,CAAAH,QAAA,cACnB1L,KAAA,QAAK6L,SAAS,CAAC,yBAAyB,CAAAH,QAAA,eACtC5L,IAAA,OAAI+L,SAAS,CAAC,qCAAqC,CAAAH,QAAA,CAChDhI,GAAG,GAAK,aAAa,CAAG,aAAa,CACrCA,GAAG,GAAK,SAAS,CAAG,UAAU,CAC9BA,GAAG,GAAK,cAAc,CAAG,eAAe,CACxCA,GAAG,GAAK,sBAAsB,CAAG,uBAAuB,CACxDA,GAAG,GAAK,eAAe,CAAG,gBAAgB,CAC1CA,GAAG,CAACsJ,OAAO,CAAC,UAAU,CAAE,KAAK,CAAC,CAACC,IAAI,CAAC,CAAC,CACpC,CAAC,cACLnN,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAE9H,MAAM,CAAC5C,WAAY,CAAA2K,QAAA,cACvC5L,IAAA,CAAC3B,IAAI,EAAC0N,SAAS,CAAC,2CAA2C,CAAE,CAAC,CACnD,CAAC,EACX,CAAC,CACH,CAAC,cAEN7L,KAAA,QAAK6L,SAAS,CAAC,WAAW,CAAAH,QAAA,eAExB5L,IAAA,QAAK+L,SAAS,CAAC,mCAAmC,CAAAH,QAAA,cAChD1L,KAAA,QAAA0L,QAAA,eACE5L,IAAA,SAAM+L,SAAS,CAAC,mCAAmC,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,cACpE5L,IAAA,SAAM+L,SAAS,CAAC,qCAAqC,CAAAH,QAAA,CAClDM,cAAc,CAACrI,MAAM,CAACjD,MAAM,CAAC,CAC1B,CAAC,EACJ,CAAC,CACH,CAAC,cAENZ,IAAA,QAAA4L,QAAA,cACE5L,IAAA,CAACzB,YAAY,EACX6M,KAAK,CAAEvH,MAAM,CAACjD,MAAO,CACrBwM,QAAQ,CAAGhC,KAAK,EAAKH,yBAAyB,CAACrH,GAAG,CAAE,QAAQ,CAAEwH,KAAK,CAAE,CACrEiC,GAAG,CAAE,CAAE,CACPzI,GAAG,CAAEhB,GAAG,GAAK,eAAe,EAAIA,GAAG,GAAK,aAAa,CAAG,MAAM,CACzDA,GAAG,GAAK,sBAAsB,EAAIA,GAAG,GAAK,cAAc,CAAG,MAAM,CAAG,OAAQ,CACjF0J,IAAI,CAAE,KAAM,CACZC,IAAI,CAAC,GAAG,CACRC,KAAK,CAAC,MAAM,CACZ3B,WAAW,CAAE,KAAM,CACpB,CAAC,CACC,CAAC,CAELhI,MAAM,CAAC7C,IAAI,GAAK,MAAM,eACrBd,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C1L,KAAA,QAAK6L,SAAS,CAAC,eAAe,CAAAH,QAAA,EAAC,QAAM,CAAC,CAAC/H,MAAM,CAAChD,IAAI,CAAG,GAAG,EAAE4M,OAAO,CAAC,CAAC,CAAC,CAAC,eAAa,CAAC7J,GAAG,GAAK,aAAa,CAAG,CAACC,MAAM,CAAChD,IAAI,CAAG,GAAG,EAAE4M,OAAO,CAAC,CAAC,CAAC,CAAG,CAAC5J,MAAM,CAAChD,IAAI,CAAG,IAAI,CAAG,GAAG,EAAE4M,OAAO,CAAC,CAAC,CAAC,CAAC,IAAE,EAAK,CAAC,cAC1LvN,KAAA,QAAK6L,SAAS,CAAC,eAAe,CAAAH,QAAA,EAAC,QAAM,CAAC/H,MAAM,CAAC/C,IAAI,CAAC,QAAM,EAAK,CAAC,EAC3D,CACN,EAGE,CAAC,GAlDE8C,GAmDL,CAAC,EACP,CAAC,CACC,CAAC,EAGH,CAAC,cAGN1D,KAAA,QAAK6L,SAAS,CAAC,MAAM,CAAAH,QAAA,eACnB5L,IAAA,OAAI+L,SAAS,CAAC,sCAAsC,CAAAH,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC3E5L,IAAA,QAAK+L,SAAS,CAAC,wBAAwB,CAAAH,QAAA,CACpCpI,MAAM,CAACC,OAAO,CAACjF,SAAS,CAAC,CAAC2F,GAAG,CAACuJ,KAAA,MAAC,CAAC9J,GAAG,CAAE+J,QAAQ,CAAC,CAAAD,KAAA,oBAC7C1N,IAAA,CAAC1B,YAAY,EAEXiN,WAAW,CAAE3H,GAAI,CACjB+J,QAAQ,CAAEA,QAAS,CACnBvC,KAAK,CAAE3J,SAAS,CAACmC,GAAG,CAAE,CACtBgK,aAAa,CAAGxC,KAAK,EAAKE,oBAAoB,CAAC1H,GAAG,CAAEwH,KAAK,CAAE,EAJtDxH,GAKN,CAAC,EACH,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,cAGN1D,KAAA,QAAK6L,SAAS,CAAC,oCAAoC,CAAAH,QAAA,eAGjD1L,KAAA,QAAK6L,SAAS,CAAC,wCAAwC,CAAAH,QAAA,eACrD5L,IAAA,OAAI+L,SAAS,CAAC,4BAA4B,CAAAH,QAAA,CAAC,qBAAmB,CAAI,CAAC,cACnE5L,IAAA,QAAK+L,SAAS,CAAC,2BAA2B,CAAAH,QAAA,CACvC7H,aAAa,CAACI,GAAG,CAAC,CAACpC,QAAQ,CAAE2D,KAAK,GAAK,CACtC,mBACExF,KAAA,QAAiB6L,SAAS,CAAC,oCAAoC,CAAAH,QAAA,eAC7D1L,KAAA,QAAK6L,SAAS,CAAC,kBAAkB,CAAAH,QAAA,eAC/B5L,IAAA,OAAI+L,SAAS,CAAC,uBAAuB,CAAAH,QAAA,CAAC,wBAAsB,CAAI,CAAC,cACjE5L,IAAA,MAAG+L,SAAS,CAAC,iCAAiC,CAAAH,QAAA,CAAEM,cAAc,CAACnK,QAAQ,CAACG,aAAa,CAAC,CAAI,CAAC,EACxF,CAAC,cAENhC,KAAA,QAAK6L,SAAS,CAAC,WAAW,CAAAH,QAAA,eACxB1L,KAAA,QAAK6L,SAAS,CAAC,sDAAsD,CAAAH,QAAA,eACnE5L,IAAA,QAAK+L,SAAS,CAAC,oBAAoB,CAAAH,QAAA,cACjC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,6IAA+H,CAAAC,QAAA,cAClJ5L,IAAA,SAAM+L,SAAS,CAAC,qCAAqC,CAAAH,QAAA,CAAC,gBAAc,CAAM,CAAC,CAChE,CAAC,CACX,CAAC,cACN5L,IAAA,MAAG+L,SAAS,CAAC,+CAA+C,CAAAH,QAAA,CACzDM,cAAc,CAACnK,QAAQ,CAACM,aAAa,CAAC,CACtC,CAAC,EACD,CAAC,cAENnC,KAAA,QAAK6L,SAAS,CAAC,sDAAsD,CAAAH,QAAA,eACnE5L,IAAA,QAAK+L,SAAS,CAAC,oBAAoB,CAAAH,QAAA,cACjC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,uNAA6M,CAAAC,QAAA,cAChO5L,IAAA,SAAM+L,SAAS,CAAC,qCAAqC,CAAAH,QAAA,CAAC,kBAAgB,CAAM,CAAC,CAClE,CAAC,CACX,CAAC,cACN5L,IAAA,MAAG+L,SAAS,CAAC,+CAA+C,CAAAH,QAAA,CACzDM,cAAc,CAACnK,QAAQ,CAAC8C,cAAc,CAAC,CACvC,CAAC,EACD,CAAC,cAEN3E,KAAA,QAAK6L,SAAS,CAAC,kDAAkD,CAAAH,QAAA,eAC/D5L,IAAA,QAAK+L,SAAS,CAAC,oBAAoB,CAAAH,QAAA,cACjC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,mRAA6P,CAAAC,QAAA,cAChR5L,IAAA,SAAM+L,SAAS,CAAC,mCAAmC,CAAAH,QAAA,CAAC,qBAAmB,CAAM,CAAC,CACnE,CAAC,CACX,CAAC,cACN5L,IAAA,MAAG+L,SAAS,CAAC,6CAA6C,CAAAH,QAAA,CACvDM,cAAc,CAACnK,QAAQ,CAACQ,iBAAiB,CAAC,CAC1C,CAAC,EACD,CAAC,cAENrC,KAAA,QAAK6L,SAAS,CAAC,sDAAsD,CAAAH,QAAA,eACnE5L,IAAA,QAAK+L,SAAS,CAAC,oBAAoB,CAAAH,QAAA,cACjC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,ySAA8Q,CAAAC,QAAA,cACjS5L,IAAA,SAAM+L,SAAS,CAAC,qCAAqC,CAAAH,QAAA,CAAC,gBAAc,CAAM,CAAC,CAChE,CAAC,CACX,CAAC,cACN5L,IAAA,MAAG+L,SAAS,CAAC,+CAA+C,CAAAH,QAAA,CACzDM,cAAc,CAACnK,QAAQ,CAACsD,aAAa,CAAC,CACtC,CAAC,EACD,CAAC,cAENnF,KAAA,QAAK6L,SAAS,CAAE,yBACdhK,QAAQ,CAACuD,kBAAkB,EAAI,CAAC,CAAG,8BAA8B,CAAG,0BAA0B,EAC7F,CAAAsG,QAAA,eACD5L,IAAA,QAAK+L,SAAS,CAAC,oBAAoB,CAAAH,QAAA,cACjC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,sSAAiS,CAAAC,QAAA,cACpT5L,IAAA,SAAM+L,SAAS,CAAE,uBAAuBhK,QAAQ,CAACuD,kBAAkB,EAAI,CAAC,CAAG,gBAAgB,CAAG,cAAc,EAAG,CAAAsG,QAAA,CAAC,sBAEhH,CAAM,CAAC,CACI,CAAC,CACX,CAAC,cACN5L,IAAA,MAAG+L,SAAS,CAAE,iCAAiChK,QAAQ,CAACuD,kBAAkB,EAAI,CAAC,CAAG,gBAAgB,CAAG,cAAc,EAAG,CAAAsG,QAAA,CACnHM,cAAc,CAACnK,QAAQ,CAACuD,kBAAkB,CAAC,CAC3C,CAAC,EACD,CAAC,EACH,CAAC,GAjEEI,KAkEL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,EACH,CAAC,cAGNxF,KAAA,QAAK6L,SAAS,CAAC,wCAAwC,CAAAH,QAAA,eACrD5L,IAAA,OAAI+L,SAAS,CAAC,4BAA4B,CAAAH,QAAA,CAAC,4BAA0B,CAAI,CAAC,cAC1E5L,IAAA,QAAK+L,SAAS,CAAC,2BAA2B,CAAAH,QAAA,CACvCrG,UAAU,CAACpB,GAAG,CAAC,CAACpC,QAAQ,CAAE2D,KAAK,QAAAmI,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,uBAAA,oBAC9B1O,IAAA,QAAiB+L,SAAS,CAAC,oCAAoC,CAAAH,QAAA,cAC7D1L,KAAA,QAAK6L,SAAS,CAAC,WAAW,CAAAH,QAAA,eAGxB1L,KAAA,QAAA0L,QAAA,eACE5L,IAAA,OAAI+L,SAAS,CAAC,sCAAsC,CAAAH,QAAA,CAAC,oBAAkB,CAAI,CAAC,cAC5E1L,KAAA,QAAK6L,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChC1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,iBAAe,CAAM,CAAC,cAC5B5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAC,EAAA2B,qBAAA,CAAA9L,QAAQ,CAACoG,iBAAiB,UAAA0F,qBAAA,kBAAAC,sBAAA,CAA1BD,qBAAA,CAA4BzF,UAAU,UAAA0F,sBAAA,iBAAtCA,sBAAA,CAAwCnN,aAAa,GAAI,CAAC,CAAC,CAAO,CAAC,EAC9G,CAAC,cACNT,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,gBAAc,CAAM,CAAC,cAC3B5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAC,EAAA6B,sBAAA,CAAAhM,QAAQ,CAACoG,iBAAiB,UAAA4F,sBAAA,kBAAAC,sBAAA,CAA1BD,sBAAA,CAA4B3F,UAAU,UAAA4F,sBAAA,iBAAtCA,sBAAA,CAAwCzM,YAAY,GAAI,CAAC,CAAC,CAAO,CAAC,EAC7G,CAAC,cACNrB,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,wBAAsB,CAAM,CAAC,cACnC5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAC,EAAA+B,sBAAA,CAAAlM,QAAQ,CAACoG,iBAAiB,UAAA8F,sBAAA,kBAAAC,sBAAA,CAA1BD,sBAAA,CAA4B7F,UAAU,UAAA8F,sBAAA,iBAAtCA,sBAAA,CAAwC7M,oBAAoB,GAAI,CAAC,CAAC,CAAO,CAAC,EACrH,CAAC,cACNnB,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,mBAAiB,CAAM,CAAC,cAC9B5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAC,EAAAiC,sBAAA,CAAApM,QAAQ,CAACoG,iBAAiB,UAAAgG,sBAAA,kBAAAC,sBAAA,CAA1BD,sBAAA,CAA4B/F,UAAU,UAAAgG,sBAAA,iBAAtCA,sBAAA,CAAwChN,eAAe,GAAI,CAAC,CAAC,CAAO,CAAC,EAChH,CAAC,cACNlB,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,cAAY,CAAM,CAAC,cACzB5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAC,EAAAmC,sBAAA,CAAAtM,QAAQ,CAACoG,iBAAiB,UAAAkG,sBAAA,kBAAAC,sBAAA,CAA1BD,sBAAA,CAA4BjG,UAAU,UAAAkG,sBAAA,iBAAtCA,sBAAA,CAAwCpN,WAAW,GAAI,CAAC,CAAC,CAAO,CAAC,EAC5G,CAAC,cACNhB,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,WAAS,CAAM,CAAC,cACtB5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAC,EAAAqC,sBAAA,CAAAxM,QAAQ,CAACoG,iBAAiB,UAAAoG,sBAAA,kBAAAC,uBAAA,CAA1BD,sBAAA,CAA4BnG,UAAU,UAAAoG,uBAAA,iBAAtCA,uBAAA,CAAwCrN,OAAO,GAAI,CAAC,CAAC,CAAO,CAAC,EACxG,CAAC,cACNjB,KAAA,QAAK6L,SAAS,CAAC,oBAAoB,CAAAH,QAAA,eACjC1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,sBAAoB,CAAM,CAAC,cACjC5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAACnK,QAAQ,CAACQ,iBAAiB,EAAI,CAAC,CAAC,CAAO,CAAC,EACnF,CAAC,cACNrC,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,kBAAgB,CAAM,CAAC,cAC7B5L,IAAA,SAAA4L,QAAA,CAAOM,cAAc,CAAC,EAAAuC,uBAAA,CAAA1M,QAAQ,CAACoG,iBAAiB,UAAAsG,uBAAA,iBAA1BA,uBAAA,CAA4B9E,cAAc,GAAI,CAAC,CAAC,CAAO,CAAC,EAC3E,CAAC,CACL,EAAA+E,uBAAA,CAAA3M,QAAQ,CAACoG,iBAAiB,UAAAuG,uBAAA,iBAA1BA,uBAAA,CAA4BC,cAAc,EAAG,CAAC,eAC7CzO,KAAA,QAAK6L,SAAS,CAAC,mCAAmC,CAAAH,QAAA,eAChD5L,IAAA,SAAA4L,QAAA,CAAM,cAAY,CAAM,CAAC,cACzB5L,IAAA,SAAA4L,QAAA,CAAOM,cAAc,CAACnK,QAAQ,CAACoG,iBAAiB,CAACwG,cAAc,CAAC,CAAO,CAAC,EACrE,CACN,EACE,CAAC,EACH,CAAC,EACH,CAAC,cAENzO,KAAA,QAAA0L,QAAA,eACE5L,IAAA,OAAI+L,SAAS,CAAC,sCAAsC,CAAAH,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC3E1L,KAAA,QAAK6L,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChC1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,kTAA6Q,CAAAC,QAAA,cAChS5L,IAAA,SAAA4L,QAAA,CAAM,OAAK,CAAM,CAAC,CACP,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAC,aAAa,CAAAH,QAAA,EAAE,CAAC7J,QAAQ,CAACO,IAAI,EAAI,CAAC,EAAEmL,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAM,CAAC,EACpE,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,yLAAsK,CAAAC,QAAA,cACzL5L,IAAA,SAAA4L,QAAA,CAAM,qBAAmB,CAAM,CAAC,CACrB,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAC,aAAa,CAAAH,QAAA,EAAE,CAAC7J,QAAQ,CAACoI,qBAAqB,EAAI,CAAC,EAAEsD,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAM,CAAC,EACrF,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,oFAAoF,CAAAC,QAAA,cACvG5L,IAAA,SAAA4L,QAAA,CAAM,iBAAe,CAAM,CAAC,CACjB,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAC,aAAa,CAAAH,QAAA,EAAE,CAAC,CAAC7J,QAAQ,CAACiI,mBAAmB,EAAI,CAAC,EAAI,GAAG,EAAEyD,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAM,CAAC,EAC3F,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,qBAAmB,CAAM,CAAC,cAChC1L,KAAA,SAAM6L,SAAS,CAAC,aAAa,CAAAH,QAAA,EAAE,CAAC,CAAC7J,QAAQ,CAAC+I,iBAAiB,EAAI,CAAC,EAAI,GAAG,EAAE2C,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAM,CAAC,EACzF,CAAC,cACNzN,IAAA,QAAK+L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,CAAC,sJAEhD,CAAK,CAAC,cACN1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,6FAA6F,CAAAC,QAAA,cAChH5L,IAAA,SAAA4L,QAAA,CAAM,gCAA8B,CAAM,CAAC,CAChC,CAAC,cACd5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAEnK,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAG,EAAG,CAAC,CAAO,CAAC,EAChH,CAAC,cACNzH,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,mGAAmG,CAAAC,QAAA,cACtH5L,IAAA,SAAA4L,QAAA,CAAM,gCAA8B,CAAM,CAAC,CAChC,CAAC,cACd5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAAEnK,QAAQ,CAACwH,mBAAmB,CAACM,wBAAwB,CAAG,EAAG,CAAC,CAAO,CAAC,EAChH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,EA5FEnE,KA6FL,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,cAGNxF,KAAA,QAAK6L,SAAS,CAAC,wCAAwC,CAAAH,QAAA,eACrD5L,IAAA,OAAI+L,SAAS,CAAC,4BAA4B,CAAAH,QAAA,CAAC,yBAAuB,CAAI,CAAC,cACvE5L,IAAA,QAAK+L,SAAS,CAAC,2BAA2B,CAAAH,QAAA,CACvCrG,UAAU,CAACpB,GAAG,CAAC,CAACpC,QAAQ,CAAE2D,KAAK,gBAC9B1F,IAAA,QAAiB+L,SAAS,CAAC,oCAAoC,CAAAH,QAAA,cAC7D1L,KAAA,QAAK6L,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChC1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,mBAAiB,CAAM,CAAC,cAC9B5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAACnK,QAAQ,CAACG,aAAa,CAAC,CAAO,CAAC,EAC1E,CAAC,cACNhC,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,kBAAgB,CAAM,CAAC,cAC7B5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAACnK,QAAQ,CAACK,MAAM,CAAC,CAAO,CAAC,EACnE,CAAC,cACNlC,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,6IAA2I,CAAAC,QAAA,cAC9J5L,IAAA,SAAA4L,QAAA,CAAM,wBAAsB,CAAM,CAAC,CACxB,CAAC,cACd5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAACnK,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAC,CAAO,CAAC,EACzG,CAAC,cACNzH,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,0BAAwB,CAAM,CAAC,cACrC5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAEM,cAAc,CAACnK,QAAQ,CAACqI,oBAAoB,CAAC,CAAO,CAAC,EACjF,CAAC,cACNlK,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,2IAAmI,CAAAC,QAAA,cACtJ5L,IAAA,SAAA4L,QAAA,CAAM,uBAAqB,CAAM,CAAC,CACvB,CAAC,cACd5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAC1BM,cAAc,CAACnK,QAAQ,CAACgG,WAAW,CAAC,CACjC,CAAC,EACJ,CAAC,cACN7H,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,oEAAoE,CAAAC,QAAA,cACvF5L,IAAA,SAAA4L,QAAA,CAAM,gBAAc,CAAM,CAAC,CAChB,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAE,eAAehK,QAAQ,CAACsI,YAAY,CAAG,IAAI,CAAG,cAAc,CAAGtI,QAAQ,CAACsI,YAAY,CAAG,GAAG,CAAG,iBAAiB,CAAGtI,QAAQ,CAACsI,YAAY,CAAG,GAAG,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAAuB,QAAA,EAClM,CAAC7J,QAAQ,CAACsI,YAAY,EAAI,CAAC,EAAEoD,OAAO,CAAC,CAAC,CAAC,CAAC,GAC3C,EAAM,CAAC,EACJ,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,8EAChD,EAAK,CAAC,cACN1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,yKAAqK,CAAAC,QAAA,cACxL5L,IAAA,SAAA4L,QAAA,CAAM,eAAa,CAAM,CAAC,CACf,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAE,eAAiBhK,QAAQ,CAACqI,oBAAoB,CAAGrI,QAAQ,CAAC+F,uBAAuB,CAAI,GAAG,CAAI,CAAC,CAAG,cAAc,CAAK/F,QAAQ,CAACqI,oBAAoB,CAAGrI,QAAQ,CAAC+F,uBAAuB,CAAI,GAAG,CAAI,CAAC,CAAG,iBAAiB,CAAK/F,QAAQ,CAACqI,oBAAoB,CAAGrI,QAAQ,CAAC+F,uBAAuB,CAAI,GAAG,CAAI,EAAE,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAA8D,QAAA,EAC3V,CAAE7J,QAAQ,CAACqI,oBAAoB,CAAGrI,QAAQ,CAAC+F,uBAAuB,CAAI,GAAG,EAAE2F,OAAO,CAAC,CAAC,CAAC,CAAC,GACzF,EAAM,CAAC,EACJ,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,kEAChD,EAAK,CAAC,cACN1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,wDAAqD,CAAAC,QAAA,cACxE5L,IAAA,SAAA4L,QAAA,CAAM,uBAAqB,CAAM,CAAC,CACvB,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAE,eAAgB,CAAChK,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAGY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,EAAIW,QAAQ,CAACK,MAAM,CAAI,GAAG,CAAG,cAAc,CAAI,CAACL,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAGY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,EAAIW,QAAQ,CAACK,MAAM,CAAI,GAAG,CAAG,iBAAiB,CAAI,CAACL,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAGY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,EAAIW,QAAQ,CAACK,MAAM,CAAI,GAAG,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAAwJ,QAAA,EACnf,CAAC,CAAC7J,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAGY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,EAAIW,QAAQ,CAACK,MAAM,EAAEqL,OAAO,CAAC,CAAC,CAAC,CAAC,GAC1I,EAAM,CAAC,EACJ,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,4EAChD,EAAK,CAAC,cACN1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,yDAAsD,CAAAC,QAAA,cACzE5L,IAAA,SAAA4L,QAAA,CAAM,0BAAwB,CAAM,CAAC,CAC1B,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAE,eAAgBhK,QAAQ,CAACK,MAAM,EAAKL,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAG,KAAK,CAAKY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,CAAG,IAAK,CAAC,CAAI,GAAG,CAAG,cAAc,CAAIW,QAAQ,CAACK,MAAM,EAAKL,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAG,KAAK,CAAKY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,CAAG,IAAK,CAAC,CAAI,GAAG,CAAG,iBAAiB,CAAIW,QAAQ,CAACK,MAAM,EAAKL,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAG,KAAK,CAAKY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,CAAG,IAAK,CAAC,CAAI,GAAG,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAAwK,QAAA,EAC5iB,CAAC7J,QAAQ,CAACK,MAAM,EAAKL,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAACjH,OAAO,CAAG,KAAK,CAAKY,QAAQ,CAACoG,iBAAiB,CAACC,UAAU,CAAChH,eAAe,CAAG,IAAK,CAAC,EAAEqM,OAAO,CAAC,CAAC,CAAC,CAAC,GAC7J,EAAM,CAAC,EACJ,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,4EAChD,EAAK,CAAC,EAEH,CAAC,EAzEElG,KA0EL,CACN,CAAC,CACC,CAAC,EACH,CAAC,cAGNxF,KAAA,QAAK6L,SAAS,CAAC,wCAAwC,CAAAH,QAAA,eACrD5L,IAAA,OAAI+L,SAAS,CAAC,4BAA4B,CAAAH,QAAA,CAAC,6BAA2B,CAAI,CAAC,cAC3E5L,IAAA,QAAK+L,SAAS,CAAC,2BAA2B,CAAAH,QAAA,CACvCrG,UAAU,CAACpB,GAAG,CAAC,CAACpC,QAAQ,CAAE2D,KAAK,gBAC9B1F,IAAA,QAAiB+L,SAAS,CAAC,oCAAoC,CAAAH,QAAA,cAC7D1L,KAAA,QAAK6L,SAAS,CAAC,2BAA2B,CAAAH,QAAA,eAExC1L,KAAA,QAAK6L,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChC5L,IAAA,OAAI+L,SAAS,CAAC,sCAAsC,CAAAH,QAAA,CAAC,gBAAc,CAAI,CAAC,cACxE1L,KAAA,QAAK6L,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChC1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,iBAAe,CAAM,CAAC,cAC5B5L,IAAA,SAAA4L,QAAA,CAAOM,cAAc,CAACnK,QAAQ,CAACG,aAAa,CAAC,CAAO,CAAC,EAClD,CAAC,cACNhC,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,kBAAgB,CAAM,CAAC,cAC7B1L,KAAA,SAAA0L,QAAA,EAAM,GAAC,CAACM,cAAc,CAACnK,QAAQ,CAACG,aAAa,CAAGH,QAAQ,CAACK,MAAM,CAAC,EAAO,CAAC,EACrE,CAAC,cACNlC,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,wBAAsB,CAAM,CAAC,cACnC1L,KAAA,SAAA0L,QAAA,EAAM,GAAC,CAACM,cAAc,CAACnK,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAC,EAAO,CAAC,EAClF,CAAC,cACNzH,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,mBAAiB,CAAM,CAAC,cAC9B1L,KAAA,SAAA0L,QAAA,EAAM,GAAC,CAACM,cAAc,CAACzK,SAAS,CAACyE,gBAAgB,CAAC,EAAO,CAAC,EACvD,CAAC,cACNhG,KAAA,QAAK6L,SAAS,CAAC,gDAAgD,CAAAH,QAAA,eAC7D5L,IAAA,SAAA4L,QAAA,CAAM,oBAAkB,CAAM,CAAC,cAC/B5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAC1BM,cAAc,CAACnK,QAAQ,CAACqI,oBAAoB,CAAC,CAC1C,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,cAGNlK,KAAA,QAAK6L,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChC5L,IAAA,OAAI+L,SAAS,CAAC,sCAAsC,CAAAH,QAAA,CAAC,gBAAc,CAAI,CAAC,cACxE1L,KAAA,QAAK6L,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChC1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,sBAAoB,CAAM,CAAC,cACjC1L,KAAA,SAAA0L,QAAA,EAAM,GAAC,CAACM,cAAc,CAACnK,QAAQ,CAACmG,oBAAoB,CAAC,EAAO,CAAC,EAC1D,CAAC,cACNhI,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,wBAAsB,CAAM,CAAC,cACnC1L,KAAA,SAAA0L,QAAA,EAAM,GAAC,CAACM,cAAc,CAACnK,QAAQ,CAAC6I,iBAAiB,CAAC,EAAO,CAAC,EACvD,CAAC,cACN1K,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,SAAA4L,QAAA,CAAM,wBAAsB,CAAM,CAAC,cACnC1L,KAAA,SAAA0L,QAAA,EAAM,GAAC,CAACM,cAAc,CAACnK,QAAQ,CAACwH,mBAAmB,CAACM,wBAAwB,CAAC,EAAO,CAAC,EAClF,CAAC,cACN3J,KAAA,QAAK6L,SAAS,CAAC,gDAAgD,CAAAH,QAAA,eAC7D5L,IAAA,SAAA4L,QAAA,CAAM,uBAAqB,CAAM,CAAC,cAClC5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAC1BM,cAAc,CAACnK,QAAQ,CAACwI,gBAAgB,CAAC,CACtC,CAAC,EACJ,CAAC,cACNrK,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,oJAA6I,CAAAC,QAAA,cAChK5L,IAAA,SAAA4L,QAAA,CAAM,WAAS,CAAM,CAAC,CACX,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAE,eAAehK,QAAQ,CAAC2I,WAAW,CAAG,CAAC,CAAG,cAAc,CAAG3I,QAAQ,CAAC2I,WAAW,CAAG,EAAE,CAAG,iBAAiB,CAAG3I,QAAQ,CAAC2I,WAAW,CAAG,EAAE,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAAkB,QAAA,EAC1L7J,QAAQ,CAAC2I,WAAW,CAAC+C,OAAO,CAAC,CAAC,CAAC,CAAC,GACnC,EAAM,CAAC,EACJ,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,oEAChD,EAAK,CAAC,cACN1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,gEAA6D,CAAAC,QAAA,cAChF5L,IAAA,SAAA4L,QAAA,CAAM,sBAAoB,CAAM,CAAC,CACtB,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAE,eAAgBhK,QAAQ,CAACwI,gBAAgB,CAAGxI,QAAQ,CAACmG,oBAAoB,CAAG,GAAG,CAAI,CAAC,CAAG,cAAc,CAAInG,QAAQ,CAACwI,gBAAgB,CAAGxI,QAAQ,CAACmG,oBAAoB,CAAG,GAAG,CAAI,EAAE,CAAG,iBAAiB,CAAInG,QAAQ,CAACwI,gBAAgB,CAAGxI,QAAQ,CAACmG,oBAAoB,CAAG,GAAG,CAAI,EAAE,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAA0D,QAAA,EACjU,CAAC7J,QAAQ,CAACwI,gBAAgB,CAAGxI,QAAQ,CAACmG,oBAAoB,CAAG,GAAG,EAAEuF,OAAO,CAAC,CAAC,CAAC,CAAC,GAChF,EAAM,CAAC,EACJ,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,oEAChD,EAAK,CAAC,cACN1L,KAAA,QAAK6L,SAAS,CAAC,sBAAsB,CAAAH,QAAA,eACnC5L,IAAA,CAACyL,WAAW,EAACE,OAAO,CAAC,kEAA+D,CAAAC,QAAA,cAClF5L,IAAA,SAAA4L,QAAA,CAAM,iBAAe,CAAM,CAAC,CACjB,CAAC,cACd1L,KAAA,SAAM6L,SAAS,CAAE,eAAgBhK,QAAQ,CAACmG,oBAAoB,CAAGnG,QAAQ,CAACwI,gBAAgB,CAAI,CAAC,CAAG,cAAc,CAAIxI,QAAQ,CAACmG,oBAAoB,CAAGnG,QAAQ,CAACwI,gBAAgB,CAAI,CAAC,CAAG,iBAAiB,CAAIxI,QAAQ,CAACmG,oBAAoB,CAAGnG,QAAQ,CAACwI,gBAAgB,CAAI,CAAC,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAAqB,QAAA,EAC7S,CAAC7J,QAAQ,CAACmG,oBAAoB,CAAGnG,QAAQ,CAACwI,gBAAgB,EAAEkD,OAAO,CAAC,CAAC,CAAC,CAAC,QAC1E,EAAM,CAAC,EACJ,CAAC,cACNvN,KAAA,QAAK6L,SAAS,CAAC,gCAAgC,CAAAH,QAAA,eAC7C5L,IAAA,SAAM+L,SAAS,CAAC,aAAa,CAAAH,QAAA,CAAC,WAAS,CAAM,CAAC,oFAChD,EAAK,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,EAxFElG,KAyFL,CACN,CAAC,CACC,CAAC,EACH,CAAC,cAKNxF,KAAA,QAAK6L,SAAS,CAAC,wCAAwC,CAAAH,QAAA,eACrD5L,IAAA,OAAI+L,SAAS,CAAC,4BAA4B,CAAAH,QAAA,CAAC,2BAAyB,CAAI,CAAC,cACzE5L,IAAA,QAAK+L,SAAS,CAAC,2BAA2B,CAAAH,QAAA,CACvCrG,UAAU,CAACpB,GAAG,CAAC,CAACpC,QAAQ,CAAE2D,KAAK,gBAC9B1F,IAAA,QAAiB+L,SAAS,CAAC,oCAAoC,CAAAH,QAAA,cAC7D1L,KAAA,UAAO6L,SAAS,CAAC,gBAAgB,CAAAH,QAAA,eAC/B5L,IAAA,UAAA4L,QAAA,cACE1L,KAAA,OAAI6L,SAAS,CAAC,UAAU,CAAAH,QAAA,eACtB5L,IAAA,OAAI+L,SAAS,CAAC,gBAAgB,CAAAH,QAAA,CAAC,MAAI,CAAI,CAAC,cACxC5L,IAAA,OAAI+L,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAC,cAAY,CAAI,CAAC,cACjD5L,IAAA,OAAI+L,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAC,mBAAiB,CAAI,CAAC,cACtD5L,IAAA,OAAI+L,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAC,cAAY,CAAI,CAAC,cACjD5L,IAAA,OAAI+L,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAC,MAAI,CAAI,CAAC,EACvC,CAAC,CACA,CAAC,cACR5L,IAAA,UAAA4L,QAAA,CACG7J,QAAQ,CAAC8E,WAAW,CAAC1C,GAAG,CAAC,CAAC6C,IAAI,CAAE4H,SAAS,GAAK,CAC7C;AACA,KAAM,CAAAC,UAAU,CAAG7H,IAAI,CAAC5E,MAAM,CAC9B,KAAM,CAAA0M,eAAe,CAAGD,UAAU,CAAG9M,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAGlG,SAAS,CAACyE,gBAAgB,CAAIzE,SAAS,CAACqE,cAAc,CAAG,CAAE,CACxJ,KAAM,CAAAiJ,qBAAqB,CAAGD,eAAe,CAAG/M,QAAQ,CAACkI,SAAS,CAACC,aAAa,CAChF,KAAM,CAAA8E,WAAW,CAAGD,qBAAqB,CAAGhN,QAAQ,CAACwH,mBAAmB,CAACM,wBAAwB,CACjG,KAAM,CAAAoF,QAAQ,CAAGlN,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAG,CAAC,CAAGkH,UAAU,CAAG9M,QAAQ,CAAC2F,mBAAmB,CAACC,wBAAwB,CAAG,CAAC,CAEnJ,mBACEzH,KAAA,OAAA0L,QAAA,eACE5L,IAAA,OAAI+L,SAAS,CAAC,MAAM,CAAAH,QAAA,CAAE5E,IAAI,CAACA,IAAI,CAAK,CAAC,cACrChH,IAAA,OAAI+L,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAEM,cAAc,CAAC4C,eAAe,CAAC,CAAK,CAAC,cACtE9O,IAAA,OAAI+L,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAEM,cAAc,CAAC6C,qBAAqB,CAAC,CAAK,CAAC,cAC5E/O,IAAA,OAAI+L,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAEM,cAAc,CAAC8C,WAAW,CAAC,CAAK,CAAC,cAClE9O,KAAA,OAAI6L,SAAS,CAAE,mBAAmBkD,QAAQ,CAAG,IAAI,CAAG,cAAc,CAAGA,QAAQ,CAAG,GAAG,CAAG,iBAAiB,CAAGA,QAAQ,CAAG,GAAG,CAAG,gBAAgB,CAAG,eAAe,EAAG,CAAArD,QAAA,EAC7JqD,QAAQ,CAACxB,OAAO,CAAC,CAAC,CAAC,CAAC,GACvB,EAAI,CAAC,GAPEmB,SAQL,CAAC,CAET,CAAC,CAAC,CACG,CAAC,EACH,CAAC,EAjCAlJ,KAkCL,CACN,CAAC,CACC,CAAC,EACH,CAAC,EAGH,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvF,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}